{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/racesense/racesense-frontend/src/pages/Circuits.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\n\n/* ============ ICONS (inline SVG, no deps) ============ */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Svg = ({\n  children,\n  size = 16,\n  className = '',\n  stroke = 'currentColor',\n  strokeWidth = 2,\n  ...rest\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: size,\n  height: size,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: stroke,\n  strokeWidth: strokeWidth,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  \"aria-hidden\": \"true\",\n  focusable: \"false\",\n  ...rest,\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 5,\n  columnNumber: 5\n}, this);\n_c = Svg;\nconst IconFlag = props => /*#__PURE__*/_jsxDEV(Svg, {\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 3v18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 4s3-1 6 1 6 0 6 0v9s-3 1-6-1-6 0-6 0V4z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 24,\n  columnNumber: 5\n}, this);\n_c2 = IconFlag;\nconst IconRuler = props => /*#__PURE__*/_jsxDEV(Svg, {\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n    x: \"3\",\n    y: \"6\",\n    width: \"18\",\n    height: \"12\",\n    rx: \"2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7 10h2M11 10h2M15 10h2M7 14h1M11 14h1M15 14h1\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 30,\n  columnNumber: 5\n}, this);\n_c3 = IconRuler;\nconst IconWidth = props => /*#__PURE__*/_jsxDEV(Svg, {\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M3 12h18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7 8l-4 4 4 4M17 8l4 4-4 4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 36,\n  columnNumber: 5\n}, this);\n_c4 = IconWidth;\nconst IconSearch = props => /*#__PURE__*/_jsxDEV(Svg, {\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"11\",\n    cy: \"11\",\n    r: \"7\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m21 21-3.8-3.8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 42,\n  columnNumber: 5\n}, this);\n_c5 = IconSearch;\nconst IconEdit = props => /*#__PURE__*/_jsxDEV(Svg, {\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 48,\n  columnNumber: 5\n}, this);\n_c6 = IconEdit;\nconst IconSave = props => /*#__PURE__*/_jsxDEV(Svg, {\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"17 21 17 13 7 13 7 21\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"7 3 7 8 15 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 54,\n  columnNumber: 5\n}, this);\n_c7 = IconSave;\nconst IconX = props => /*#__PURE__*/_jsxDEV(Svg, {\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"18\",\n    y1: \"6\",\n    x2: \"6\",\n    y2: \"18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"6\",\n    y1: \"6\",\n    x2: \"18\",\n    y2: \"18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 61,\n  columnNumber: 5\n}, this);\n\n/* ===== Helpers di proiezione e fit su canvas ===== */\n_c8 = IconX;\nfunction projectLatLonToXY(points) {\n  if (!points || points.length === 0) return [];\n  const lat0 = points.reduce((s, p) => s + p.lat, 0) / points.length;\n  const lon0 = points.reduce((s, p) => s + p.lon, 0) / points.length;\n  const mPerDegLat = 111132;\n  const mPerDegLon = 111320 * Math.cos(lat0 * Math.PI / 180);\n  return points.map(p => ({\n    x: (p.lon - lon0) * mPerDegLon,\n    y: (p.lat - lat0) * mPerDegLat * -1\n  }));\n}\nfunction fitToCanvas(localXY, width, height, padding = 20) {\n  if (!localXY.length) return [];\n  const xs = localXY.map(p => p.x),\n    ys = localXY.map(p => p.y);\n  const minX = Math.min(...xs),\n    maxX = Math.max(...xs);\n  const minY = Math.min(...ys),\n    maxY = Math.max(...ys);\n  const spanX = maxX - minX || 1,\n    spanY = maxY - minY || 1;\n  const scale = Math.min((width - 2 * padding) / spanX, (height - 2 * padding) / spanY);\n  const offX = padding - minX * scale + (width - 2 * padding - spanX * scale) / 2;\n  const offY = padding - minY * scale + (height - 2 * padding - spanY * scale) / 2;\n  return localXY.map(p => ({\n    X: p.x * scale + offX,\n    Y: p.y * scale + offY\n  }));\n}\n\n/* ===== Canvas preview per le card ===== */\nfunction MiniTrack({\n  points,\n  className = ''\n}) {\n  _s();\n  const ref = useRef(null);\n  useEffect(() => {\n    const canvas = ref.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const W = canvas.width,\n      H = canvas.height;\n    ctx.clearRect(0, 0, W, H);\n    ctx.fillStyle = 'rgba(255,255,255,0.03)';\n    ctx.fillRect(0, 0, W, H);\n    if (!points || points.length < 2) {\n      ctx.setLineDash([8, 8]);\n      ctx.strokeStyle = 'rgba(255,255,255,0.20)';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(14, 14, W - 28, H - 28);\n      ctx.setLineDash([]);\n      return;\n    }\n    const local = projectLatLonToXY(points);\n    const fitted = fitToCanvas(local, W, H, 14);\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(192,255,3,0.9)';\n    ctx.lineWidth = 2.5;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.shadowColor = 'rgba(192,255,3,0.35)';\n    ctx.shadowBlur = 6;\n    ctx.stroke();\n    ctx.shadowBlur = 0;\n    const s = fitted[0];\n    ctx.fillStyle = '#0a0a0a';\n    ctx.strokeStyle = 'rgba(255,255,255,0.85)';\n    ctx.lineWidth = 1.5;\n    ctx.beginPath();\n    ctx.arc(s.X, s.Y, 4, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.stroke();\n  }, [points]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: ref,\n    width: 320,\n    height: 150,\n    className: `cr-mini ${className}`,\n    \"aria-hidden\": \"true\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Canvas grande con settori e cordoli ===== */\n_s(MiniTrack, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c9 = MiniTrack;\nfunction TrackCanvas({\n  points,\n  sectors,\n  kerbs,\n  width = 760,\n  height = 420\n}) {\n  _s2();\n  const ref = useRef(null);\n  useEffect(() => {\n    const canvas = ref.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = 'rgba(255,255,255,0.02)';\n    ctx.strokeStyle = 'rgba(192,255,3,0.18)';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);\n    if (!points || points.length < 2) return;\n    const local = projectLatLonToXY(points);\n    const fitted = fitToCanvas(local, canvas.width, canvas.height, 24);\n\n    // Disegna settori colorati\n    if (sectors && sectors.length > 0) {\n      sectors.forEach(sector => {\n        const sectorPoints = fitted.slice(sector.startIdx, sector.endIdx + 1);\n        if (sectorPoints.length < 2) return;\n        ctx.beginPath();\n        sectorPoints.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n        ctx.strokeStyle = sector.color;\n        ctx.lineWidth = 12;\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.globalAlpha = 0.4;\n        ctx.stroke();\n        ctx.globalAlpha = 1;\n      });\n    }\n\n    // Asfalto\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(80,84,90,0.95)';\n    ctx.lineWidth = 10;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.stroke();\n\n    // Bordo\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(255,255,255,0.12)';\n    ctx.lineWidth = 12;\n    ctx.stroke();\n\n    // Cordoli\n    if (kerbs && kerbs.length > 0) {\n      kerbs.forEach(kerb => {\n        const kerbPoints = fitted.slice(kerb.startIdx, kerb.endIdx + 1);\n        if (kerbPoints.length < 2) return;\n\n        // Disegna cordolo con pattern a strisce\n        for (let i = 0; i < kerbPoints.length - 1; i++) {\n          const p1 = kerbPoints[i];\n          const p2 = kerbPoints[i + 1];\n          ctx.strokeStyle = i % 2 === 0 ? '#ff0000' : '#ffffff';\n          ctx.lineWidth = 6;\n          ctx.beginPath();\n          ctx.moveTo(p1.X, p1.Y);\n          ctx.lineTo(p2.X, p2.Y);\n          ctx.stroke();\n        }\n      });\n    }\n\n    // Linea start\n    const s0 = fitted[0],\n      s1 = fitted[1] || fitted[0];\n    const ang = Math.atan2(s1.Y - s0.Y, s1.X - s0.X);\n    ctx.save();\n    ctx.translate(s0.X, s0.Y);\n    ctx.rotate(ang);\n    ctx.strokeStyle = '#fff';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(0, -10);\n    ctx.lineTo(0, 10);\n    ctx.stroke();\n    ctx.restore();\n  }, [points, sectors, kerbs]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: ref,\n    width: width,\n    height: height,\n    className: \"cr-canvas\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 12\n  }, this);\n}\n\n/* ===== Modal ===== */\n_s2(TrackCanvas, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c0 = TrackCanvas;\nfunction Modal({\n  open,\n  onClose,\n  children\n}) {\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cr-modal\",\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cr-backdrop\",\n      onClick: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cr-dialog\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cr-close\",\n        onClick: onClose,\n        \"aria-label\": \"Chiudi\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Editor Settori ===== */\n_c1 = Modal;\nfunction SectorEditor({\n  totalPoints,\n  sectors,\n  onChange\n}) {\n  _s3();\n  const [editingSector, setEditingSector] = useState(null);\n  const addSector = () => {\n    if (sectors.length >= 3) return;\n    const newSector = {\n      id: Date.now(),\n      name: `Settore ${sectors.length + 1}`,\n      startIdx: 0,\n      endIdx: Math.floor(totalPoints / 3),\n      color: ['#ff0000', '#00ff00', '#0000ff'][sectors.length]\n    };\n    onChange([...sectors, newSector]);\n    setEditingSector(newSector.id);\n  };\n  const updateSector = (id, updates) => {\n    onChange(sectors.map(s => s.id === id ? {\n      ...s,\n      ...updates\n    } : s));\n  };\n  const removeSector = id => {\n    onChange(sectors.filter(s => s.id !== id));\n    if (editingSector === id) setEditingSector(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ed-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ed-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"ed-title\",\n        children: [\"Settori (\", sectors.length, \"/3)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this), sectors.length < 3 && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: addSector,\n        children: \"+ Aggiungi Settore\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ed-list\",\n      children: sectors.map(sector => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ed-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ed-item-header\",\n          onClick: () => setEditingSector(editingSector === sector.id ? null : sector.id),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-item-color\",\n            style: {\n              background: sector.color\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ed-item-name\",\n            children: sector.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ed-item-range\",\n            children: [sector.startIdx, \" \\u2192 \", sector.endIdx, \" (\", sector.endIdx - sector.startIdx + 1, \" punti)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ed-item-del\",\n            onClick: e => {\n              e.stopPropagation();\n              removeSector(sector.id);\n            },\n            children: /*#__PURE__*/_jsxDEV(IconX, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 25\n        }, this), editingSector === sector.id && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ed-item-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Nome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              value: sector.name,\n              onChange: e => updateSector(sector.id, {\n                name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Punto Iniziale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"number\",\n              min: 0,\n              max: totalPoints - 1,\n              value: sector.startIdx,\n              onChange: e => updateSector(sector.id, {\n                startIdx: parseInt(e.target.value) || 0\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Punto Finale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"number\",\n              min: 0,\n              max: totalPoints - 1,\n              value: sector.endIdx,\n              onChange: e => updateSector(sector.id, {\n                endIdx: parseInt(e.target.value) || 0\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Colore\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"color\",\n              value: sector.color,\n              onChange: e => updateSector(sector.id, {\n                color: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 29\n        }, this)]\n      }, sector.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }, this), sectors.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ed-empty\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        children: \"Nessun settore definito. Aggiungi fino a 3 settori per dividere il circuito.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Editor Cordoli ===== */\n_s3(SectorEditor, \"jTy+yih11xK77kg+zHvtb63/3uk=\");\n_c10 = SectorEditor;\nfunction KerbEditor({\n  totalPoints,\n  kerbs,\n  onChange\n}) {\n  _s4();\n  const [editingKerb, setEditingKerb] = useState(null);\n  const addKerb = () => {\n    const newKerb = {\n      id: Date.now(),\n      name: `Cordolo ${kerbs.length + 1}`,\n      startIdx: 0,\n      endIdx: 20,\n      type: 'red-white'\n    };\n    onChange([...kerbs, newKerb]);\n    setEditingKerb(newKerb.id);\n  };\n  const updateKerb = (id, updates) => {\n    onChange(kerbs.map(k => k.id === id ? {\n      ...k,\n      ...updates\n    } : k));\n  };\n  const removeKerb = id => {\n    onChange(kerbs.filter(k => k.id !== id));\n    if (editingKerb === id) setEditingKerb(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ed-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ed-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"ed-title\",\n        children: [\"Cordoli (\", kerbs.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: addKerb,\n        children: \"+ Aggiungi Cordolo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ed-list\",\n      children: kerbs.map(kerb => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ed-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ed-item-header\",\n          onClick: () => setEditingKerb(editingKerb === kerb.id ? null : kerb.id),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-item-kerb\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ed-item-name\",\n            children: kerb.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ed-item-range\",\n            children: [kerb.startIdx, \" \\u2192 \", kerb.endIdx, \" (\", kerb.endIdx - kerb.startIdx + 1, \" punti)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"ed-item-del\",\n            onClick: e => {\n              e.stopPropagation();\n              removeKerb(kerb.id);\n            },\n            children: /*#__PURE__*/_jsxDEV(IconX, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 25\n        }, this), editingKerb === kerb.id && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ed-item-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Nome\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              value: kerb.name,\n              onChange: e => updateKerb(kerb.id, {\n                name: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Punto Iniziale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"number\",\n              min: 0,\n              max: totalPoints - 1,\n              value: kerb.startIdx,\n              onChange: e => updateKerb(kerb.id, {\n                startIdx: parseInt(e.target.value) || 0\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Punto Finale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"number\",\n              min: 0,\n              max: totalPoints - 1,\n              value: kerb.endIdx,\n              onChange: e => updateKerb(kerb.id, {\n                endIdx: parseInt(e.target.value) || 0\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 29\n        }, this)]\n      }, kerb.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 13\n    }, this), kerbs.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ed-empty\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        children: \"Nessun cordolo definito. Aggiungi cordoli per delimitare le zone del circuito.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 386,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Card singola con lazy-preview ===== */\n_s4(KerbEditor, \"PUkeMxV5sjDrLs3VCzCmG0PuQro=\");\n_c11 = KerbEditor;\nfunction CircuitCard({\n  apiBase,\n  circuit,\n  onOpenDetail\n}) {\n  _s5();\n  var _ref, _circuit$points, _circuit$meta;\n  const [previewPts, setPreviewPts] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const cardRef = useRef(null);\n  useEffect(() => {\n    const el = cardRef.current;\n    if (!el) return;\n    let aborted = false;\n    const controller = new AbortController();\n    const io = new IntersectionObserver(entries => {\n      var _entries$;\n      const v = (_entries$ = entries[0]) === null || _entries$ === void 0 ? void 0 : _entries$.isIntersecting;\n      if (!v) return;\n      io.disconnect();\n      setIsLoading(true);\n      fetch(`${apiBase}/api/circuits/${encodeURIComponent(circuit.id)}`, {\n        signal: controller.signal\n      }).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(j => {\n        if (aborted) return;\n        const pts = Array.isArray(j.sectors) && j.sectors.length ? j.sectors.map(s => ({\n          lat: s.lat,\n          lon: s.lon\n        })) : Array.isArray(j.pathPoints) ? j.pathPoints : null;\n        setPreviewPts(pts);\n      }).catch(() => {}).finally(() => !aborted && setIsLoading(false));\n    }, {\n      rootMargin: '120px'\n    });\n    io.observe(el);\n    return () => {\n      aborted = true;\n      controller.abort();\n      io.disconnect();\n    };\n  }, [apiBase, circuit.id]);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    ref: cardRef,\n    className: \"cr-card\",\n    role: \"button\",\n    tabIndex: 0,\n    onClick: () => onOpenDetail(circuit.id),\n    onKeyDown: e => e.key === 'Enter' && onOpenDetail(circuit.id),\n    children: [/*#__PURE__*/_jsxDEV(MiniTrack, {\n      points: previewPts || [],\n      className: isLoading ? 'loading' : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"cr-card-head\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"cr-title\",\n        children: circuit.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-sub muted\",\n        children: circuit.createdAt ? new Date(circuit.createdAt).toLocaleDateString() : 'data sconosciuta'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"cr-meta\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [/*#__PURE__*/_jsxDEV(IconFlag, {\n          className: \"pill-ic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 21\n        }, this), (_ref = (_circuit$points = circuit.points) !== null && _circuit$points !== void 0 ? _circuit$points : (_circuit$meta = circuit.meta) === null || _circuit$meta === void 0 ? void 0 : _circuit$meta.points) !== null && _ref !== void 0 ? _ref : '?', \" punti\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 17\n      }, this), circuit.lengthMeters != null && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [/*#__PURE__*/_jsxDEV(IconRuler, {\n          className: \"pill-ic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 25\n        }, this), circuit.lengthMeters.toFixed(1), \" m\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 21\n      }, this), circuit.widthMeters != null && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [/*#__PURE__*/_jsxDEV(IconWidth, {\n          className: \"pill-ic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 25\n        }, this), circuit.widthMeters, \" m\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 491,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Pagina ===== */\n_s5(CircuitCard, \"q2+MmCmcf7SNW5W34DO8BiBUPLA=\");\n_c12 = CircuitCard;\nexport default function CircuitsPage({\n  apiBase\n}) {\n  _s6();\n  var _ref2, _detail$meta$points, _detail$meta, _detail$pathPoints, _detail$stats, _detail$params, _detail$params2, _detail$params$minQua, _detail$params3;\n  const [list, setList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [query, setQuery] = useState('');\n  const [sort, setSort] = useState('date_desc');\n  const [openId, setOpenId] = useState(null);\n  const [detail, setDetail] = useState(null);\n  const [detailLoading, setDetailLoading] = useState(false);\n  const [detailError, setDetailError] = useState('');\n  const [editMode, setEditMode] = useState(false);\n  const [sectors, setSectors] = useState([]);\n  const [saving, setSaving] = useState(false);\n  useEffect(() => {\n    setLoading(true);\n    setError('');\n    fetch(`${apiBase}/api/circuits`).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(json => setList(json || [])).catch(e => setError(e.message || 'Errore caricamento circuiti')).finally(() => setLoading(false));\n  }, [apiBase]);\n  const filtered = useMemo(() => {\n    const q = query.trim().toLowerCase();\n    let arr = list.filter(c => {\n      var _c$name, _c$id;\n      return !q || `${(_c$name = c.name) !== null && _c$name !== void 0 ? _c$name : ''}`.toLowerCase().includes(q) || `${(_c$id = c.id) !== null && _c$id !== void 0 ? _c$id : ''}`.toLowerCase().includes(q);\n    });\n    switch (sort) {\n      case 'name_asc':\n        arr = arr.sort((a, b) => (a.name || '').localeCompare(b.name || ''));\n        break;\n      case 'len_desc':\n        arr = arr.sort((a, b) => (b.lengthMeters || 0) - (a.lengthMeters || 0));\n        break;\n      case 'date_asc':\n        arr = arr.sort((a, b) => new Date(a.createdAt || 0) - new Date(b.createdAt || 0));\n        break;\n      default:\n        arr = arr.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n    }\n    return arr;\n  }, [list, query, sort]);\n  const openDetail = id => {\n    setOpenId(id);\n    setDetail(null);\n    setDetailError('');\n    setDetailLoading(true);\n    setEditMode(false);\n    setSectors([]);\n    fetch(`${apiBase}/api/circuits/${encodeURIComponent(id)}`).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(j => {\n      setDetail(j);\n      setSectors(j.customSectors || []);\n    }).catch(e => setDetailError(e.message || 'Errore caricamento circuito')).finally(() => setDetailLoading(false));\n  };\n  const saveChanges = async () => {\n    if (!detail) return;\n    setSaving(true);\n    try {\n      const updatedCircuit = {\n        ...detail,\n        customSectors: sectors\n      };\n      const res = await fetch(`${apiBase}/api/circuits/${encodeURIComponent(detail.id)}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updatedCircuit)\n      });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      setEditMode(false);\n      alert('Modifiche salvate con successo!');\n    } catch (e) {\n      alert('Errore durante il salvataggio: ' + e.message);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const points = detail ? Array.isArray(detail.sectors) && detail.sectors.length ? detail.sectors.map(s => ({\n    lat: s.lat,\n    lon: s.lon\n  })) : detail.pathPoints || [] : [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"circuits-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-grid\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-glow bg-glow-1\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-glow bg-glow-2\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main small-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"circuits-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Circuiti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-search\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cr-search-ic\",\n              \"aria-hidden\": \"true\",\n              style: {\n                color: 'white'\n              },\n              children: /*#__PURE__*/_jsxDEV(IconSearch, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 106\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"cr-input\",\n              type: \"text\",\n              placeholder: \"Cerca per nome o ID\\u2026\",\n              value: query,\n              onChange: e => setQuery(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"muted\",\n              htmlFor: \"sort\",\n              children: \"Ordina\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 642,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"sort\",\n              className: \"cr-input\",\n              value: sort,\n              onChange: e => setSort(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date_desc\",\n                children: \"Pi\\xF9 recenti\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date_asc\",\n                children: \"Pi\\xF9 vecchi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"name_asc\",\n                children: \"Nome (A\\u2192Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"len_desc\",\n                children: \"Lunghezza (\\u2193)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 643,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 17\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-grid\",\n        children: Array.from({\n          length: 6\n        }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-card cr-skel\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-mini\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-skel-line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-skel-line short\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 33\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        children: [\"Errore: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 27\n      }, this), !loading && !error && (filtered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-empty\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-empty-emoji\",\n          children: \"\\uD83D\\uDCED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-empty-title\",\n          children: \"Nessun circuito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"Prova a rimuovere il filtro o aggiungere un nuovo tracciato.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-grid\",\n        children: filtered.map(c => /*#__PURE__*/_jsxDEV(CircuitCard, {\n          apiBase: apiBase,\n          circuit: c,\n          onOpenDetail: openDetail\n        }, c.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 33\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!openId,\n      onClose: () => setOpenId(null),\n      children: [detailLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        style: {\n          padding: '8px 0'\n        },\n        children: \"Caricamento circuito\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 35\n      }, this), detailError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        style: {\n          padding: '8px 0'\n        },\n        children: [\"Errore: \", detailError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 33\n      }, this), detail && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ed-toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"cr-dialog-title\",\n            children: detail.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ed-actions\",\n            children: !editMode ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-primary\",\n              onClick: () => setEditMode(true),\n              children: [/*#__PURE__*/_jsxDEV(IconEdit, {\n                size: 16,\n                style: {\n                  marginRight: '6px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 697,\n                columnNumber: 41\n              }, this), \"Modifica\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-ghost\",\n                onClick: () => {\n                  setEditMode(false);\n                  setSectors(detail.customSectors || []);\n                  setKerbs(detail.customKerbs || []);\n                },\n                children: \"Annulla\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary\",\n                onClick: saveChanges,\n                disabled: saving,\n                children: [/*#__PURE__*/_jsxDEV(IconSave, {\n                  size: 16,\n                  style: {\n                    marginRight: '6px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 710,\n                  columnNumber: 45\n                }, this), saving ? 'Salvataggio...' : 'Salva']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 709,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-block\",\n            children: /*#__PURE__*/_jsxDEV(TrackCanvas, {\n              points: points,\n              sectors: sectors\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-block\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"cr-block-title\",\n              children: detail.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Creato\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: detail.createdAt ? new Date(detail.createdAt).toLocaleString() : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 95\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Punti\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_ref2 = (_detail$meta$points = (_detail$meta = detail.meta) === null || _detail$meta === void 0 ? void 0 : _detail$meta.points) !== null && _detail$meta$points !== void 0 ? _detail$meta$points : (_detail$pathPoints = detail.pathPoints) === null || _detail$pathPoints === void 0 ? void 0 : _detail$pathPoints.length) !== null && _ref2 !== void 0 ? _ref2 : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 94\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Lunghezza\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$stats = detail.stats) !== null && _detail$stats !== void 0 && _detail$stats.lengthMeters ? `${detail.stats.lengthMeters.toFixed(1)} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 98\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Larghezza\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params = detail.params) !== null && _detail$params !== void 0 && _detail$params.widthMeters ? `${detail.params.widthMeters} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 98\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Spacing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params2 = detail.params) !== null && _detail$params2 !== void 0 && _detail$params2.spacingMeters ? `${detail.params.spacingMeters} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 96\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 731,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"minQual\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params$minQua = (_detail$params3 = detail.params) === null || _detail$params3 === void 0 ? void 0 : _detail$params3.minQual) !== null && _detail$params$minQua !== void 0 ? _detail$params$minQua : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 96\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 25\n        }, this), editMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ed-panel\",\n          children: [/*#__PURE__*/_jsxDEV(SectorEditor, {\n            totalPoints: points.length,\n            sectors: sectors,\n            onChange: setSectors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(KerbEditor, {\n            totalPoints: points.length,\n            kerbs: kerbs,\n            onChange: setKerbs\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 623,\n    columnNumber: 9\n  }, this);\n}\n_s6(CircuitsPage, \"q5HQXlDHzbB4XdAKessD+fLOxV4=\");\n_c13 = CircuitsPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"Svg\");\n$RefreshReg$(_c2, \"IconFlag\");\n$RefreshReg$(_c3, \"IconRuler\");\n$RefreshReg$(_c4, \"IconWidth\");\n$RefreshReg$(_c5, \"IconSearch\");\n$RefreshReg$(_c6, \"IconEdit\");\n$RefreshReg$(_c7, \"IconSave\");\n$RefreshReg$(_c8, \"IconX\");\n$RefreshReg$(_c9, \"MiniTrack\");\n$RefreshReg$(_c0, \"TrackCanvas\");\n$RefreshReg$(_c1, \"Modal\");\n$RefreshReg$(_c10, \"SectorEditor\");\n$RefreshReg$(_c11, \"KerbEditor\");\n$RefreshReg$(_c12, \"CircuitCard\");\n$RefreshReg$(_c13, \"CircuitsPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","jsxDEV","_jsxDEV","Fragment","_Fragment","Svg","children","size","className","stroke","strokeWidth","rest","xmlns","width","height","viewBox","fill","strokeLinecap","strokeLinejoin","focusable","fileName","_jsxFileName","lineNumber","columnNumber","_c","IconFlag","props","d","_c2","IconRuler","x","y","rx","_c3","IconWidth","_c4","IconSearch","cx","cy","r","_c5","IconEdit","_c6","IconSave","points","_c7","IconX","x1","y1","x2","y2","_c8","projectLatLonToXY","length","lat0","reduce","s","p","lat","lon0","lon","mPerDegLat","mPerDegLon","Math","cos","PI","map","fitToCanvas","localXY","padding","xs","ys","minX","min","maxX","max","minY","maxY","spanX","spanY","scale","offX","offY","X","Y","MiniTrack","_s","ref","canvas","current","ctx","getContext","W","H","clearRect","fillStyle","fillRect","setLineDash","strokeStyle","lineWidth","strokeRect","local","fitted","beginPath","forEach","i","lineTo","moveTo","lineCap","lineJoin","shadowColor","shadowBlur","arc","_c9","TrackCanvas","sectors","kerbs","_s2","sector","sectorPoints","slice","startIdx","endIdx","color","globalAlpha","kerb","kerbPoints","p1","p2","s0","s1","ang","atan2","save","translate","rotate","restore","_c0","Modal","open","onClose","role","onClick","_c1","SectorEditor","totalPoints","onChange","_s3","editingSector","setEditingSector","addSector","newSector","id","Date","now","name","floor","updateSector","updates","removeSector","filter","style","background","e","stopPropagation","value","target","type","parseInt","_c10","KerbEditor","_s4","editingKerb","setEditingKerb","addKerb","newKerb","updateKerb","k","removeKerb","_c11","CircuitCard","apiBase","circuit","onOpenDetail","_s5","_ref","_circuit$points","_circuit$meta","previewPts","setPreviewPts","isLoading","setIsLoading","cardRef","el","aborted","controller","AbortController","io","IntersectionObserver","entries","_entries$","v","isIntersecting","disconnect","fetch","encodeURIComponent","signal","then","ok","json","Promise","reject","Error","status","j","pts","Array","isArray","pathPoints","catch","finally","rootMargin","observe","abort","tabIndex","onKeyDown","key","createdAt","toLocaleDateString","meta","lengthMeters","toFixed","widthMeters","_c12","CircuitsPage","_s6","_ref2","_detail$meta$points","_detail$meta","_detail$pathPoints","_detail$stats","_detail$params","_detail$params2","_detail$params$minQua","_detail$params3","list","setList","loading","setLoading","error","setError","query","setQuery","sort","setSort","openId","setOpenId","detail","setDetail","detailLoading","setDetailLoading","detailError","setDetailError","editMode","setEditMode","setSectors","saving","setSaving","message","filtered","q","trim","toLowerCase","arr","c","_c$name","_c$id","includes","a","b","localeCompare","openDetail","customSectors","saveChanges","updatedCircuit","res","method","headers","body","JSON","stringify","alert","placeholder","htmlFor","from","_","marginRight","setKerbs","customKerbs","disabled","toLocaleString","stats","params","spacingMeters","minQual","_c13","$RefreshReg$"],"sources":["/home/ubuntu/racesense/racesense-frontend/src/pages/Circuits.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\n\n/* ============ ICONS (inline SVG, no deps) ============ */\nconst Svg = ({ children, size = 16, className = '', stroke = 'currentColor', strokeWidth = 2, ...rest }) => (\n    <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width={size}\n        height={size}\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke={stroke}\n        strokeWidth={strokeWidth}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        className={className}\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        {...rest}\n    >\n        {children}\n    </svg>\n);\nconst IconFlag = (props) => (\n    <Svg {...props}>\n        <path d=\"M4 3v18\" />\n        <path d=\"M4 4s3-1 6 1 6 0 6 0v9s-3 1-6-1-6 0-6 0V4z\" />\n    </Svg>\n);\nconst IconRuler = (props) => (\n    <Svg {...props}>\n        <rect x=\"3\" y=\"6\" width=\"18\" height=\"12\" rx=\"2\" />\n        <path d=\"M7 10h2M11 10h2M15 10h2M7 14h1M11 14h1M15 14h1\" />\n    </Svg>\n);\nconst IconWidth = (props) => (\n    <Svg {...props}>\n        <path d=\"M3 12h18\" />\n        <path d=\"M7 8l-4 4 4 4M17 8l4 4-4 4\" />\n    </Svg>\n);\nconst IconSearch = (props) => (\n    <Svg {...props}>\n        <circle cx=\"11\" cy=\"11\" r=\"7\" />\n        <path d=\"m21 21-3.8-3.8\" />\n    </Svg>\n);\nconst IconEdit = (props) => (\n    <Svg {...props}>\n        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n    </Svg>\n);\nconst IconSave = (props) => (\n    <Svg {...props}>\n        <path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\" />\n        <polyline points=\"17 21 17 13 7 13 7 21\" />\n        <polyline points=\"7 3 7 8 15 8\" />\n    </Svg>\n);\nconst IconX = (props) => (\n    <Svg {...props}>\n        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n    </Svg>\n);\n\n/* ===== Helpers di proiezione e fit su canvas ===== */\nfunction projectLatLonToXY(points) {\n    if (!points || points.length === 0) return [];\n    const lat0 = points.reduce((s, p) => s + p.lat, 0) / points.length;\n    const lon0 = points.reduce((s, p) => s + p.lon, 0) / points.length;\n    const mPerDegLat = 111_132;\n    const mPerDegLon = 111_320 * Math.cos((lat0 * Math.PI) / 180);\n    return points.map(p => ({\n        x: (p.lon - lon0) * mPerDegLon,\n        y: (p.lat - lat0) * mPerDegLat * -1,\n    }));\n}\n\nfunction fitToCanvas(localXY, width, height, padding = 20) {\n    if (!localXY.length) return [];\n    const xs = localXY.map(p => p.x), ys = localXY.map(p => p.y);\n    const minX = Math.min(...xs), maxX = Math.max(...xs);\n    const minY = Math.min(...ys), maxY = Math.max(...ys);\n    const spanX = (maxX - minX) || 1, spanY = (maxY - minY) || 1;\n    const scale = Math.min((width - 2 * padding) / spanX, (height - 2 * padding) / spanY);\n    const offX = padding - minX * scale + (width - 2 * padding - spanX * scale) / 2;\n    const offY = padding - minY * scale + (height - 2 * padding - spanY * scale) / 2;\n    return localXY.map(p => ({ X: p.x * scale + offX, Y: p.y * scale + offY }));\n}\n\n/* ===== Canvas preview per le card ===== */\nfunction MiniTrack({ points, className = '' }) {\n    const ref = useRef(null);\n    useEffect(() => {\n        const canvas = ref.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        const W = canvas.width, H = canvas.height;\n        ctx.clearRect(0, 0, W, H);\n        ctx.fillStyle = 'rgba(255,255,255,0.03)';\n        ctx.fillRect(0, 0, W, H);\n        if (!points || points.length < 2) {\n            ctx.setLineDash([8, 8]);\n            ctx.strokeStyle = 'rgba(255,255,255,0.20)';\n            ctx.lineWidth = 2;\n            ctx.strokeRect(14, 14, W - 28, H - 28);\n            ctx.setLineDash([]);\n            return;\n        }\n        const local = projectLatLonToXY(points);\n        const fitted = fitToCanvas(local, W, H, 14);\n        ctx.beginPath();\n        fitted.forEach((p, i) => (i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y)));\n        ctx.strokeStyle = 'rgba(192,255,3,0.9)';\n        ctx.lineWidth = 2.5;\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.shadowColor = 'rgba(192,255,3,0.35)';\n        ctx.shadowBlur = 6;\n        ctx.stroke();\n        ctx.shadowBlur = 0;\n        const s = fitted[0];\n        ctx.fillStyle = '#0a0a0a';\n        ctx.strokeStyle = 'rgba(255,255,255,0.85)';\n        ctx.lineWidth = 1.5;\n        ctx.beginPath();\n        ctx.arc(s.X, s.Y, 4, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.stroke();\n    }, [points]);\n    return (\n        <canvas\n            ref={ref}\n            width={320}\n            height={150}\n            className={`cr-mini ${className}`}\n            aria-hidden=\"true\"\n        />\n    );\n}\n\n/* ===== Canvas grande con settori e cordoli ===== */\nfunction TrackCanvas({ points, sectors, kerbs, width = 760, height = 420 }) {\n    const ref = useRef(null);\n\n    useEffect(() => {\n        const canvas = ref.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        ctx.fillStyle = 'rgba(255,255,255,0.02)';\n        ctx.strokeStyle = 'rgba(192,255,3,0.18)';\n        ctx.lineWidth = 1;\n        ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);\n\n        if (!points || points.length < 2) return;\n\n        const local = projectLatLonToXY(points);\n        const fitted = fitToCanvas(local, canvas.width, canvas.height, 24);\n\n        // Disegna settori colorati\n        if (sectors && sectors.length > 0) {\n            sectors.forEach(sector => {\n                const sectorPoints = fitted.slice(sector.startIdx, sector.endIdx + 1);\n                if (sectorPoints.length < 2) return;\n\n                ctx.beginPath();\n                sectorPoints.forEach((p, i) => (i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y)));\n                ctx.strokeStyle = sector.color;\n                ctx.lineWidth = 12;\n                ctx.lineCap = 'round';\n                ctx.lineJoin = 'round';\n                ctx.globalAlpha = 0.4;\n                ctx.stroke();\n                ctx.globalAlpha = 1;\n            });\n        }\n\n        // Asfalto\n        ctx.beginPath();\n        fitted.forEach((p, i) => (i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y)));\n        ctx.strokeStyle = 'rgba(80,84,90,0.95)';\n        ctx.lineWidth = 10;\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.stroke();\n\n        // Bordo\n        ctx.beginPath();\n        fitted.forEach((p, i) => (i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y)));\n        ctx.strokeStyle = 'rgba(255,255,255,0.12)';\n        ctx.lineWidth = 12;\n        ctx.stroke();\n\n        // Cordoli\n        if (kerbs && kerbs.length > 0) {\n            kerbs.forEach(kerb => {\n                const kerbPoints = fitted.slice(kerb.startIdx, kerb.endIdx + 1);\n                if (kerbPoints.length < 2) return;\n\n                // Disegna cordolo con pattern a strisce\n                for (let i = 0; i < kerbPoints.length - 1; i++) {\n                    const p1 = kerbPoints[i];\n                    const p2 = kerbPoints[i + 1];\n\n                    ctx.strokeStyle = i % 2 === 0 ? '#ff0000' : '#ffffff';\n                    ctx.lineWidth = 6;\n                    ctx.beginPath();\n                    ctx.moveTo(p1.X, p1.Y);\n                    ctx.lineTo(p2.X, p2.Y);\n                    ctx.stroke();\n                }\n            });\n        }\n\n        // Linea start\n        const s0 = fitted[0], s1 = fitted[1] || fitted[0];\n        const ang = Math.atan2(s1.Y - s0.Y, s1.X - s0.X);\n        ctx.save();\n        ctx.translate(s0.X, s0.Y);\n        ctx.rotate(ang);\n        ctx.strokeStyle = '#fff';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(0, -10);\n        ctx.lineTo(0, 10);\n        ctx.stroke();\n        ctx.restore();\n    }, [points, sectors, kerbs]);\n\n    return <canvas ref={ref} width={width} height={height} className=\"cr-canvas\" />;\n}\n\n/* ===== Modal ===== */\nfunction Modal({ open, onClose, children }) {\n    if (!open) return null;\n    return (\n        <div className=\"cr-modal\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"cr-backdrop\" onClick={onClose} />\n            <div className=\"cr-dialog\">\n                <button className=\"cr-close\" onClick={onClose} aria-label=\"Chiudi\"></button>\n                {children}\n            </div>\n        </div>\n    );\n}\n\n/* ===== Editor Settori ===== */\nfunction SectorEditor({ totalPoints, sectors, onChange }) {\n    const [editingSector, setEditingSector] = useState(null);\n\n    const addSector = () => {\n        if (sectors.length >= 3) return;\n        const newSector = {\n            id: Date.now(),\n            name: `Settore ${sectors.length + 1}`,\n            startIdx: 0,\n            endIdx: Math.floor(totalPoints / 3),\n            color: ['#ff0000', '#00ff00', '#0000ff'][sectors.length]\n        };\n        onChange([...sectors, newSector]);\n        setEditingSector(newSector.id);\n    };\n\n    const updateSector = (id, updates) => {\n        onChange(sectors.map(s => s.id === id ? { ...s, ...updates } : s));\n    };\n\n    const removeSector = (id) => {\n        onChange(sectors.filter(s => s.id !== id));\n        if (editingSector === id) setEditingSector(null);\n    };\n\n    return (\n        <div className=\"ed-section\">\n            <div className=\"ed-header\">\n                <h3 className=\"ed-title\">Settori ({sectors.length}/3)</h3>\n                {sectors.length < 3 && (\n                    <button className=\"btn-primary\" onClick={addSector}>\n                        + Aggiungi Settore\n                    </button>\n                )}\n            </div>\n\n            <div className=\"ed-list\">\n                {sectors.map(sector => (\n                    <div key={sector.id} className=\"ed-item\">\n                        <div className=\"ed-item-header\" onClick={() => setEditingSector(editingSector === sector.id ? null : sector.id)}>\n                            <div className=\"ed-item-color\" style={{ background: sector.color }} />\n                            <span className=\"ed-item-name\">{sector.name}</span>\n                            <span className=\"ed-item-range\">\n                                {sector.startIdx}  {sector.endIdx} ({sector.endIdx - sector.startIdx + 1} punti)\n                            </span>\n                            <button\n                                className=\"ed-item-del\"\n                                onClick={(e) => { e.stopPropagation(); removeSector(sector.id); }}\n                            >\n                                <IconX size={16} />\n                            </button>\n                        </div>\n\n                        {editingSector === sector.id && (\n                            <div className=\"ed-item-body\">\n                                <div className=\"ed-row\">\n                                    <label>Nome</label>\n                                    <input\n                                        className=\"input\"\n                                        value={sector.name}\n                                        onChange={(e) => updateSector(sector.id, { name: e.target.value })}\n                                    />\n                                </div>\n                                <div className=\"ed-row\">\n                                    <label>Punto Iniziale</label>\n                                    <input\n                                        className=\"input\"\n                                        type=\"number\"\n                                        min={0}\n                                        max={totalPoints - 1}\n                                        value={sector.startIdx}\n                                        onChange={(e) => updateSector(sector.id, { startIdx: parseInt(e.target.value) || 0 })}\n                                    />\n                                </div>\n                                <div className=\"ed-row\">\n                                    <label>Punto Finale</label>\n                                    <input\n                                        className=\"input\"\n                                        type=\"number\"\n                                        min={0}\n                                        max={totalPoints - 1}\n                                        value={sector.endIdx}\n                                        onChange={(e) => updateSector(sector.id, { endIdx: parseInt(e.target.value) || 0 })}\n                                    />\n                                </div>\n                                <div className=\"ed-row\">\n                                    <label>Colore</label>\n                                    <input\n                                        className=\"input\"\n                                        type=\"color\"\n                                        value={sector.color}\n                                        onChange={(e) => updateSector(sector.id, { color: e.target.value })}\n                                    />\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                ))}\n            </div>\n\n            {sectors.length === 0 && (\n                <div className=\"ed-empty\">\n                    <p className=\"muted\">Nessun settore definito. Aggiungi fino a 3 settori per dividere il circuito.</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n/* ===== Editor Cordoli ===== */\nfunction KerbEditor({ totalPoints, kerbs, onChange }) {\n    const [editingKerb, setEditingKerb] = useState(null);\n\n    const addKerb = () => {\n        const newKerb = {\n            id: Date.now(),\n            name: `Cordolo ${kerbs.length + 1}`,\n            startIdx: 0,\n            endIdx: 20,\n            type: 'red-white'\n        };\n        onChange([...kerbs, newKerb]);\n        setEditingKerb(newKerb.id);\n    };\n\n    const updateKerb = (id, updates) => {\n        onChange(kerbs.map(k => k.id === id ? { ...k, ...updates } : k));\n    };\n\n    const removeKerb = (id) => {\n        onChange(kerbs.filter(k => k.id !== id));\n        if (editingKerb === id) setEditingKerb(null);\n    };\n\n    return (\n        <div className=\"ed-section\">\n            <div className=\"ed-header\">\n                <h3 className=\"ed-title\">Cordoli ({kerbs.length})</h3>\n                <button className=\"btn-primary\" onClick={addKerb}>\n                    + Aggiungi Cordolo\n                </button>\n            </div>\n\n            <div className=\"ed-list\">\n                {kerbs.map(kerb => (\n                    <div key={kerb.id} className=\"ed-item\">\n                        <div className=\"ed-item-header\" onClick={() => setEditingKerb(editingKerb === kerb.id ? null : kerb.id)}>\n                            <div className=\"ed-item-kerb\" />\n                            <span className=\"ed-item-name\">{kerb.name}</span>\n                            <span className=\"ed-item-range\">\n                                {kerb.startIdx}  {kerb.endIdx} ({kerb.endIdx - kerb.startIdx + 1} punti)\n                            </span>\n                            <button\n                                className=\"ed-item-del\"\n                                onClick={(e) => { e.stopPropagation(); removeKerb(kerb.id); }}\n                            >\n                                <IconX size={16} />\n                            </button>\n                        </div>\n\n                        {editingKerb === kerb.id && (\n                            <div className=\"ed-item-body\">\n                                <div className=\"ed-row\">\n                                    <label>Nome</label>\n                                    <input\n                                        className=\"input\"\n                                        value={kerb.name}\n                                        onChange={(e) => updateKerb(kerb.id, { name: e.target.value })}\n                                    />\n                                </div>\n                                <div className=\"ed-row\">\n                                    <label>Punto Iniziale</label>\n                                    <input\n                                        className=\"input\"\n                                        type=\"number\"\n                                        min={0}\n                                        max={totalPoints - 1}\n                                        value={kerb.startIdx}\n                                        onChange={(e) => updateKerb(kerb.id, { startIdx: parseInt(e.target.value) || 0 })}\n                                    />\n                                </div>\n                                <div className=\"ed-row\">\n                                    <label>Punto Finale</label>\n                                    <input\n                                        className=\"input\"\n                                        type=\"number\"\n                                        min={0}\n                                        max={totalPoints - 1}\n                                        value={kerb.endIdx}\n                                        onChange={(e) => updateKerb(kerb.id, { endIdx: parseInt(e.target.value) || 0 })}\n                                    />\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                ))}\n            </div>\n\n            {kerbs.length === 0 && (\n                <div className=\"ed-empty\">\n                    <p className=\"muted\">Nessun cordolo definito. Aggiungi cordoli per delimitare le zone del circuito.</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n/* ===== Card singola con lazy-preview ===== */\nfunction CircuitCard({ apiBase, circuit, onOpenDetail }) {\n    const [previewPts, setPreviewPts] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const cardRef = useRef(null);\n\n    useEffect(() => {\n        const el = cardRef.current;\n        if (!el) return;\n        let aborted = false;\n        const controller = new AbortController();\n        const io = new IntersectionObserver((entries) => {\n            const v = entries[0]?.isIntersecting;\n            if (!v) return;\n            io.disconnect();\n            setIsLoading(true);\n            fetch(`${apiBase}/api/circuits/${encodeURIComponent(circuit.id)}`, { signal: controller.signal })\n                .then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`)))\n                .then(j => {\n                    if (aborted) return;\n                    const pts = (Array.isArray(j.sectors) && j.sectors.length\n                        ? j.sectors.map(s => ({ lat: s.lat, lon: s.lon }))\n                        : Array.isArray(j.pathPoints) ? j.pathPoints : null);\n                    setPreviewPts(pts);\n                })\n                .catch(() => { })\n                .finally(() => !aborted && setIsLoading(false));\n        }, { rootMargin: '120px' });\n        io.observe(el);\n        return () => { aborted = true; controller.abort(); io.disconnect(); };\n    }, [apiBase, circuit.id]);\n\n    return (\n        <article\n            ref={cardRef}\n            className=\"cr-card\"\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => onOpenDetail(circuit.id)}\n            onKeyDown={(e) => e.key === 'Enter' && onOpenDetail(circuit.id)}\n        >\n            <MiniTrack points={previewPts || []} className={isLoading ? 'loading' : ''} />\n            <header className=\"cr-card-head\">\n                <h3 className=\"cr-title\">{circuit.name}</h3>\n                <div className=\"cr-sub muted\">\n                    {circuit.createdAt ? new Date(circuit.createdAt).toLocaleDateString() : 'data sconosciuta'}\n                </div>\n            </header>\n            <footer className=\"cr-meta\">\n                <span className=\"pill\">\n                    <IconFlag className=\"pill-ic\" />\n                    {(circuit.points ?? circuit.meta?.points ?? '?')} punti\n                </span>\n                {circuit.lengthMeters != null && (\n                    <span className=\"pill\">\n                        <IconRuler className=\"pill-ic\" />\n                        {circuit.lengthMeters.toFixed(1)} m\n                    </span>\n                )}\n                {circuit.widthMeters != null && (\n                    <span className=\"pill\">\n                        <IconWidth className=\"pill-ic\" />\n                        {circuit.widthMeters} m\n                    </span>\n                )}\n            </footer>\n        </article>\n    );\n}\n\n/* ===== Pagina ===== */\nexport default function CircuitsPage({ apiBase }) {\n    const [list, setList] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    const [query, setQuery] = useState('');\n    const [sort, setSort] = useState('date_desc');\n    const [openId, setOpenId] = useState(null);\n    const [detail, setDetail] = useState(null);\n    const [detailLoading, setDetailLoading] = useState(false);\n    const [detailError, setDetailError] = useState('');\n    const [editMode, setEditMode] = useState(false);\n    const [sectors, setSectors] = useState([]);\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        setLoading(true);\n        setError('');\n        fetch(`${apiBase}/api/circuits`)\n            .then(r => (r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))))\n            .then(json => setList(json || []))\n            .catch(e => setError(e.message || 'Errore caricamento circuiti'))\n            .finally(() => setLoading(false));\n    }, [apiBase]);\n\n    const filtered = useMemo(() => {\n        const q = query.trim().toLowerCase();\n        let arr = list.filter(c =>\n            !q ||\n            `${c.name ?? ''}`.toLowerCase().includes(q) ||\n            `${c.id ?? ''}`.toLowerCase().includes(q)\n        );\n        switch (sort) {\n            case 'name_asc':\n                arr = arr.sort((a, b) => (a.name || '').localeCompare(b.name || ''));\n                break;\n            case 'len_desc':\n                arr = arr.sort((a, b) => (b.lengthMeters || 0) - (a.lengthMeters || 0));\n                break;\n            case 'date_asc':\n                arr = arr.sort((a, b) => new Date(a.createdAt || 0) - new Date(b.createdAt || 0));\n                break;\n            default:\n                arr = arr.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n        }\n        return arr;\n    }, [list, query, sort]);\n\n    const openDetail = (id) => {\n        setOpenId(id);\n        setDetail(null);\n        setDetailError('');\n        setDetailLoading(true);\n        setEditMode(false);\n        setSectors([]);\n        fetch(`${apiBase}/api/circuits/${encodeURIComponent(id)}`)\n            .then(r => (r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))))\n            .then(j => {\n                setDetail(j);\n                setSectors(j.customSectors || []);\n            })\n            .catch(e => setDetailError(e.message || 'Errore caricamento circuito'))\n            .finally(() => setDetailLoading(false));\n    };\n\n    const saveChanges = async () => {\n        if (!detail) return;\n        setSaving(true);\n        try {\n            const updatedCircuit = {\n                ...detail,\n                customSectors: sectors,\n            };\n            const res = await fetch(`${apiBase}/api/circuits/${encodeURIComponent(detail.id)}`, {\n                method: 'PUT',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(updatedCircuit)\n            });\n            if (!res.ok) throw new Error(`HTTP ${res.status}`);\n            setEditMode(false);\n            alert('Modifiche salvate con successo!');\n        } catch (e) {\n            alert('Errore durante il salvataggio: ' + e.message);\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const points = detail ? (\n        Array.isArray(detail.sectors) && detail.sectors.length\n            ? detail.sectors.map(s => ({ lat: s.lat, lon: s.lon }))\n            : detail.pathPoints || []\n    ) : [];\n\n    return (\n        <div className=\"circuits-page\">\n            <div className=\"bg-grid\" aria-hidden=\"true\" />\n            <div className=\"bg-glow bg-glow-1\" aria-hidden=\"true\" />\n            <div className=\"bg-glow bg-glow-2\" aria-hidden=\"true\" />\n            <main className=\"main small-top\">\n                <div className=\"circuits-header\">\n                    <h2 className=\"section-title\">Circuiti</h2>\n                    <div className=\"cr-toolbar\">\n                        <div className=\"cr-search\">\n                            <span className=\"cr-search-ic\" aria-hidden=\"true\" style={{ color: 'white' }}><IconSearch /></span>\n                            <input\n                                className=\"cr-input\"\n                                type=\"text\"\n                                placeholder=\"Cerca per nome o ID\"\n                                value={query}\n                                onChange={e => setQuery(e.target.value)}\n                            />\n                        </div>\n                        <div className=\"cr-sort\">\n                            <label className=\"muted\" htmlFor=\"sort\">Ordina</label>\n                            <select id=\"sort\" className=\"cr-input\" value={sort} onChange={e => setSort(e.target.value)}>\n                                <option value=\"date_desc\">Pi recenti</option>\n                                <option value=\"date_asc\">Pi vecchi</option>\n                                <option value=\"name_asc\">Nome (AZ)</option>\n                                <option value=\"len_desc\">Lunghezza ()</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                {loading && (\n                    <div className=\"cr-grid\">\n                        {Array.from({ length: 6 }).map((_, i) => (\n                            <div className=\"cr-card cr-skel\" key={i}>\n                                <div className=\"cr-mini\" />\n                                <div className=\"cr-skel-line\" />\n                                <div className=\"cr-skel-line short\" />\n                            </div>\n                        ))}\n                    </div>\n                )}\n                {error && <p className=\"muted\">Errore: {error}</p>}\n                {!loading && !error && (\n                    filtered.length === 0 ? (\n                        <div className=\"cr-empty\">\n                            <div className=\"cr-empty-emoji\"></div>\n                            <div className=\"cr-empty-title\">Nessun circuito</div>\n                            <div className=\"muted\">Prova a rimuovere il filtro o aggiungere un nuovo tracciato.</div>\n                        </div>\n                    ) : (\n                        <div className=\"cr-grid\">\n                            {filtered.map(c => (\n                                <CircuitCard\n                                    key={c.id}\n                                    apiBase={apiBase}\n                                    circuit={c}\n                                    onOpenDetail={openDetail}\n                                />\n                            ))}\n                        </div>\n                    )\n                )}\n            </main>\n\n            {/* MODALE DETTAGLIO */}\n            <Modal open={!!openId} onClose={() => setOpenId(null)}>\n                {detailLoading && <p className=\"muted\" style={{ padding: '8px 0' }}>Caricamento circuito</p>}\n                {detailError && <p className=\"muted\" style={{ padding: '8px 0' }}>Errore: {detailError}</p>}\n                {detail && (\n                    <div>\n                        <div className=\"ed-toolbar\">\n                            <h3 className=\"cr-dialog-title\">{detail.name}</h3>\n                            <div className=\"ed-actions\">\n                                {!editMode ? (\n                                    <button className=\"btn-primary\" onClick={() => setEditMode(true)}>\n                                        <IconEdit size={16} style={{ marginRight: '6px' }} />\n                                        Modifica\n                                    </button>\n                                ) : (\n                                    <>\n                                        <button className=\"btn-ghost\" onClick={() => {\n                                            setEditMode(false);\n                                            setSectors(detail.customSectors || []);\n                                            setKerbs(detail.customKerbs || []);\n                                        }}>\n                                            Annulla\n                                        </button>\n                                        <button className=\"btn-primary\" onClick={saveChanges} disabled={saving}>\n                                            <IconSave size={16} style={{ marginRight: '6px' }} />\n                                            {saving ? 'Salvataggio...' : 'Salva'}\n                                        </button>\n                                    </>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"cr-body\">\n                            <div className=\"cr-block\">\n                                <TrackCanvas\n                                    points={points}\n                                    sectors={sectors}\n                                />\n                            </div>\n                            <div className=\"cr-block\">\n                                <h2 className=\"cr-block-title\">{detail.name}</h2>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Creato</span><span className=\"cr-val\">{detail.createdAt ? new Date(detail.createdAt).toLocaleString() : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Punti</span><span className=\"cr-val\">{detail.meta?.points ?? detail.pathPoints?.length ?? '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Lunghezza</span><span className=\"cr-val\">{detail.stats?.lengthMeters ? `${detail.stats.lengthMeters.toFixed(1)} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Larghezza</span><span className=\"cr-val\">{detail.params?.widthMeters ? `${detail.params.widthMeters} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Spacing</span><span className=\"cr-val\">{detail.params?.spacingMeters ? `${detail.params.spacingMeters} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">minQual</span><span className=\"cr-val\">{detail.params?.minQual ?? '-'}</span></div>\n                            </div>\n                        </div>\n\n                        {editMode && (\n                            <div className=\"ed-panel\">\n                                <SectorEditor\n                                    totalPoints={points.length}\n                                    sectors={sectors}\n                                    onChange={setSectors}\n                                />\n                                <KerbEditor\n                                    totalPoints={points.length}\n                                    kerbs={kerbs}\n                                    onChange={setKerbs}\n                                />\n                            </div>\n                        )}\n                    </div>\n                )}\n            </Modal>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}