{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/racesense/racesense-frontend/src/pages/Circuits.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React from 'react';\n\n/* ===== Helpers di proiezione e fit su canvas ===== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction projectLatLonToXY(points) {\n  if (!points || points.length === 0) return [];\n  const lat0 = points.reduce((s, p) => s + p.lat, 0) / points.length;\n  const lon0 = points.reduce((s, p) => s + p.lon, 0) / points.length;\n  const mPerDegLat = 111132;\n  const mPerDegLon = 111320 * Math.cos(lat0 * Math.PI / 180);\n  return points.map(p => ({\n    x: (p.lon - lon0) * mPerDegLon,\n    y: (p.lat - lat0) * mPerDegLat * -1\n  }));\n}\nfunction fitToCanvas(localXY, width, height, padding = 20) {\n  if (!localXY.length) return [];\n  const xs = localXY.map(p => p.x),\n    ys = localXY.map(p => p.y);\n  const minX = Math.min(...xs),\n    maxX = Math.max(...xs);\n  const minY = Math.min(...ys),\n    maxY = Math.max(...ys);\n  const spanX = maxX - minX || 1,\n    spanY = maxY - minY || 1;\n  const scale = Math.min((width - 2 * padding) / spanX, (height - 2 * padding) / spanY);\n  const offX = padding - minX * scale + (width - 2 * padding - spanX * scale) / 2;\n  const offY = padding - minY * scale + (height - 2 * padding - spanY * scale) / 2;\n  return localXY.map(p => ({\n    X: p.x * scale + offX,\n    Y: p.y * scale + offY\n  }));\n}\n\n/* ===== Canvas preview per le card ===== */\nfunction MiniTrack({\n  points,\n  className = ''\n}) {\n  _s();\n  const ref = React.useRef(null);\n  React.useEffect(() => {\n    const canvas = ref.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const W = canvas.width,\n      H = canvas.height;\n    ctx.clearRect(0, 0, W, H);\n\n    // bg glass\n    ctx.fillStyle = 'rgba(255,255,255,0.03)';\n    ctx.fillRect(0, 0, W, H);\n    if (!points || points.length < 2) {\n      // segnaposto leggero\n      ctx.setLineDash([8, 8]);\n      ctx.strokeStyle = 'rgba(255,255,255,0.20)';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(14, 14, W - 28, H - 28);\n      ctx.setLineDash([]);\n      return;\n    }\n    const local = projectLatLonToXY(points);\n    const fitted = fitToCanvas(local, W, H, 14);\n\n    // pista\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(192,255,3,0.9)';\n    ctx.lineWidth = 2.5;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.shadowColor = 'rgba(192,255,3,0.35)';\n    ctx.shadowBlur = 6;\n    ctx.stroke();\n    ctx.shadowBlur = 0;\n\n    // start\n    const s = fitted[0];\n    ctx.fillStyle = '#0a0a0a';\n    ctx.strokeStyle = 'rgba(255,255,255,0.85)';\n    ctx.lineWidth = 1.5;\n    ctx.beginPath();\n    ctx.arc(s.X, s.Y, 4, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.stroke();\n  }, [points]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: ref,\n    width: 320,\n    height: 150,\n    className: `cr-mini ${className}`,\n    \"aria-hidden\": \"true\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Canvas grande per il dettaglio ===== */\n_s(MiniTrack, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = MiniTrack;\nfunction TrackCanvas({\n  points,\n  width = 760,\n  height = 420\n}) {\n  _s2();\n  const ref = React.useRef(null);\n  React.useEffect(() => {\n    const canvas = ref.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // bordo soft\n    ctx.fillStyle = 'rgba(255,255,255,0.02)';\n    ctx.strokeStyle = 'rgba(192,255,3,0.18)';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);\n    if (!points || points.length < 2) return;\n    const local = projectLatLonToXY(points);\n    const fitted = fitToCanvas(local, canvas.width, canvas.height, 24);\n\n    // asfalto\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(80,84,90,0.95)';\n    ctx.lineWidth = 10;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.stroke();\n\n    // bordo\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(255,255,255,0.12)';\n    ctx.lineWidth = 12;\n    ctx.stroke();\n\n    // linea start\n    const s0 = fitted[0],\n      s1 = fitted[1] || fitted[0];\n    const ang = Math.atan2(s1.Y - s0.Y, s1.X - s0.X);\n    ctx.save();\n    ctx.translate(s0.X, s0.Y);\n    ctx.rotate(ang);\n    ctx.strokeStyle = '#fff';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(0, -10);\n    ctx.lineTo(0, 10);\n    ctx.stroke();\n    ctx.restore();\n  }, [points]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: ref,\n    width: width,\n    height: height,\n    className: \"cr-canvas\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 12\n  }, this);\n}\n\n/* ===== Modal ===== */\n_s2(TrackCanvas, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c2 = TrackCanvas;\nfunction Modal({\n  open,\n  onClose,\n  children\n}) {\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cr-modal\",\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cr-backdrop\",\n      onClick: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cr-dialog\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cr-close\",\n        onClick: onClose,\n        \"aria-label\": \"Chiudi\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Card singola con lazy-preview ===== */\n_c3 = Modal;\nfunction CircuitCard({\n  apiBase,\n  circuit,\n  onOpenDetail\n}) {\n  _s3();\n  var _ref, _circuit$points, _circuit$meta;\n  const [previewPts, setPreviewPts] = React.useState(null);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const cardRef = React.useRef(null);\n  React.useEffect(() => {\n    const el = cardRef.current;\n    if (!el) return;\n    let aborted = false;\n    const controller = new AbortController();\n    const io = new IntersectionObserver(entries => {\n      var _entries$;\n      const v = (_entries$ = entries[0]) === null || _entries$ === void 0 ? void 0 : _entries$.isIntersecting;\n      if (!v) return;\n      io.disconnect();\n      // carico il dettaglio solo quando la card √® a schermo\n      setIsLoading(true);\n      fetch(`${apiBase}/api/circuits/${encodeURIComponent(circuit.id)}`, {\n        signal: controller.signal\n      }).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(j => {\n        if (aborted) return;\n        // preferisci sectors, altrimenti pathPoints\n        const pts = Array.isArray(j.sectors) && j.sectors.length ? j.sectors.map(s => ({\n          lat: s.lat,\n          lon: s.lon\n        })) : Array.isArray(j.pathPoints) ? j.pathPoints : null;\n        setPreviewPts(pts);\n      }).catch(() => {/* placeholder se fallisce */}).finally(() => !aborted && setIsLoading(false));\n    }, {\n      rootMargin: '120px'\n    });\n    io.observe(el);\n    return () => {\n      aborted = true;\n      controller.abort();\n      io.disconnect();\n    };\n  }, [apiBase, circuit.id]);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    ref: cardRef,\n    className: \"cr-card\",\n    role: \"button\",\n    tabIndex: 0,\n    onClick: () => onOpenDetail(circuit.id),\n    onKeyDown: e => e.key === 'Enter' && onOpenDetail(circuit.id),\n    children: [/*#__PURE__*/_jsxDEV(MiniTrack, {\n      points: previewPts || [],\n      className: isLoading ? 'loading' : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"cr-card-head\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"cr-title\",\n        children: circuit.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-sub muted\",\n        children: circuit.createdAt ? new Date(circuit.createdAt).toLocaleDateString() : 'data sconosciuta'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"cr-meta\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [\"\\uD83C\\uDFC1 \", (_ref = (_circuit$points = circuit.points) !== null && _circuit$points !== void 0 ? _circuit$points : (_circuit$meta = circuit.meta) === null || _circuit$meta === void 0 ? void 0 : _circuit$meta.points) !== null && _ref !== void 0 ? _ref : '?', \" punti\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this), circuit.lengthMeters != null && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [\"\\uD83D\\uDCCF \", circuit.lengthMeters.toFixed(1), \" m\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 50\n      }, this), circuit.widthMeters != null && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [\"\\u2194\\uFE0E \", circuit.widthMeters, \" m\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 49\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill ghost\",\n        title: circuit.id,\n        children: [\"ID: \", circuit.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Pagina ===== */\n_s3(CircuitCard, \"q2+MmCmcf7SNW5W34DO8BiBUPLA=\");\n_c4 = CircuitCard;\nexport default function CircuitsPage({\n  apiBase\n}) {\n  _s4();\n  var _detail$stats, _detail$params, _ref2, _detail$meta$points, _detail$meta, _detail$pathPoints, _ref3, _detail$meta$points2, _detail$meta2, _detail$pathPoints2, _detail$stats2, _detail$params2, _detail$params3, _detail$params$minQua, _detail$params4;\n  const [list, setList] = React.useState([]);\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState('');\n\n  // UI\n  const [query, setQuery] = React.useState('');\n  const [sort, setSort] = React.useState('date_desc');\n\n  // Detail\n  const [openId, setOpenId] = React.useState(null);\n  const [detail, setDetail] = React.useState(null);\n  const [detailLoading, setDetailLoading] = React.useState(false);\n  const [detailError, setDetailError] = React.useState('');\n  React.useEffect(() => {\n    setLoading(true);\n    setError('');\n    fetch(`${apiBase}/api/circuits`).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(json => setList(json || [])).catch(e => setError(e.message || 'Errore caricamento circuiti')).finally(() => setLoading(false));\n  }, [apiBase]);\n  const filtered = React.useMemo(() => {\n    const q = query.trim().toLowerCase();\n    let arr = list.filter(c => {\n      var _c$name, _c$id;\n      return !q || `${(_c$name = c.name) !== null && _c$name !== void 0 ? _c$name : ''}`.toLowerCase().includes(q) || `${(_c$id = c.id) !== null && _c$id !== void 0 ? _c$id : ''}`.toLowerCase().includes(q);\n    });\n    switch (sort) {\n      case 'name_asc':\n        arr = arr.sort((a, b) => (a.name || '').localeCompare(b.name || ''));\n        break;\n      case 'len_desc':\n        arr = arr.sort((a, b) => (b.lengthMeters || 0) - (a.lengthMeters || 0));\n        break;\n      case 'date_asc':\n        arr = arr.sort((a, b) => new Date(a.createdAt || 0) - new Date(b.createdAt || 0));\n        break;\n      default:\n        // date_desc\n        arr = arr.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n    }\n    return arr;\n  }, [list, query, sort]);\n  const openDetail = id => {\n    setOpenId(id);\n    setDetail(null);\n    setDetailError('');\n    setDetailLoading(true);\n    fetch(`${apiBase}/api/circuits/${encodeURIComponent(id)}`).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(j => setDetail(j)).catch(e => setDetailError(e.message || 'Errore caricamento circuito')).finally(() => setDetailLoading(false));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"circuits-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-grid\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-glow bg-glow-1\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-glow bg-glow-2\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main small-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"circuits-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Circuiti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-search\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cr-search-ic\",\n              children: \"\\uD83D\\uDD0E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"cr-input\",\n              type: \"text\",\n              placeholder: \"Cerca per nome o ID\\u2026\",\n              value: query,\n              onChange: e => setQuery(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"muted\",\n              htmlFor: \"sort\",\n              children: \"Ordina\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"sort\",\n              className: \"cr-input\",\n              value: sort,\n              onChange: e => setSort(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date_desc\",\n                children: \"Pi\\xF9 recenti\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date_asc\",\n                children: \"Pi\\xF9 vecchi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"name_asc\",\n                children: \"Nome (A\\u2192Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"len_desc\",\n                children: \"Lunghezza (\\u2193)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-grid\",\n        children: Array.from({\n          length: 6\n        }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-card cr-skel\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-mini\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-skel-line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-skel-line short\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 33\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        children: [\"Errore: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 27\n      }, this), !loading && !error && (filtered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-empty\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-empty-emoji\",\n          children: \"\\uD83D\\uDCED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-empty-title\",\n          children: \"Nessun circuito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"Prova a rimuovere il filtro o aggiungere un nuovo tracciato.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-grid\",\n        children: filtered.map(c => /*#__PURE__*/_jsxDEV(CircuitCard, {\n          apiBase: apiBase,\n          circuit: c,\n          onOpenDetail: openDetail\n        }, c.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 33\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!openId,\n      onClose: () => setOpenId(null),\n      children: [detailLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        style: {\n          padding: '8px 0'\n        },\n        children: \"Caricamento circuito\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 35\n      }, this), detailError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        style: {\n          padding: '8px 0'\n        },\n        children: [\"Errore: \", detailError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 33\n      }, this), detail && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-dialog-head\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"cr-dialog-title\",\n            children: detail.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-dialog-tags\",\n            children: [((_detail$stats = detail.stats) === null || _detail$stats === void 0 ? void 0 : _detail$stats.lengthMeters) != null && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"pill\",\n              children: [\"\\uD83D\\uDCCF \", detail.stats.lengthMeters.toFixed(1), \" m\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 72\n            }, this), ((_detail$params = detail.params) === null || _detail$params === void 0 ? void 0 : _detail$params.widthMeters) != null && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"pill\",\n              children: [\"\\u2194\\uFE0E \", detail.params.widthMeters, \" m\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 72\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"pill\",\n              children: [\"\\uD83C\\uDFC1 \", (_ref2 = (_detail$meta$points = (_detail$meta = detail.meta) === null || _detail$meta === void 0 ? void 0 : _detail$meta.points) !== null && _detail$meta$points !== void 0 ? _detail$meta$points : (_detail$pathPoints = detail.pathPoints) === null || _detail$pathPoints === void 0 ? void 0 : _detail$pathPoints.length) !== null && _ref2 !== void 0 ? _ref2 : '-']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-block\",\n            children: /*#__PURE__*/_jsxDEV(TrackCanvas, {\n              points: Array.isArray(detail.sectors) && detail.sectors.length ? detail.sectors.map(s => ({\n                lat: s.lat,\n                lon: s.lon\n              })) : detail.pathPoints || []\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-block\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"cr-block-title\",\n              children: \"Dati\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                title: detail.id,\n                children: detail.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 91\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Creato\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: detail.createdAt ? new Date(detail.createdAt).toLocaleString() : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 95\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Punti\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_ref3 = (_detail$meta$points2 = (_detail$meta2 = detail.meta) === null || _detail$meta2 === void 0 ? void 0 : _detail$meta2.points) !== null && _detail$meta$points2 !== void 0 ? _detail$meta$points2 : (_detail$pathPoints2 = detail.pathPoints) === null || _detail$pathPoints2 === void 0 ? void 0 : _detail$pathPoints2.length) !== null && _ref3 !== void 0 ? _ref3 : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 94\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Lunghezza\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$stats2 = detail.stats) !== null && _detail$stats2 !== void 0 && _detail$stats2.lengthMeters ? `${detail.stats.lengthMeters.toFixed(1)} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 98\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Larghezza\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params2 = detail.params) !== null && _detail$params2 !== void 0 && _detail$params2.widthMeters ? `${detail.params.widthMeters} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 98\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Spacing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params3 = detail.params) !== null && _detail$params3 !== void 0 && _detail$params3.spacingMeters ? `${detail.params.spacingMeters} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 96\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"minQual\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params$minQua = (_detail$params4 = detail.params) === null || _detail$params4 === void 0 ? void 0 : _detail$params4.minQual) !== null && _detail$params$minQua !== void 0 ? _detail$params$minQua : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 96\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 9\n  }, this);\n}\n_s4(CircuitsPage, \"vaIm7Cq5SBV0pL9h0iKrBJb0v+0=\");\n_c5 = CircuitsPage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"MiniTrack\");\n$RefreshReg$(_c2, \"TrackCanvas\");\n$RefreshReg$(_c3, \"Modal\");\n$RefreshReg$(_c4, \"CircuitCard\");\n$RefreshReg$(_c5, \"CircuitsPage\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","projectLatLonToXY","points","length","lat0","reduce","s","p","lat","lon0","lon","mPerDegLat","mPerDegLon","Math","cos","PI","map","x","y","fitToCanvas","localXY","width","height","padding","xs","ys","minX","min","maxX","max","minY","maxY","spanX","spanY","scale","offX","offY","X","Y","MiniTrack","className","_s","ref","useRef","useEffect","canvas","current","ctx","getContext","W","H","clearRect","fillStyle","fillRect","setLineDash","strokeStyle","lineWidth","strokeRect","local","fitted","beginPath","forEach","i","lineTo","moveTo","lineCap","lineJoin","shadowColor","shadowBlur","stroke","arc","fill","fileName","_jsxFileName","lineNumber","columnNumber","_c","TrackCanvas","_s2","s0","s1","ang","atan2","save","translate","rotate","restore","_c2","Modal","open","onClose","children","role","onClick","_c3","CircuitCard","apiBase","circuit","onOpenDetail","_s3","_ref","_circuit$points","_circuit$meta","previewPts","setPreviewPts","useState","isLoading","setIsLoading","cardRef","el","aborted","controller","AbortController","io","IntersectionObserver","entries","_entries$","v","isIntersecting","disconnect","fetch","encodeURIComponent","id","signal","then","r","ok","json","Promise","reject","Error","status","j","pts","Array","isArray","sectors","pathPoints","catch","finally","rootMargin","observe","abort","tabIndex","onKeyDown","e","key","name","createdAt","Date","toLocaleDateString","meta","lengthMeters","toFixed","widthMeters","title","_c4","CircuitsPage","_s4","_detail$stats","_detail$params","_ref2","_detail$meta$points","_detail$meta","_detail$pathPoints","_ref3","_detail$meta$points2","_detail$meta2","_detail$pathPoints2","_detail$stats2","_detail$params2","_detail$params3","_detail$params$minQua","_detail$params4","list","setList","loading","setLoading","error","setError","query","setQuery","sort","setSort","openId","setOpenId","detail","setDetail","detailLoading","setDetailLoading","detailError","setDetailError","message","filtered","useMemo","q","trim","toLowerCase","arr","filter","c","_c$name","_c$id","includes","a","b","localeCompare","openDetail","type","placeholder","value","onChange","target","htmlFor","from","_","style","stats","params","toLocaleString","spacingMeters","minQual","_c5","$RefreshReg$"],"sources":["/home/ubuntu/racesense/racesense-frontend/src/pages/Circuits.jsx"],"sourcesContent":["import React from 'react';\n\n/* ===== Helpers di proiezione e fit su canvas ===== */\nfunction projectLatLonToXY(points) {\n    if (!points || points.length === 0) return [];\n    const lat0 = points.reduce((s, p) => s + p.lat, 0) / points.length;\n    const lon0 = points.reduce((s, p) => s + p.lon, 0) / points.length;\n    const mPerDegLat = 111_132;\n    const mPerDegLon = 111_320 * Math.cos((lat0 * Math.PI) / 180);\n    return points.map(p => ({\n        x: (p.lon - lon0) * mPerDegLon,\n        y: (p.lat - lat0) * mPerDegLat * -1,\n    }));\n}\nfunction fitToCanvas(localXY, width, height, padding = 20) {\n    if (!localXY.length) return [];\n    const xs = localXY.map(p => p.x), ys = localXY.map(p => p.y);\n    const minX = Math.min(...xs), maxX = Math.max(...xs);\n    const minY = Math.min(...ys), maxY = Math.max(...ys);\n    const spanX = (maxX - minX) || 1, spanY = (maxY - minY) || 1;\n    const scale = Math.min((width - 2 * padding) / spanX, (height - 2 * padding) / spanY);\n    const offX = padding - minX * scale + (width - 2 * padding - spanX * scale) / 2;\n    const offY = padding - minY * scale + (height - 2 * padding - spanY * scale) / 2;\n    return localXY.map(p => ({ X: p.x * scale + offX, Y: p.y * scale + offY }));\n}\n\n/* ===== Canvas preview per le card ===== */\nfunction MiniTrack({ points, className = '' }) {\n    const ref = React.useRef(null);\n\n    React.useEffect(() => {\n        const canvas = ref.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        const W = canvas.width, H = canvas.height;\n        ctx.clearRect(0, 0, W, H);\n\n        // bg glass\n        ctx.fillStyle = 'rgba(255,255,255,0.03)';\n        ctx.fillRect(0, 0, W, H);\n\n        if (!points || points.length < 2) {\n            // segnaposto leggero\n            ctx.setLineDash([8, 8]);\n            ctx.strokeStyle = 'rgba(255,255,255,0.20)';\n            ctx.lineWidth = 2;\n            ctx.strokeRect(14, 14, W - 28, H - 28);\n            ctx.setLineDash([]);\n            return;\n        }\n\n        const local = projectLatLonToXY(points);\n        const fitted = fitToCanvas(local, W, H, 14);\n\n        // pista\n        ctx.beginPath();\n        fitted.forEach((p, i) => (i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y)));\n        ctx.strokeStyle = 'rgba(192,255,3,0.9)';\n        ctx.lineWidth = 2.5;\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.shadowColor = 'rgba(192,255,3,0.35)';\n        ctx.shadowBlur = 6;\n        ctx.stroke();\n        ctx.shadowBlur = 0;\n\n        // start\n        const s = fitted[0];\n        ctx.fillStyle = '#0a0a0a';\n        ctx.strokeStyle = 'rgba(255,255,255,0.85)';\n        ctx.lineWidth = 1.5;\n        ctx.beginPath();\n        ctx.arc(s.X, s.Y, 4, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.stroke();\n    }, [points]);\n\n    return (\n        <canvas\n            ref={ref}\n            width={320}\n            height={150}\n            className={`cr-mini ${className}`}\n            aria-hidden=\"true\"\n        />\n    );\n}\n\n/* ===== Canvas grande per il dettaglio ===== */\nfunction TrackCanvas({ points, width = 760, height = 420 }) {\n    const ref = React.useRef(null);\n    React.useEffect(() => {\n        const canvas = ref.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        // bordo soft\n        ctx.fillStyle = 'rgba(255,255,255,0.02)';\n        ctx.strokeStyle = 'rgba(192,255,3,0.18)';\n        ctx.lineWidth = 1;\n        ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);\n\n        if (!points || points.length < 2) return;\n\n        const local = projectLatLonToXY(points);\n        const fitted = fitToCanvas(local, canvas.width, canvas.height, 24);\n\n        // asfalto\n        ctx.beginPath();\n        fitted.forEach((p, i) => (i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y)));\n        ctx.strokeStyle = 'rgba(80,84,90,0.95)';\n        ctx.lineWidth = 10;\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.stroke();\n\n        // bordo\n        ctx.beginPath();\n        fitted.forEach((p, i) => (i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y)));\n        ctx.strokeStyle = 'rgba(255,255,255,0.12)';\n        ctx.lineWidth = 12;\n        ctx.stroke();\n\n        // linea start\n        const s0 = fitted[0], s1 = fitted[1] || fitted[0];\n        const ang = Math.atan2(s1.Y - s0.Y, s1.X - s0.X);\n        ctx.save();\n        ctx.translate(s0.X, s0.Y);\n        ctx.rotate(ang);\n        ctx.strokeStyle = '#fff';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(0, -10);\n        ctx.lineTo(0, 10);\n        ctx.stroke();\n        ctx.restore();\n    }, [points]);\n\n    return <canvas ref={ref} width={width} height={height} className=\"cr-canvas\" />;\n}\n\n/* ===== Modal ===== */\nfunction Modal({ open, onClose, children }) {\n    if (!open) return null;\n    return (\n        <div className=\"cr-modal\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"cr-backdrop\" onClick={onClose} />\n            <div className=\"cr-dialog\">\n                <button className=\"cr-close\" onClick={onClose} aria-label=\"Chiudi\">√ó</button>\n                {children}\n            </div>\n        </div>\n    );\n}\n\n/* ===== Card singola con lazy-preview ===== */\nfunction CircuitCard({ apiBase, circuit, onOpenDetail }) {\n    const [previewPts, setPreviewPts] = React.useState(null);\n    const [isLoading, setIsLoading] = React.useState(false);\n    const cardRef = React.useRef(null);\n\n    React.useEffect(() => {\n        const el = cardRef.current;\n        if (!el) return;\n\n        let aborted = false;\n        const controller = new AbortController();\n\n        const io = new IntersectionObserver((entries) => {\n            const v = entries[0]?.isIntersecting;\n            if (!v) return;\n            io.disconnect();\n            // carico il dettaglio solo quando la card √® a schermo\n            setIsLoading(true);\n            fetch(`${apiBase}/api/circuits/${encodeURIComponent(circuit.id)}`, { signal: controller.signal })\n                .then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`)))\n                .then(j => {\n                    if (aborted) return;\n                    // preferisci sectors, altrimenti pathPoints\n                    const pts = (Array.isArray(j.sectors) && j.sectors.length\n                        ? j.sectors.map(s => ({ lat: s.lat, lon: s.lon }))\n                        : Array.isArray(j.pathPoints) ? j.pathPoints : null);\n                    setPreviewPts(pts);\n                })\n                .catch(() => { /* placeholder se fallisce */ })\n                .finally(() => !aborted && setIsLoading(false));\n        }, { rootMargin: '120px' });\n\n        io.observe(el);\n        return () => { aborted = true; controller.abort(); io.disconnect(); };\n    }, [apiBase, circuit.id]);\n\n    return (\n        <article\n            ref={cardRef}\n            className=\"cr-card\"\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => onOpenDetail(circuit.id)}\n            onKeyDown={(e) => e.key === 'Enter' && onOpenDetail(circuit.id)}\n        >\n            <MiniTrack points={previewPts || []} className={isLoading ? 'loading' : ''} />\n\n            <header className=\"cr-card-head\">\n                <h3 className=\"cr-title\">{circuit.name}</h3>\n                <div className=\"cr-sub muted\">\n                    {circuit.createdAt ? new Date(circuit.createdAt).toLocaleDateString() : 'data sconosciuta'}\n                </div>\n            </header>\n\n            <footer className=\"cr-meta\">\n                <span className=\"pill\">üèÅ {circuit.points ?? circuit.meta?.points ?? '?'} punti</span>\n                {circuit.lengthMeters != null && <span className=\"pill\">üìè {circuit.lengthMeters.toFixed(1)} m</span>}\n                {circuit.widthMeters != null && <span className=\"pill\">‚ÜîÔ∏é {circuit.widthMeters} m</span>}\n                <span className=\"pill ghost\" title={circuit.id}>ID: {circuit.id}</span>\n            </footer>\n        </article>\n    );\n}\n\n/* ===== Pagina ===== */\nexport default function CircuitsPage({ apiBase }) {\n    const [list, setList] = React.useState([]);\n    const [loading, setLoading] = React.useState(true);\n    const [error, setError] = React.useState('');\n\n    // UI\n    const [query, setQuery] = React.useState('');\n    const [sort, setSort] = React.useState('date_desc');\n\n    // Detail\n    const [openId, setOpenId] = React.useState(null);\n    const [detail, setDetail] = React.useState(null);\n    const [detailLoading, setDetailLoading] = React.useState(false);\n    const [detailError, setDetailError] = React.useState('');\n\n    React.useEffect(() => {\n        setLoading(true);\n        setError('');\n        fetch(`${apiBase}/api/circuits`)\n            .then(r => (r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))))\n            .then(json => setList(json || []))\n            .catch(e => setError(e.message || 'Errore caricamento circuiti'))\n            .finally(() => setLoading(false));\n    }, [apiBase]);\n\n    const filtered = React.useMemo(() => {\n        const q = query.trim().toLowerCase();\n        let arr = list.filter(c =>\n            !q ||\n            `${c.name ?? ''}`.toLowerCase().includes(q) ||\n            `${c.id ?? ''}`.toLowerCase().includes(q)\n        );\n        switch (sort) {\n            case 'name_asc':\n                arr = arr.sort((a, b) => (a.name || '').localeCompare(b.name || ''));\n                break;\n            case 'len_desc':\n                arr = arr.sort((a, b) => (b.lengthMeters || 0) - (a.lengthMeters || 0));\n                break;\n            case 'date_asc':\n                arr = arr.sort((a, b) => new Date(a.createdAt || 0) - new Date(b.createdAt || 0));\n                break;\n            default: // date_desc\n                arr = arr.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n        }\n        return arr;\n    }, [list, query, sort]);\n\n    const openDetail = (id) => {\n        setOpenId(id);\n        setDetail(null);\n        setDetailError('');\n        setDetailLoading(true);\n        fetch(`${apiBase}/api/circuits/${encodeURIComponent(id)}`)\n            .then(r => (r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))))\n            .then(j => setDetail(j))\n            .catch(e => setDetailError(e.message || 'Errore caricamento circuito'))\n            .finally(() => setDetailLoading(false));\n    };\n\n    return (\n        <div className=\"circuits-page\">\n            <div className=\"bg-grid\" aria-hidden=\"true\" />\n            <div className=\"bg-glow bg-glow-1\" aria-hidden=\"true\" />\n            <div className=\"bg-glow bg-glow-2\" aria-hidden=\"true\" />\n\n            <main className=\"main small-top\">\n                <div className=\"circuits-header\">\n                    <h2 className=\"section-title\">Circuiti</h2>\n\n                    <div className=\"cr-toolbar\">\n                        <div className=\"cr-search\">\n                            <span className=\"cr-search-ic\">üîé</span>\n                            <input\n                                className=\"cr-input\"\n                                type=\"text\"\n                                placeholder=\"Cerca per nome o ID‚Ä¶\"\n                                value={query}\n                                onChange={e => setQuery(e.target.value)}\n                            />\n                        </div>\n\n                        <div className=\"cr-sort\">\n                            <label className=\"muted\" htmlFor=\"sort\">Ordina</label>\n                            <select id=\"sort\" className=\"cr-input\" value={sort} onChange={e => setSort(e.target.value)}>\n                                <option value=\"date_desc\">Pi√π recenti</option>\n                                <option value=\"date_asc\">Pi√π vecchi</option>\n                                <option value=\"name_asc\">Nome (A‚ÜíZ)</option>\n                                <option value=\"len_desc\">Lunghezza (‚Üì)</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n\n                {loading && (\n                    <div className=\"cr-grid\">\n                        {Array.from({ length: 6 }).map((_, i) => (\n                            <div className=\"cr-card cr-skel\" key={i}>\n                                <div className=\"cr-mini\" />\n                                <div className=\"cr-skel-line\" />\n                                <div className=\"cr-skel-line short\" />\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {error && <p className=\"muted\">Errore: {error}</p>}\n\n                {!loading && !error && (\n                    filtered.length === 0 ? (\n                        <div className=\"cr-empty\">\n                            <div className=\"cr-empty-emoji\">üì≠</div>\n                            <div className=\"cr-empty-title\">Nessun circuito</div>\n                            <div className=\"muted\">Prova a rimuovere il filtro o aggiungere un nuovo tracciato.</div>\n                        </div>\n                    ) : (\n                        <div className=\"cr-grid\">\n                            {filtered.map(c => (\n                                <CircuitCard\n                                    key={c.id}\n                                    apiBase={apiBase}\n                                    circuit={c}\n                                    onOpenDetail={openDetail}\n                                />\n                            ))}\n                        </div>\n                    )\n                )}\n            </main>\n\n            {/* MODALE DETTAGLIO */}\n            <Modal open={!!openId} onClose={() => setOpenId(null)}>\n                {detailLoading && <p className=\"muted\" style={{ padding: '8px 0' }}>Caricamento circuito‚Ä¶</p>}\n                {detailError && <p className=\"muted\" style={{ padding: '8px 0' }}>Errore: {detailError}</p>}\n                {detail && (\n                    <div>\n                        <div className=\"cr-dialog-head\">\n                            <h3 className=\"cr-dialog-title\">{detail.name}</h3>\n                            <div className=\"cr-dialog-tags\">\n                                {detail.stats?.lengthMeters != null && <span className=\"pill\">üìè {detail.stats.lengthMeters.toFixed(1)} m</span>}\n                                {detail.params?.widthMeters != null && <span className=\"pill\">‚ÜîÔ∏é {detail.params.widthMeters} m</span>}\n                                <span className=\"pill\">üèÅ {detail.meta?.points ?? detail.pathPoints?.length ?? '-'}</span>\n                            </div>\n                        </div>\n\n                        <div className=\"cr-body\">\n                            <div className=\"cr-block\">\n                                <TrackCanvas\n                                    points={\n                                        (Array.isArray(detail.sectors) && detail.sectors.length\n                                            ? detail.sectors.map(s => ({ lat: s.lat, lon: s.lon }))\n                                            : detail.pathPoints || [])\n                                    }\n                                />\n                            </div>\n\n                            <div className=\"cr-block\">\n                                <h4 className=\"cr-block-title\">Dati</h4>\n                                <div className=\"cr-row\"><span className=\"cr-key\">ID</span><span className=\"cr-val\" title={detail.id}>{detail.id}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Creato</span><span className=\"cr-val\">{detail.createdAt ? new Date(detail.createdAt).toLocaleString() : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Punti</span><span className=\"cr-val\">{detail.meta?.points ?? detail.pathPoints?.length ?? '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Lunghezza</span><span className=\"cr-val\">{detail.stats?.lengthMeters ? `${detail.stats.lengthMeters.toFixed(1)} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Larghezza</span><span className=\"cr-val\">{detail.params?.widthMeters ? `${detail.params.widthMeters} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Spacing</span><span className=\"cr-val\">{detail.params?.spacingMeters ? `${detail.params.spacingMeters} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">minQual</span><span className=\"cr-val\">{detail.params?.minQual ?? '-'}</span></div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </Modal>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}