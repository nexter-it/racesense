{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/racesense/racesense-frontend/src/pages/Circuits.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\nimport React from 'react';\n\n/* ============ ICONS (inline SVG, no deps) ============ */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Svg = ({\n  children,\n  size = 16,\n  className = '',\n  stroke = 'currentColor',\n  strokeWidth = 2,\n  ...rest\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: size,\n  height: size,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: stroke,\n  strokeWidth: strokeWidth,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  \"aria-hidden\": \"true\",\n  ...rest,\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 5,\n  columnNumber: 5\n}, this);\n_c = Svg;\nconst IconFlag = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 3v18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 38\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 4s3-1 6 1 6 0 6 0v9s-3 1-6-1-6 0-6 0V4z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 58\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 11,\n  columnNumber: 26\n}, this);\n_c2 = IconFlag;\nconst IconRuler = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n    x: \"3\",\n    y: \"6\",\n    width: \"18\",\n    height: \"12\",\n    rx: \"2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 39\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7 10h2M11 10h2M15 10h2M7 14h1M11 14h1M15 14h1\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 89\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 12,\n  columnNumber: 27\n}, this);\n_c3 = IconRuler;\nconst IconWidth = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M3 12h18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 39\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7 8l-4 4 4 4M17 8l4 4-4 4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 60\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 13,\n  columnNumber: 27\n}, this);\n_c4 = IconWidth;\nconst IconSearch = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"11\",\n    cy: \"11\",\n    r: \"7\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 40\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m21 21-3.8-3.8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 72\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 28\n}, this);\n_c5 = IconSearch;\nconst IconTrash = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: [/*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"3 6 5 6 21 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 39\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 73\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10 11v6M14 11v6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 131\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 160\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 15,\n  columnNumber: 27\n}, this);\n_c6 = IconTrash;\nconst IconSave = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 38\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M17 21v-8H7v8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 114\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7 3v5h8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 140\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 16,\n  columnNumber: 26\n}, this);\n_c7 = IconSave;\nconst IconCloud = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M17.5 19H7a4 4 0 1 1 1-7.874A5 5 0 0 1 18 9a4 4 0 0 1-.5 10z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 39\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 17,\n  columnNumber: 27\n}, this);\n_c8 = IconCloud;\nconst IconBolt = p => /*#__PURE__*/_jsxDEV(Svg, {\n  ...p,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m13 2-3 7h4l-3 7\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 38\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 19v3\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 67\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 18,\n  columnNumber: 26\n}, this);\n\n/* ===== Helpers ===== */\n_c9 = IconBolt;\nfunction projectLatLonToXY(points) {\n  if (!points || points.length === 0) return [];\n  const lat0 = points.reduce((s, p) => s + p.lat, 0) / points.length;\n  const lon0 = points.reduce((s, p) => s + p.lon, 0) / points.length;\n  const mPerDegLat = 111132;\n  const mPerDegLon = 111320 * Math.cos(lat0 * Math.PI / 180);\n  return points.map(p => ({\n    x: (p.lon - lon0) * mPerDegLon,\n    y: (p.lat - lat0) * mPerDegLat * -1\n  }));\n}\nfunction fitToCanvas(localXY, width, height, padding = 20) {\n  if (!localXY.length) return [];\n  const xs = localXY.map(p => p.x),\n    ys = localXY.map(p => p.y);\n  const minX = Math.min(...xs),\n    maxX = Math.max(...xs);\n  const minY = Math.min(...ys),\n    maxY = Math.max(...ys);\n  const spanX = maxX - minX || 1,\n    spanY = maxY - minY || 1;\n  const scale = Math.min((width - 2 * padding) / spanX, (height - 2 * padding) / spanY);\n  const offX = padding - minX * scale + (width - 2 * padding - spanX * scale) / 2;\n  const offY = padding - minY * scale + (height - 2 * padding - spanY * scale) / 2;\n  return localXY.map(p => ({\n    X: p.x * scale + offX,\n    Y: p.y * scale + offY\n  }));\n}\nconst toRad = d => d * Math.PI / 180;\nfunction haversine(a, b) {\n  const R = 6371000;\n  const dLat = toRad(b.lat - a.lat);\n  const dLon = toRad(b.lon - a.lon);\n  const la1 = toRad(a.lat),\n    la2 = toRad(b.lat);\n  const h = Math.sin(dLat / 2) ** 2 + Math.cos(la1) * Math.cos(la2) * Math.sin(dLon / 2) ** 2;\n  return 2 * R * Math.asin(Math.sqrt(h));\n}\nfunction polylineLengthMeters(pts) {\n  if (!pts || pts.length < 2) return 0;\n  let sum = 0;\n  for (let i = 1; i < pts.length; i++) sum += haversine(pts[i - 1], pts[i]);\n  return sum;\n}\n\n/* ===== Canvas mini preview (lista) ===== */\nfunction MiniTrack({\n  points,\n  className = ''\n}) {\n  _s();\n  const ref = React.useRef(null);\n  React.useEffect(() => {\n    const canvas = ref.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const W = canvas.width,\n      H = canvas.height;\n    ctx.clearRect(0, 0, W, H);\n    ctx.fillStyle = 'rgba(255,255,255,0.03)';\n    ctx.fillRect(0, 0, W, H);\n    if (!points || points.length < 2) {\n      ctx.setLineDash([8, 8]);\n      ctx.strokeStyle = 'rgba(255,255,255,0.20)';\n      ctx.lineWidth = 2;\n      ctx.strokeRect(14, 14, W - 28, H - 28);\n      ctx.setLineDash([]);\n      return;\n    }\n    const local = projectLatLonToXY(points);\n    const fitted = fitToCanvas(local, W, H, 14);\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(192,255,3,0.9)';\n    ctx.lineWidth = 2.5;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.shadowColor = 'rgba(192,255,3,0.35)';\n    ctx.shadowBlur = 6;\n    ctx.stroke();\n    ctx.shadowBlur = 0;\n    const s = fitted[0];\n    ctx.fillStyle = '#0a0a0a';\n    ctx.strokeStyle = 'rgba(255,255,255,0.85)';\n    ctx.lineWidth = 1.5;\n    ctx.beginPath();\n    ctx.arc(s.X, s.Y, 4, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.stroke();\n  }, [points]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: ref,\n    width: 320,\n    height: 150,\n    className: `cr-mini ${className}`,\n    \"aria-hidden\": \"true\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 12\n  }, this);\n}\n\n/* ===== Canvas grande per il dettaglio ===== */\n_s(MiniTrack, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c0 = MiniTrack;\nfunction TrackCanvas({\n  points,\n  width = 760,\n  height = 420\n}) {\n  _s2();\n  const ref = React.useRef(null);\n  React.useEffect(() => {\n    const canvas = ref.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = 'rgba(255,255,255,0.02)';\n    ctx.strokeStyle = 'rgba(192,255,3,0.18)';\n    ctx.lineWidth = 1;\n    ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);\n    if (!points || points.length < 2) return;\n    const local = projectLatLonToXY(points);\n    const fitted = fitToCanvas(local, canvas.width, canvas.height, 24);\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(80,84,90,0.95)';\n    ctx.lineWidth = 10;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n    ctx.stroke();\n    ctx.beginPath();\n    fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n    ctx.strokeStyle = 'rgba(255,255,255,0.12)';\n    ctx.lineWidth = 12;\n    ctx.stroke();\n    const s0 = fitted[0],\n      s1 = fitted[1] || fitted[0];\n    const ang = Math.atan2(s1.Y - s0.Y, s1.X - s0.X);\n    ctx.save();\n    ctx.translate(s0.X, s0.Y);\n    ctx.rotate(ang);\n    ctx.strokeStyle = '#fff';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.moveTo(0, -10);\n    ctx.lineTo(0, 10);\n    ctx.stroke();\n    ctx.restore();\n  }, [points]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: ref,\n    width: width,\n    height: height,\n    className: \"cr-canvas\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 12\n  }, this);\n}\n\n/* ===== Leaflet loader (CDN) + Dark map drawing ===== */\n_s2(TrackCanvas, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c1 = TrackCanvas;\nfunction useLeaflet() {\n  _s3();\n  const [L, setL] = React.useState(null);\n  React.useEffect(() => {\n    let cancelled = false;\n    const ensure = async () => {\n      // CSS\n      if (!document.querySelector('link[data-leaflet]')) {\n        const link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\n        link.setAttribute('data-leaflet', '1');\n        document.head.appendChild(link);\n      }\n      // JS\n      if (window.L) {\n        setL(window.L);\n        return;\n      }\n      const script = document.createElement('script');\n      script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\n      script.async = true;\n      script.onload = () => !cancelled && setL(window.L);\n      document.body.appendChild(script);\n    };\n    ensure();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n  return L;\n}\n_s3(useLeaflet, \"FBoVuW+wAQ9IV5gP76LmtW2jcXg=\");\nfunction DarkMap({\n  points,\n  setPoints,\n  onLengthChange\n}) {\n  _s4();\n  const L = useLeaflet();\n  const mapRef = React.useRef(null);\n  const leafRef = React.useRef(null);\n  const polyRef = React.useRef(null);\n\n  // init map\n  React.useEffect(() => {\n    if (!L || leafRef.current) return;\n    const map = L.map(mapRef.current, {\n      zoomControl: true,\n      attributionControl: false,\n      zoom: 15\n    }).setView([45.4642, 9.19], 13); // default Milano\n    leafRef.current = map;\n\n    // Dark Matter tiles (Carto)\n    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n      maxZoom: 20\n    }).addTo(map);\n\n    // polyline layer\n    polyRef.current = L.polyline([], {\n      color: '#C0FF03',\n      weight: 4,\n      opacity: 0.9\n    }).addTo(map);\n\n    // interactions\n    const onClick = e => {\n      const nxt = [...(points || []), {\n        lat: e.latlng.lat,\n        lon: e.latlng.lng\n      }];\n      setPoints(nxt);\n    };\n    const onDbl = () => {/* no-op: lasciamo solo il click per aggiungere */};\n    map.on('click', onClick);\n    map.on('dblclick', onDbl);\n\n    // hotkeys\n    const onKey = ev => {\n      if (ev.key === 'Backspace' || ev.key === 'Delete') {\n        setPoints(prev => prev.slice(0, -1));\n      }\n      if (ev.key.toLowerCase() === 'c') {\n        setPoints([]);\n      }\n    };\n    window.addEventListener('keydown', onKey);\n    return () => {\n      window.removeEventListener('keydown', onKey);\n      map.remove();\n      leafRef.current = null;\n    };\n  }, [L]); // eslint-disable-line\n\n  // update poly + length\n  React.useEffect(() => {\n    if (!leafRef.current || !polyRef.current) return;\n    const latlngs = (points || []).map(p => [p.lat, p.lon]);\n    polyRef.current.setLatLngs(latlngs);\n    if (latlngs.length) {\n      leafRef.current.fitBounds(polyRef.current.getBounds().pad(0.2), {\n        animate: false\n      });\n    }\n    onLengthChange === null || onLengthChange === void 0 ? void 0 : onLengthChange(polylineLengthMeters(points || []));\n  }, [points, onLengthChange]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-box\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"map-viewport\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-hint muted\",\n      children: [\"Tocca/click per aggiungere punti \\u2014 \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n        children: \"\\u232B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 52\n      }, this), \" per annulla, \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n        children: \"C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 78\n      }, this), \" per svuota\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Modal ===== */\n_s4(DarkMap, \"D+FiJSD+hus2Op8ocb+0P3fVMyQ=\", false, function () {\n  return [useLeaflet];\n});\n_c10 = DarkMap;\nfunction Modal({\n  open,\n  onClose,\n  children\n}) {\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cr-modal\",\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cr-backdrop\",\n      onClick: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cr-dialog\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cr-close\",\n        onClick: onClose,\n        \"aria-label\": \"Chiudi\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Card lista ===== */\n_c11 = Modal;\nfunction CircuitCard({\n  apiBase,\n  circuit,\n  onOpenDetail\n}) {\n  _s5();\n  var _ref, _circuit$points, _circuit$meta;\n  const [previewPts, setPreviewPts] = React.useState(null);\n  const [isLoading, setIsLoading] = React.useState(false);\n  const cardRef = React.useRef(null);\n  React.useEffect(() => {\n    const el = cardRef.current;\n    if (!el) return;\n    let aborted = false;\n    const controller = new AbortController();\n    const io = new IntersectionObserver(entries => {\n      var _entries$;\n      if (!((_entries$ = entries[0]) !== null && _entries$ !== void 0 && _entries$.isIntersecting)) return;\n      io.disconnect();\n      setIsLoading(true);\n      fetch(`${apiBase}/api/circuits/${encodeURIComponent(circuit.id)}`, {\n        signal: controller.signal\n      }).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(j => {\n        if (aborted) return;\n        const pts = Array.isArray(j.sectors) && j.sectors.length ? j.sectors.map(s => ({\n          lat: s.lat,\n          lon: s.lon\n        })) : Array.isArray(j.pathPoints) ? j.pathPoints : null;\n        setPreviewPts(pts);\n      }).catch(() => {}).finally(() => !aborted && setIsLoading(false));\n    }, {\n      rootMargin: '120px'\n    });\n    io.observe(el);\n    return () => {\n      aborted = true;\n      controller.abort();\n      io.disconnect();\n    };\n  }, [apiBase, circuit.id]);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    ref: cardRef,\n    className: \"cr-card\",\n    role: \"button\",\n    tabIndex: 0,\n    onClick: () => onOpenDetail(circuit.id),\n    onKeyDown: e => e.key === 'Enter' && onOpenDetail(circuit.id),\n    children: [/*#__PURE__*/_jsxDEV(MiniTrack, {\n      points: previewPts || [],\n      className: isLoading ? 'loading' : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"cr-card-head\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"cr-title\",\n        children: circuit.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-sub muted\",\n        children: circuit.createdAt ? new Date(circuit.createdAt).toLocaleDateString() : 'data sconosciuta'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"cr-meta\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [/*#__PURE__*/_jsxDEV(IconFlag, {\n          className: \"pill-ic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 40\n        }, this), (_ref = (_circuit$points = circuit.points) !== null && _circuit$points !== void 0 ? _circuit$points : (_circuit$meta = circuit.meta) === null || _circuit$meta === void 0 ? void 0 : _circuit$meta.points) !== null && _ref !== void 0 ? _ref : '?', \" punti\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }, this), circuit.lengthMeters != null && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [/*#__PURE__*/_jsxDEV(IconRuler, {\n          className: \"pill-ic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 73\n        }, this), circuit.lengthMeters.toFixed(1), \" m\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 50\n      }, this), circuit.widthMeters != null && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill\",\n        children: [/*#__PURE__*/_jsxDEV(IconWidth, {\n          className: \"pill-ic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 72\n        }, this), circuit.widthMeters, \" m\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 49\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 255,\n    columnNumber: 9\n  }, this);\n}\n\n/* ===== Pagina ===== */\n_s5(CircuitCard, \"q2+MmCmcf7SNW5W34DO8BiBUPLA=\");\n_c12 = CircuitCard;\nexport default function CircuitsPage({\n  apiBase\n}) {\n  _s6();\n  var _ref2, _detail$meta$points, _detail$meta, _detail$pathPoints, _detail$stats, _detail$params, _detail$params2, _detail$params$minQua, _detail$params3;\n  // lista\n  const [list, setList] = React.useState([]);\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState('');\n  const [query, setQuery] = React.useState('');\n  const [sort, setSort] = React.useState('date_desc');\n\n  // dettaglio\n  const [openId, setOpenId] = React.useState(null);\n  const [detail, setDetail] = React.useState(null);\n  const [detailLoading, setDetailLoading] = React.useState(false);\n  const [detailError, setDetailError] = React.useState('');\n\n  // CREAZIONE\n  const [draftName, setDraftName] = React.useState('');\n  const [spacingMeters, setSpacingMeters] = React.useState(1);\n  const [minQual, setMinQual] = React.useState(0);\n  const [widthMeters, setWidthMeters] = React.useState(6);\n  const [draftPoints, setDraftPoints] = React.useState([]);\n  const [draftLength, setDraftLength] = React.useState(0);\n  const SAVED_KEY = 'nx_circuits_drafts_v1';\n  React.useEffect(() => {\n    setLoading(true);\n    setError('');\n    fetch(`${apiBase}/api/circuits`).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(json => setList(json || [])).catch(e => setError(e.message || 'Errore caricamento circuiti')).finally(() => setLoading(false));\n  }, [apiBase]);\n  const filtered = React.useMemo(() => {\n    const q = query.trim().toLowerCase();\n    let arr = list.filter(c => {\n      var _c$name, _c$id;\n      return !q || `${(_c$name = c.name) !== null && _c$name !== void 0 ? _c$name : ''}`.toLowerCase().includes(q) || `${(_c$id = c.id) !== null && _c$id !== void 0 ? _c$id : ''}`.toLowerCase().includes(q);\n    });\n    switch (sort) {\n      case 'name_asc':\n        arr = arr.sort((a, b) => (a.name || '').localeCompare(b.name || ''));\n        break;\n      case 'len_desc':\n        arr = arr.sort((a, b) => (b.lengthMeters || 0) - (a.lengthMeters || 0));\n        break;\n      case 'date_asc':\n        arr = arr.sort((a, b) => new Date(a.createdAt || 0) - new Date(b.createdAt || 0));\n        break;\n      default:\n        arr = arr.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n    }\n    return arr;\n  }, [list, query, sort]);\n  const openDetail = id => {\n    setOpenId(id);\n    setDetail(null);\n    setDetailError('');\n    setDetailLoading(true);\n    fetch(`${apiBase}/api/circuits/${encodeURIComponent(id)}`).then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))).then(j => setDetail(j)).catch(e => setDetailError(e.message || 'Errore caricamento circuito')).finally(() => setDetailLoading(false));\n  };\n\n  // salva/carica/elimina draft su localStorage\n  const loadAllDrafts = () => {\n    try {\n      return JSON.parse(localStorage.getItem(SAVED_KEY) || '[]');\n    } catch {\n      return [];\n    }\n  };\n  const saveDraft = () => {\n    const all = loadAllDrafts();\n    const id = `${new Date().toISOString()}__${(draftName || 'untitled').replace(/\\s+/g, '-').toLowerCase()}`;\n    const rec = {\n      id,\n      name: draftName || 'Senza nome',\n      spacingMeters,\n      minQual,\n      widthMeters,\n      points: draftPoints,\n      length: draftLength\n    };\n    localStorage.setItem(SAVED_KEY, JSON.stringify([rec, ...all].slice(0, 50)));\n    alert('Tracciato salvato localmente.');\n  };\n  const [selectedDraftId, setSelectedDraftId] = React.useState('');\n  const onLoadDraft = () => {\n    const rec = loadAllDrafts().find(d => d.id === selectedDraftId);\n    if (!rec) return;\n    setDraftName(rec.name);\n    setSpacingMeters(rec.spacingMeters);\n    setMinQual(rec.minQual);\n    setWidthMeters(rec.widthMeters);\n    setDraftPoints(rec.points || []);\n    setDraftLength(rec.length || 0);\n  };\n  const onDeleteDraft = () => {\n    const all = loadAllDrafts().filter(d => d.id !== selectedDraftId);\n    localStorage.setItem(SAVED_KEY, JSON.stringify(all));\n    setSelectedDraftId('');\n    alert('Draft eliminato.');\n  };\n  const onInitRace = async () => {\n    const payload = {\n      name: draftName || 'Senza nome',\n      params: {\n        spacingMeters: Number(spacingMeters),\n        minQual: Number(minQual),\n        widthMeters: Number(widthMeters)\n      },\n      pathPoints: draftPoints,\n      stats: {\n        lengthMeters: draftLength\n      }\n    };\n    try {\n      const res = await fetch(`${apiBase}/api/circuits`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      // refresh list\n      const updated = await fetch(`${apiBase}/api/circuits`).then(r => r.json());\n      setList(updated || []);\n      alert('Circuito inizializzato!');\n    } catch (e) {\n      console.warn(e);\n      alert('Non sono riuscito a creare il circuito lato backend. Il tracciato resta in locale.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"circuits-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        .cr-divider { height: 1px; background: var(--line); margin: 18px 0 10px; }\n        .map-box { background: var(--glass); border: 1px solid var(--line); border-radius: 12px; overflow: hidden; }\n        .map-viewport { width: 100%; height: 360px; }\n        .map-hint { padding: 8px 10px; font-size: .9rem; border-top: 1px dashed var(--line); }\n        .toolbar-row { display:flex; gap:10px; align-items:center; }\n        .toolbar-row .btn-primary { display:flex; align-items:center; gap:8px; font-weight:900; letter-spacing:.5px; }\n        .toolbar-row .btn-danger  { display:flex; align-items:center; gap:8px; }\n        .toolbar-row .btn-ghost   { display:flex; align-items:center; gap:8px; }\n        .cr-toolbar { display:flex; gap:12px; align-items:center; }\n        .cr-search { position:relative; }\n        .cr-search-ic { position:absolute; left:10px; top:50%; transform:translateY(-50%); opacity:.9; }\n        .cr-input { padding-left:36px; }\n        @media (max-width:960px){ .cr-toolbar{ flex-direction:column; align-items:stretch; } .map-viewport{ height:320px; } }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-grid\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-glow bg-glow-1\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-glow bg-glow-2\",\n      \"aria-hidden\": \"true\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main small-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: \"Crea nuovo circuito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pilot-form\",\n        style: {\n          marginBottom: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Spaziatura microsettori (m)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"number\",\n              min: \"0.1\",\n              step: \"0.1\",\n              value: spacingMeters,\n              onChange: e => setSpacingMeters(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Qualit\\xE0 minima fix (0\\u20139)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"number\",\n              min: \"0\",\n              max: \"9\",\n              step: \"1\",\n              value: minQual,\n              onChange: e => setMinQual(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Larghezza circuito (m)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"number\",\n              min: \"1\",\n              step: \"0.5\",\n              value: widthMeters,\n              onChange: e => setWidthMeters(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          style: {\n            border: 'none',\n            borderTop: '1px solid var(--line)',\n            margin: '10px 0 14px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Nome tracciato (opz.)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              type: \"text\",\n              placeholder: \"Es. Prova mattina\",\n              value: draftName,\n              onChange: e => setDraftName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Tracciati salvati\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"toolbar-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"input\",\n                value: selectedDraftId,\n                onChange: e => setSelectedDraftId(e.target.value),\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"\\u2014 seleziona \\u2014\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 37\n                }, this), (() => {\n                  const items = [];\n                  try {\n                    const all = JSON.parse(localStorage.getItem(SAVED_KEY) || '[]');\n                    for (const d of all) items.push(/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: d.id,\n                      children: d.name\n                    }, d.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 439,\n                      columnNumber: 77\n                    }, this));\n                  } catch {}\n                  return items;\n                })()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-ghost\",\n                onClick: onLoadDraft,\n                title: \"Carica\",\n                children: [/*#__PURE__*/_jsxDEV(IconCloud, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 37\n                }, this), \" Carica\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-danger\",\n                onClick: onDeleteDraft,\n                title: \"Elimina\",\n                disabled: !selectedDraftId,\n                children: [/*#__PURE__*/_jsxDEV(IconTrash, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 37\n                }, this), \" Elimina\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Lunghezza circuito (m)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              value: draftLength ? draftLength.toFixed(1) : 'â€”',\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          style: {\n            marginTop: 12,\n            gap: 10\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-ghost\",\n            onClick: saveDraft,\n            children: [/*#__PURE__*/_jsxDEV(IconSave, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 75\n            }, this), \" Salva tracciato\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DarkMap, {\n        points: draftPoints,\n        setPoints: setDraftPoints,\n        onLengthChange: setDraftLength\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        style: {\n          marginTop: 14\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          style: {\n            width: '100%',\n            padding: '14px 16px',\n            fontSize: '1.05rem'\n          },\n          onClick: onInitRace,\n          children: [/*#__PURE__*/_jsxDEV(IconBolt, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 25\n          }, this), \" Inizializza circuito per classifica\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-divider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"circuits-header\",\n        style: {\n          marginTop: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Circuiti\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-toolbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-search\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cr-search-ic\",\n              \"aria-hidden\": \"true\",\n              children: /*#__PURE__*/_jsxDEV(IconSearch, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 79\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"cr-input\",\n              type: \"text\",\n              placeholder: \"Cerca per nome o ID\\u2026\",\n              value: query,\n              onChange: e => setQuery(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-sort\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"muted\",\n              htmlFor: \"sort\",\n              children: \"Ordina\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"sort\",\n              className: \"cr-input\",\n              value: sort,\n              onChange: e => setSort(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date_desc\",\n                children: \"Pi\\xF9 recenti\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date_asc\",\n                children: \"Pi\\xF9 vecchi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"name_asc\",\n                children: \"Nome (A\\u2192Z)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"len_desc\",\n                children: \"Lunghezza (\\u2193)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 490,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 17\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-grid\",\n        children: Array.from({\n          length: 6\n        }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-card cr-skel\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-mini\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-skel-line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-skel-line short\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 33\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        children: [\"Errore: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 27\n      }, this), !loading && !error && (filtered.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-empty\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-empty-emoji\",\n          children: \"\\uD83D\\uDCED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-empty-title\",\n          children: \"Nessun circuito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"muted\",\n          children: \"Prova a rimuovere il filtro o aggiungere un nuovo tracciato.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cr-grid\",\n        children: filtered.map(c => /*#__PURE__*/_jsxDEV(CircuitCard, {\n          apiBase: apiBase,\n          circuit: c,\n          onOpenDetail: openDetail\n        }, c.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 33\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 25\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!openId,\n      onClose: () => setOpenId(null),\n      children: [detailLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        style: {\n          padding: '8px 0'\n        },\n        children: \"Caricamento circuito\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 35\n      }, this), detailError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"muted\",\n        style: {\n          padding: '8px 0'\n        },\n        children: [\"Errore: \", detailError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 33\n      }, this), detail && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-dialog-head\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"cr-dialog-title\",\n            children: detail.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cr-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-block\",\n            children: /*#__PURE__*/_jsxDEV(TrackCanvas, {\n              points: Array.isArray(detail.sectors) && detail.sectors.length ? detail.sectors.map(s => ({\n                lat: s.lat,\n                lon: s.lon\n              })) : detail.pathPoints || []\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cr-block\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"cr-block-title\",\n              children: \"INFORMAZIONI CIRCUITO\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Creato\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: detail.createdAt ? new Date(detail.createdAt).toLocaleString() : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 95\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Punti\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_ref2 = (_detail$meta$points = (_detail$meta = detail.meta) === null || _detail$meta === void 0 ? void 0 : _detail$meta.points) !== null && _detail$meta$points !== void 0 ? _detail$meta$points : (_detail$pathPoints = detail.pathPoints) === null || _detail$pathPoints === void 0 ? void 0 : _detail$pathPoints.length) !== null && _ref2 !== void 0 ? _ref2 : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 94\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Lunghezza\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$stats = detail.stats) !== null && _detail$stats !== void 0 && _detail$stats.lengthMeters ? `${detail.stats.lengthMeters.toFixed(1)} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 98\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Larghezza\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params = detail.params) !== null && _detail$params !== void 0 && _detail$params.widthMeters ? `${detail.params.widthMeters} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 98\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"Spacing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params2 = detail.params) !== null && _detail$params2 !== void 0 && _detail$params2.spacingMeters ? `${detail.params.spacingMeters} m` : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 96\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cr-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-key\",\n                children: \"minQual\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 57\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cr-val\",\n                children: (_detail$params$minQua = (_detail$params3 = detail.params) === null || _detail$params3 === void 0 ? void 0 : _detail$params3.minQual) !== null && _detail$params$minQua !== void 0 ? _detail$params$minQua : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 96\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 376,\n    columnNumber: 9\n  }, this);\n}\n_s6(CircuitsPage, \"LpScig9ycLUbFWungELKcnR9F24=\");\n_c13 = CircuitsPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"Svg\");\n$RefreshReg$(_c2, \"IconFlag\");\n$RefreshReg$(_c3, \"IconRuler\");\n$RefreshReg$(_c4, \"IconWidth\");\n$RefreshReg$(_c5, \"IconSearch\");\n$RefreshReg$(_c6, \"IconTrash\");\n$RefreshReg$(_c7, \"IconSave\");\n$RefreshReg$(_c8, \"IconCloud\");\n$RefreshReg$(_c9, \"IconBolt\");\n$RefreshReg$(_c0, \"MiniTrack\");\n$RefreshReg$(_c1, \"TrackCanvas\");\n$RefreshReg$(_c10, \"DarkMap\");\n$RefreshReg$(_c11, \"Modal\");\n$RefreshReg$(_c12, \"CircuitCard\");\n$RefreshReg$(_c13, \"CircuitsPage\");","map":{"version":3,"names":["React","jsxDEV","_jsxDEV","Svg","children","size","className","stroke","strokeWidth","rest","xmlns","width","height","viewBox","fill","strokeLinecap","strokeLinejoin","fileName","_jsxFileName","lineNumber","columnNumber","_c","IconFlag","p","d","_c2","IconRuler","x","y","rx","_c3","IconWidth","_c4","IconSearch","cx","cy","r","_c5","IconTrash","points","_c6","IconSave","_c7","IconCloud","_c8","IconBolt","_c9","projectLatLonToXY","length","lat0","reduce","s","lat","lon0","lon","mPerDegLat","mPerDegLon","Math","cos","PI","map","fitToCanvas","localXY","padding","xs","ys","minX","min","maxX","max","minY","maxY","spanX","spanY","scale","offX","offY","X","Y","toRad","haversine","a","b","R","dLat","dLon","la1","la2","h","sin","asin","sqrt","polylineLengthMeters","pts","sum","i","MiniTrack","_s","ref","useRef","useEffect","canvas","current","ctx","getContext","W","H","clearRect","fillStyle","fillRect","setLineDash","strokeStyle","lineWidth","strokeRect","local","fitted","beginPath","forEach","lineTo","moveTo","lineCap","lineJoin","shadowColor","shadowBlur","arc","_c0","TrackCanvas","_s2","s0","s1","ang","atan2","save","translate","rotate","restore","_c1","useLeaflet","_s3","L","setL","useState","cancelled","ensure","document","querySelector","link","createElement","rel","href","setAttribute","head","appendChild","window","script","src","async","onload","body","DarkMap","setPoints","onLengthChange","_s4","mapRef","leafRef","polyRef","zoomControl","attributionControl","zoom","setView","tileLayer","maxZoom","addTo","polyline","color","weight","opacity","onClick","e","nxt","latlng","lng","onDbl","on","onKey","ev","key","prev","slice","toLowerCase","addEventListener","removeEventListener","remove","latlngs","setLatLngs","fitBounds","getBounds","pad","animate","_c10","Modal","open","onClose","role","_c11","CircuitCard","apiBase","circuit","onOpenDetail","_s5","_ref","_circuit$points","_circuit$meta","previewPts","setPreviewPts","isLoading","setIsLoading","cardRef","el","aborted","controller","AbortController","io","IntersectionObserver","entries","_entries$","isIntersecting","disconnect","fetch","encodeURIComponent","id","signal","then","ok","json","Promise","reject","Error","status","j","Array","isArray","sectors","pathPoints","catch","finally","rootMargin","observe","abort","tabIndex","onKeyDown","name","createdAt","Date","toLocaleDateString","meta","lengthMeters","toFixed","widthMeters","_c12","CircuitsPage","_s6","_ref2","_detail$meta$points","_detail$meta","_detail$pathPoints","_detail$stats","_detail$params","_detail$params2","_detail$params$minQua","_detail$params3","list","setList","loading","setLoading","error","setError","query","setQuery","sort","setSort","openId","setOpenId","detail","setDetail","detailLoading","setDetailLoading","detailError","setDetailError","draftName","setDraftName","spacingMeters","setSpacingMeters","minQual","setMinQual","setWidthMeters","draftPoints","setDraftPoints","draftLength","setDraftLength","SAVED_KEY","message","filtered","useMemo","q","trim","arr","filter","c","_c$name","_c$id","includes","localeCompare","openDetail","loadAllDrafts","JSON","parse","localStorage","getItem","saveDraft","all","toISOString","replace","rec","setItem","stringify","alert","selectedDraftId","setSelectedDraftId","onLoadDraft","find","onDeleteDraft","onInitRace","payload","params","Number","stats","res","method","headers","updated","console","warn","style","marginBottom","type","step","value","onChange","target","border","borderTop","margin","placeholder","flex","items","push","title","disabled","readOnly","marginTop","gap","fontSize","htmlFor","from","_","toLocaleString","_c13","$RefreshReg$"],"sources":["/home/ubuntu/racesense/racesense-frontend/src/pages/Circuits.jsx"],"sourcesContent":["import React from 'react';\n\n/* ============ ICONS (inline SVG, no deps) ============ */\nconst Svg = ({ children, size = 16, className = '', stroke = 'currentColor', strokeWidth = 2, ...rest }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width={size} height={size} viewBox=\"0 0 24 24\"\n        fill=\"none\" stroke={stroke} strokeWidth={strokeWidth}\n        strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className} aria-hidden=\"true\" {...rest}>\n        {children}\n    </svg>\n);\nconst IconFlag = (p) => (<Svg {...p}><path d=\"M4 3v18\" /><path d=\"M4 4s3-1 6 1 6 0 6 0v9s-3 1-6-1-6 0-6 0V4z\" /></Svg>);\nconst IconRuler = (p) => (<Svg {...p}><rect x=\"3\" y=\"6\" width=\"18\" height=\"12\" rx=\"2\" /><path d=\"M7 10h2M11 10h2M15 10h2M7 14h1M11 14h1M15 14h1\" /></Svg>);\nconst IconWidth = (p) => (<Svg {...p}><path d=\"M3 12h18\" /><path d=\"M7 8l-4 4 4 4M17 8l4 4-4 4\" /></Svg>);\nconst IconSearch = (p) => (<Svg {...p}><circle cx=\"11\" cy=\"11\" r=\"7\" /><path d=\"m21 21-3.8-3.8\" /></Svg>);\nconst IconTrash = (p) => (<Svg {...p}><polyline points=\"3 6 5 6 21 6\" /><path d=\"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6\" /><path d=\"M10 11v6M14 11v6\" /><path d=\"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2\" /></Svg>);\nconst IconSave = (p) => (<Svg {...p}><path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\" /><path d=\"M17 21v-8H7v8\" /><path d=\"M7 3v5h8\" /></Svg>);\nconst IconCloud = (p) => (<Svg {...p}><path d=\"M17.5 19H7a4 4 0 1 1 1-7.874A5 5 0 0 1 18 9a4 4 0 0 1-.5 10z\" /></Svg>);\nconst IconBolt = (p) => (<Svg {...p}><path d=\"m13 2-3 7h4l-3 7\" /><path d=\"M12 19v3\" /></Svg>);\n\n/* ===== Helpers ===== */\nfunction projectLatLonToXY(points) {\n    if (!points || points.length === 0) return [];\n    const lat0 = points.reduce((s, p) => s + p.lat, 0) / points.length;\n    const lon0 = points.reduce((s, p) => s + p.lon, 0) / points.length;\n    const mPerDegLat = 111_132;\n    const mPerDegLon = 111_320 * Math.cos((lat0 * Math.PI) / 180);\n    return points.map(p => ({ x: (p.lon - lon0) * mPerDegLon, y: (p.lat - lat0) * mPerDegLat * -1 }));\n}\nfunction fitToCanvas(localXY, width, height, padding = 20) {\n    if (!localXY.length) return [];\n    const xs = localXY.map(p => p.x), ys = localXY.map(p => p.y);\n    const minX = Math.min(...xs), maxX = Math.max(...xs);\n    const minY = Math.min(...ys), maxY = Math.max(...ys);\n    const spanX = (maxX - minX) || 1, spanY = (maxY - minY) || 1;\n    const scale = Math.min((width - 2 * padding) / spanX, (height - 2 * padding) / spanY);\n    const offX = padding - minX * scale + (width - 2 * padding - spanX * scale) / 2;\n    const offY = padding - minY * scale + (height - 2 * padding - spanY * scale) / 2;\n    return localXY.map(p => ({ X: p.x * scale + offX, Y: p.y * scale + offY }));\n}\nconst toRad = (d) => (d * Math.PI) / 180;\nfunction haversine(a, b) {\n    const R = 6371000;\n    const dLat = toRad(b.lat - a.lat);\n    const dLon = toRad(b.lon - a.lon);\n    const la1 = toRad(a.lat), la2 = toRad(b.lat);\n    const h = Math.sin(dLat / 2) ** 2 + Math.cos(la1) * Math.cos(la2) * Math.sin(dLon / 2) ** 2;\n    return 2 * R * Math.asin(Math.sqrt(h));\n}\nfunction polylineLengthMeters(pts) {\n    if (!pts || pts.length < 2) return 0;\n    let sum = 0;\n    for (let i = 1; i < pts.length; i++) sum += haversine(pts[i - 1], pts[i]);\n    return sum;\n}\n\n/* ===== Canvas mini preview (lista) ===== */\nfunction MiniTrack({ points, className = '' }) {\n    const ref = React.useRef(null);\n    React.useEffect(() => {\n        const canvas = ref.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        const W = canvas.width, H = canvas.height;\n        ctx.clearRect(0, 0, W, H);\n        ctx.fillStyle = 'rgba(255,255,255,0.03)'; ctx.fillRect(0, 0, W, H);\n\n        if (!points || points.length < 2) {\n            ctx.setLineDash([8, 8]); ctx.strokeStyle = 'rgba(255,255,255,0.20)'; ctx.lineWidth = 2;\n            ctx.strokeRect(14, 14, W - 28, H - 28); ctx.setLineDash([]); return;\n        }\n        const local = projectLatLonToXY(points);\n        const fitted = fitToCanvas(local, W, H, 14);\n        ctx.beginPath();\n        fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n        ctx.strokeStyle = 'rgba(192,255,3,0.9)'; ctx.lineWidth = 2.5; ctx.lineCap = 'round'; ctx.lineJoin = 'round';\n        ctx.shadowColor = 'rgba(192,255,3,0.35)'; ctx.shadowBlur = 6; ctx.stroke(); ctx.shadowBlur = 0;\n\n        const s = fitted[0];\n        ctx.fillStyle = '#0a0a0a'; ctx.strokeStyle = 'rgba(255,255,255,0.85)'; ctx.lineWidth = 1.5;\n        ctx.beginPath(); ctx.arc(s.X, s.Y, 4, 0, Math.PI * 2); ctx.fill(); ctx.stroke();\n    }, [points]);\n    return <canvas ref={ref} width={320} height={150} className={`cr-mini ${className}`} aria-hidden=\"true\" />;\n}\n\n/* ===== Canvas grande per il dettaglio ===== */\nfunction TrackCanvas({ points, width = 760, height = 420 }) {\n    const ref = React.useRef(null);\n    React.useEffect(() => {\n        const canvas = ref.current; if (!canvas) return;\n        const ctx = canvas.getContext('2d'); ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = 'rgba(255,255,255,0.02)'; ctx.strokeStyle = 'rgba(192,255,3,0.18)'; ctx.lineWidth = 1;\n        ctx.strokeRect(0.5, 0.5, canvas.width - 1, canvas.height - 1);\n        if (!points || points.length < 2) return;\n\n        const local = projectLatLonToXY(points);\n        const fitted = fitToCanvas(local, canvas.width, canvas.height, 24);\n\n        ctx.beginPath();\n        fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n        ctx.strokeStyle = 'rgba(80,84,90,0.95)'; ctx.lineWidth = 10; ctx.lineCap = 'round'; ctx.lineJoin = 'round'; ctx.stroke();\n\n        ctx.beginPath();\n        fitted.forEach((p, i) => i ? ctx.lineTo(p.X, p.Y) : ctx.moveTo(p.X, p.Y));\n        ctx.strokeStyle = 'rgba(255,255,255,0.12)'; ctx.lineWidth = 12; ctx.stroke();\n\n        const s0 = fitted[0], s1 = fitted[1] || fitted[0]; const ang = Math.atan2(s1.Y - s0.Y, s1.X - s0.X);\n        ctx.save(); ctx.translate(s0.X, s0.Y); ctx.rotate(ang);\n        ctx.strokeStyle = '#fff'; ctx.lineWidth = 3; ctx.beginPath(); ctx.moveTo(0, -10); ctx.lineTo(0, 10); ctx.stroke(); ctx.restore();\n    }, [points]);\n    return <canvas ref={ref} width={width} height={height} className=\"cr-canvas\" />;\n}\n\n/* ===== Leaflet loader (CDN) + Dark map drawing ===== */\nfunction useLeaflet() {\n    const [L, setL] = React.useState(null);\n    React.useEffect(() => {\n        let cancelled = false;\n        const ensure = async () => {\n            // CSS\n            if (!document.querySelector('link[data-leaflet]')) {\n                const link = document.createElement('link');\n                link.rel = 'stylesheet';\n                link.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';\n                link.setAttribute('data-leaflet', '1');\n                document.head.appendChild(link);\n            }\n            // JS\n            if (window.L) { setL(window.L); return; }\n            const script = document.createElement('script');\n            script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';\n            script.async = true;\n            script.onload = () => !cancelled && setL(window.L);\n            document.body.appendChild(script);\n        };\n        ensure();\n        return () => { cancelled = true; };\n    }, []);\n    return L;\n}\n\nfunction DarkMap({ points, setPoints, onLengthChange }) {\n    const L = useLeaflet();\n    const mapRef = React.useRef(null);\n    const leafRef = React.useRef(null);\n    const polyRef = React.useRef(null);\n\n    // init map\n    React.useEffect(() => {\n        if (!L || leafRef.current) return;\n        const map = L.map(mapRef.current, { zoomControl: true, attributionControl: false, zoom: 15 })\n            .setView([45.4642, 9.19], 13); // default Milano\n        leafRef.current = map;\n\n        // Dark Matter tiles (Carto)\n        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n            maxZoom: 20\n        }).addTo(map);\n\n        // polyline layer\n        polyRef.current = L.polyline([], {\n            color: '#C0FF03', weight: 4, opacity: 0.9\n        }).addTo(map);\n\n        // interactions\n        const onClick = (e) => {\n            const nxt = [...(points || []), { lat: e.latlng.lat, lon: e.latlng.lng }];\n            setPoints(nxt);\n        };\n        const onDbl = () => { /* no-op: lasciamo solo il click per aggiungere */ };\n        map.on('click', onClick);\n        map.on('dblclick', onDbl);\n\n        // hotkeys\n        const onKey = (ev) => {\n            if (ev.key === 'Backspace' || ev.key === 'Delete') {\n                setPoints(prev => prev.slice(0, -1));\n            }\n            if (ev.key.toLowerCase() === 'c') {\n                setPoints([]);\n            }\n        };\n        window.addEventListener('keydown', onKey);\n\n        return () => {\n            window.removeEventListener('keydown', onKey);\n            map.remove();\n            leafRef.current = null;\n        };\n    }, [L]); // eslint-disable-line\n\n    // update poly + length\n    React.useEffect(() => {\n        if (!leafRef.current || !polyRef.current) return;\n        const latlngs = (points || []).map(p => [p.lat, p.lon]);\n        polyRef.current.setLatLngs(latlngs);\n        if (latlngs.length) {\n            leafRef.current.fitBounds(polyRef.current.getBounds().pad(0.2), { animate: false });\n        }\n        onLengthChange?.(polylineLengthMeters(points || []));\n    }, [points, onLengthChange]);\n\n    return (\n        <div className=\"map-box\">\n            <div ref={mapRef} className=\"map-viewport\" />\n            <div className=\"map-hint muted\">\n                Tocca/click per aggiungere punti â€” <kbd>âŒ«</kbd> per annulla, <kbd>C</kbd> per svuota\n            </div>\n        </div>\n    );\n}\n\n/* ===== Modal ===== */\nfunction Modal({ open, onClose, children }) {\n    if (!open) return null;\n    return (\n        <div className=\"cr-modal\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"cr-backdrop\" onClick={onClose} />\n            <div className=\"cr-dialog\">\n                <button className=\"cr-close\" onClick={onClose} aria-label=\"Chiudi\">Ã—</button>\n                {children}\n            </div>\n        </div>\n    );\n}\n\n/* ===== Card lista ===== */\nfunction CircuitCard({ apiBase, circuit, onOpenDetail }) {\n    const [previewPts, setPreviewPts] = React.useState(null);\n    const [isLoading, setIsLoading] = React.useState(false);\n    const cardRef = React.useRef(null);\n\n    React.useEffect(() => {\n        const el = cardRef.current; if (!el) return;\n        let aborted = false; const controller = new AbortController();\n        const io = new IntersectionObserver((entries) => {\n            if (!entries[0]?.isIntersecting) return;\n            io.disconnect(); setIsLoading(true);\n            fetch(`${apiBase}/api/circuits/${encodeURIComponent(circuit.id)}`, { signal: controller.signal })\n                .then(r => r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`)))\n                .then(j => {\n                    if (aborted) return;\n                    const pts = (Array.isArray(j.sectors) && j.sectors.length\n                        ? j.sectors.map(s => ({ lat: s.lat, lon: s.lon }))\n                        : Array.isArray(j.pathPoints) ? j.pathPoints : null);\n                    setPreviewPts(pts);\n                })\n                .catch(() => { })\n                .finally(() => !aborted && setIsLoading(false));\n        }, { rootMargin: '120px' });\n        io.observe(el);\n        return () => { aborted = true; controller.abort(); io.disconnect(); };\n    }, [apiBase, circuit.id]);\n\n    return (\n        <article ref={cardRef} className=\"cr-card\" role=\"button\" tabIndex={0}\n            onClick={() => onOpenDetail(circuit.id)}\n            onKeyDown={(e) => e.key === 'Enter' && onOpenDetail(circuit.id)}>\n            <MiniTrack points={previewPts || []} className={isLoading ? 'loading' : ''} />\n            <header className=\"cr-card-head\">\n                <h3 className=\"cr-title\">{circuit.name}</h3>\n                <div className=\"cr-sub muted\">{circuit.createdAt ? new Date(circuit.createdAt).toLocaleDateString() : 'data sconosciuta'}</div>\n            </header>\n            <footer className=\"cr-meta\">\n                <span className=\"pill\"><IconFlag className=\"pill-ic\" />{(circuit.points ?? circuit.meta?.points ?? '?')} punti</span>\n                {circuit.lengthMeters != null && <span className=\"pill\"><IconRuler className=\"pill-ic\" />{circuit.lengthMeters.toFixed(1)} m</span>}\n                {circuit.widthMeters != null && <span className=\"pill\"><IconWidth className=\"pill-ic\" />{circuit.widthMeters} m</span>}\n            </footer>\n        </article>\n    );\n}\n\n/* ===== Pagina ===== */\nexport default function CircuitsPage({ apiBase }) {\n    // lista\n    const [list, setList] = React.useState([]);\n    const [loading, setLoading] = React.useState(true);\n    const [error, setError] = React.useState('');\n    const [query, setQuery] = React.useState('');\n    const [sort, setSort] = React.useState('date_desc');\n\n    // dettaglio\n    const [openId, setOpenId] = React.useState(null);\n    const [detail, setDetail] = React.useState(null);\n    const [detailLoading, setDetailLoading] = React.useState(false);\n    const [detailError, setDetailError] = React.useState('');\n\n    // CREAZIONE\n    const [draftName, setDraftName] = React.useState('');\n    const [spacingMeters, setSpacingMeters] = React.useState(1);\n    const [minQual, setMinQual] = React.useState(0);\n    const [widthMeters, setWidthMeters] = React.useState(6);\n    const [draftPoints, setDraftPoints] = React.useState([]);\n    const [draftLength, setDraftLength] = React.useState(0);\n\n    const SAVED_KEY = 'nx_circuits_drafts_v1';\n\n    React.useEffect(() => {\n        setLoading(true); setError('');\n        fetch(`${apiBase}/api/circuits`)\n            .then(r => (r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))))\n            .then(json => setList(json || []))\n            .catch(e => setError(e.message || 'Errore caricamento circuiti'))\n            .finally(() => setLoading(false));\n    }, [apiBase]);\n\n    const filtered = React.useMemo(() => {\n        const q = query.trim().toLowerCase();\n        let arr = list.filter(c =>\n            !q || `${c.name ?? ''}`.toLowerCase().includes(q) || `${c.id ?? ''}`.toLowerCase().includes(q)\n        );\n        switch (sort) {\n            case 'name_asc': arr = arr.sort((a, b) => (a.name || '').localeCompare(b.name || '')); break;\n            case 'len_desc': arr = arr.sort((a, b) => (b.lengthMeters || 0) - (a.lengthMeters || 0)); break;\n            case 'date_asc': arr = arr.sort((a, b) => new Date(a.createdAt || 0) - new Date(b.createdAt || 0)); break;\n            default: arr = arr.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\n        }\n        return arr;\n    }, [list, query, sort]);\n\n    const openDetail = (id) => {\n        setOpenId(id); setDetail(null); setDetailError(''); setDetailLoading(true);\n        fetch(`${apiBase}/api/circuits/${encodeURIComponent(id)}`)\n            .then(r => (r.ok ? r.json() : Promise.reject(new Error(`HTTP ${r.status}`))))\n            .then(j => setDetail(j))\n            .catch(e => setDetailError(e.message || 'Errore caricamento circuito'))\n            .finally(() => setDetailLoading(false));\n    };\n\n    // salva/carica/elimina draft su localStorage\n    const loadAllDrafts = () => {\n        try { return JSON.parse(localStorage.getItem(SAVED_KEY) || '[]'); } catch { return []; }\n    };\n    const saveDraft = () => {\n        const all = loadAllDrafts();\n        const id = `${new Date().toISOString()}__${(draftName || 'untitled').replace(/\\s+/g, '-').toLowerCase()}`;\n        const rec = { id, name: draftName || 'Senza nome', spacingMeters, minQual, widthMeters, points: draftPoints, length: draftLength };\n        localStorage.setItem(SAVED_KEY, JSON.stringify([rec, ...all].slice(0, 50)));\n        alert('Tracciato salvato localmente.');\n    };\n    const [selectedDraftId, setSelectedDraftId] = React.useState('');\n    const onLoadDraft = () => {\n        const rec = loadAllDrafts().find(d => d.id === selectedDraftId);\n        if (!rec) return;\n        setDraftName(rec.name); setSpacingMeters(rec.spacingMeters); setMinQual(rec.minQual);\n        setWidthMeters(rec.widthMeters); setDraftPoints(rec.points || []); setDraftLength(rec.length || 0);\n    };\n    const onDeleteDraft = () => {\n        const all = loadAllDrafts().filter(d => d.id !== selectedDraftId);\n        localStorage.setItem(SAVED_KEY, JSON.stringify(all));\n        setSelectedDraftId(''); alert('Draft eliminato.');\n    };\n\n    const onInitRace = async () => {\n        const payload = {\n            name: draftName || 'Senza nome',\n            params: { spacingMeters: Number(spacingMeters), minQual: Number(minQual), widthMeters: Number(widthMeters) },\n            pathPoints: draftPoints,\n            stats: { lengthMeters: draftLength }\n        };\n        try {\n            const res = await fetch(`${apiBase}/api/circuits`, {\n                method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload)\n            });\n            if (!res.ok) throw new Error(`HTTP ${res.status}`);\n            // refresh list\n            const updated = await fetch(`${apiBase}/api/circuits`).then(r => r.json());\n            setList(updated || []);\n            alert('Circuito inizializzato!');\n        } catch (e) {\n            console.warn(e);\n            alert('Non sono riuscito a creare il circuito lato backend. Il tracciato resta in locale.');\n        }\n    };\n\n    return (\n        <div className=\"circuits-page\">\n            {/* extra CSS solo per questa pagina */}\n            <style>{`\n        .cr-divider { height: 1px; background: var(--line); margin: 18px 0 10px; }\n        .map-box { background: var(--glass); border: 1px solid var(--line); border-radius: 12px; overflow: hidden; }\n        .map-viewport { width: 100%; height: 360px; }\n        .map-hint { padding: 8px 10px; font-size: .9rem; border-top: 1px dashed var(--line); }\n        .toolbar-row { display:flex; gap:10px; align-items:center; }\n        .toolbar-row .btn-primary { display:flex; align-items:center; gap:8px; font-weight:900; letter-spacing:.5px; }\n        .toolbar-row .btn-danger  { display:flex; align-items:center; gap:8px; }\n        .toolbar-row .btn-ghost   { display:flex; align-items:center; gap:8px; }\n        .cr-toolbar { display:flex; gap:12px; align-items:center; }\n        .cr-search { position:relative; }\n        .cr-search-ic { position:absolute; left:10px; top:50%; transform:translateY(-50%); opacity:.9; }\n        .cr-input { padding-left:36px; }\n        @media (max-width:960px){ .cr-toolbar{ flex-direction:column; align-items:stretch; } .map-viewport{ height:320px; } }\n      `}</style>\n\n            <div className=\"bg-grid\" aria-hidden=\"true\" />\n            <div className=\"bg-glow bg-glow-1\" aria-hidden=\"true\" />\n            <div className=\"bg-glow bg-glow-2\" aria-hidden=\"true\" />\n\n            <main className=\"main small-top\">\n\n                {/* ===== CREAZIONE NUOVO CIRCUITO ===== */}\n                <h2 className=\"section-title\">Crea nuovo circuito</h2>\n\n                <div className=\"pilot-form\" style={{ marginBottom: 14 }}>\n                    <div className=\"form-row\">\n                        <div className=\"form-col\">\n                            <label>Spaziatura microsettori (m)</label>\n                            <input className=\"input\" type=\"number\" min=\"0.1\" step=\"0.1\"\n                                value={spacingMeters} onChange={e => setSpacingMeters(e.target.value)} />\n                        </div>\n                        <div className=\"form-col\">\n                            <label>QualitÃ  minima fix (0â€“9)</label>\n                            <input className=\"input\" type=\"number\" min=\"0\" max=\"9\" step=\"1\"\n                                value={minQual} onChange={e => setMinQual(e.target.value)} />\n                        </div>\n                        <div className=\"form-col\">\n                            <label>Larghezza circuito (m)</label>\n                            <input className=\"input\" type=\"number\" min=\"1\" step=\"0.5\"\n                                value={widthMeters} onChange={e => setWidthMeters(e.target.value)} />\n                        </div>\n                    </div>\n\n                    <hr style={{ border: 'none', borderTop: '1px solid var(--line)', margin: '10px 0 14px' }} />\n\n                    <div className=\"form-row\">\n                        <div className=\"form-col\">\n                            <label>Nome tracciato (opz.)</label>\n                            <input className=\"input\" type=\"text\" placeholder=\"Es. Prova mattina\"\n                                value={draftName} onChange={e => setDraftName(e.target.value)} />\n                        </div>\n                        <div className=\"form-col\">\n                            <label>Tracciati salvati</label>\n                            <div className=\"toolbar-row\">\n                                <select className=\"input\" value={selectedDraftId}\n                                    onChange={e => setSelectedDraftId(e.target.value)} style={{ flex: 1 }}>\n                                    <option value=\"\">â€” seleziona â€”</option>\n                                    {(() => {\n                                        const items = []; try {\n                                            const all = JSON.parse(localStorage.getItem(SAVED_KEY) || '[]');\n                                            for (const d of all) items.push(<option key={d.id} value={d.id}>{d.name}</option>);\n                                        } catch { }\n                                        return items;\n                                    })()}\n                                </select>\n                                <button className=\"btn-ghost\" onClick={onLoadDraft} title=\"Carica\">\n                                    <IconCloud size={16} /> Carica\n                                </button>\n                                <button className=\"btn-danger\" onClick={onDeleteDraft} title=\"Elimina\" disabled={!selectedDraftId}>\n                                    <IconTrash size={16} /> Elimina\n                                </button>\n                            </div>\n                        </div>\n                        <div className=\"form-col\">\n                            <label>Lunghezza circuito (m)</label>\n                            <input className=\"input\" value={draftLength ? draftLength.toFixed(1) : 'â€”'} readOnly />\n                        </div>\n                    </div>\n\n                    <div className=\"form-actions\" style={{ marginTop: 12, gap: 10 }}>\n                        <button className=\"btn-ghost\" onClick={saveDraft}><IconSave size={16} /> Salva tracciato</button>\n                    </div>\n                </div>\n\n                {/* MAPPA DARK per disegnare il nuovo circuito */}\n                <DarkMap points={draftPoints} setPoints={setDraftPoints} onLengthChange={setDraftLength} />\n\n                <div className=\"form-actions\" style={{ marginTop: 14 }}>\n                    <button className=\"btn-primary\" style={{ width: '100%', padding: '14px 16px', fontSize: '1.05rem' }}\n                        onClick={onInitRace}>\n                        <IconBolt size={18} /> Inizializza circuito per classifica\n                    </button>\n                </div>\n\n                <div className=\"cr-divider\" />\n\n                {/* ===== LISTA / RICERCA CIRCUITI ===== */}\n                <div className=\"circuits-header\" style={{ marginTop: 6 }}>\n                    <h2 className=\"section-title\">Circuiti</h2>\n                    <div className=\"cr-toolbar\">\n                        <div className=\"cr-search\">\n                            <span className=\"cr-search-ic\" aria-hidden=\"true\"><IconSearch /></span>\n                            <input className=\"cr-input\" type=\"text\" placeholder=\"Cerca per nome o IDâ€¦\"\n                                value={query} onChange={e => setQuery(e.target.value)} />\n                        </div>\n                        <div className=\"cr-sort\">\n                            <label className=\"muted\" htmlFor=\"sort\">Ordina</label>\n                            <select id=\"sort\" className=\"cr-input\" value={sort} onChange={e => setSort(e.target.value)}>\n                                <option value=\"date_desc\">PiÃ¹ recenti</option>\n                                <option value=\"date_asc\">PiÃ¹ vecchi</option>\n                                <option value=\"name_asc\">Nome (Aâ†’Z)</option>\n                                <option value=\"len_desc\">Lunghezza (â†“)</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n\n                {loading && (\n                    <div className=\"cr-grid\">\n                        {Array.from({ length: 6 }).map((_, i) => (\n                            <div className=\"cr-card cr-skel\" key={i}>\n                                <div className=\"cr-mini\" />\n                                <div className=\"cr-skel-line\" />\n                                <div className=\"cr-skel-line short\" />\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {error && <p className=\"muted\">Errore: {error}</p>}\n\n                {!loading && !error && (\n                    filtered.length === 0 ? (\n                        <div className=\"cr-empty\">\n                            <div className=\"cr-empty-emoji\">ðŸ“­</div>\n                            <div className=\"cr-empty-title\">Nessun circuito</div>\n                            <div className=\"muted\">Prova a rimuovere il filtro o aggiungere un nuovo tracciato.</div>\n                        </div>\n                    ) : (\n                        <div className=\"cr-grid\">\n                            {filtered.map(c => (\n                                <CircuitCard key={c.id} apiBase={apiBase} circuit={c} onOpenDetail={openDetail} />\n                            ))}\n                        </div>\n                    )\n                )}\n\n            </main>\n\n            {/* MODALE DETTAGLIO */}\n            <Modal open={!!openId} onClose={() => setOpenId(null)}>\n                {detailLoading && <p className=\"muted\" style={{ padding: '8px 0' }}>Caricamento circuitoâ€¦</p>}\n                {detailError && <p className=\"muted\" style={{ padding: '8px 0' }}>Errore: {detailError}</p>}\n                {detail && (\n                    <div>\n                        <div className=\"cr-dialog-head\">\n                            <h3 className=\"cr-dialog-title\">{detail.name}</h3>\n                        </div>\n                        <div className=\"cr-body\">\n                            <div className=\"cr-block\">\n                                <TrackCanvas\n                                    points={(Array.isArray(detail.sectors) && detail.sectors.length\n                                        ? detail.sectors.map(s => ({ lat: s.lat, lon: s.lon }))\n                                        : detail.pathPoints || [])}\n                                />\n                            </div>\n\n                            <div className=\"cr-block\">\n                                <h4 className=\"cr-block-title\">INFORMAZIONI CIRCUITO</h4>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Creato</span><span className=\"cr-val\">{detail.createdAt ? new Date(detail.createdAt).toLocaleString() : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Punti</span><span className=\"cr-val\">{detail.meta?.points ?? detail.pathPoints?.length ?? '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Lunghezza</span><span className=\"cr-val\">{detail.stats?.lengthMeters ? `${detail.stats.lengthMeters.toFixed(1)} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Larghezza</span><span className=\"cr-val\">{detail.params?.widthMeters ? `${detail.params.widthMeters} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">Spacing</span><span className=\"cr-val\">{detail.params?.spacingMeters ? `${detail.params.spacingMeters} m` : '-'}</span></div>\n                                <div className=\"cr-row\"><span className=\"cr-key\">minQual</span><span className=\"cr-val\">{detail.params?.minQual ?? '-'}</span></div>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </Modal>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}