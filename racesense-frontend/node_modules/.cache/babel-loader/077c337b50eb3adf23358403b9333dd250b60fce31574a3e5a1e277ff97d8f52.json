{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/racesense/racesense-frontend/src/pages/RaceSetup.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || `http://${window.location.hostname}:5000`;\nconst WS_URL = process.env.REACT_APP_WS_URL || `ws://${window.location.hostname}:5001`;\nexport default function RaceSetup({\n  onStartRace\n}) {\n  _s();\n  var _circuitData$stats$le, _circuitData$stats, _circuitData$stats$le2, _circuitData$sectors$, _circuitData$sectors, _circuitData$params$w, _circuitData$params;\n  const [circuits, setCircuits] = useState([]);\n  const [pilots, setPilots] = useState([]);\n  const [selectedCircuit, setSelectedCircuit] = useState(null);\n  const [circuitData, setCircuitData] = useState(null);\n  const [totalLaps, setTotalLaps] = useState(10);\n\n  // Device attivi rilevati in tempo reale\n  const [activeDevices, setActiveDevices] = useState({}); // { MAC: { lastSeen, lat, lon, speed, data } }\n  const [deviceAssignments, setDeviceAssignments] = useState({}); // { MAC: pilotId }\n\n  const wsRef = useRef(null);\n  const deviceTimeoutRef = useRef({});\n\n  // ========== Carica circuiti e piloti ==========\n  useEffect(() => {\n    fetch(`${API_BASE}/api/circuits`).then(r => r.json()).then(data => setCircuits(data)).catch(e => console.error('Errore caricamento circuiti:', e));\n    fetch(`${API_BASE}/api/pilots`).then(r => r.json()).then(data => setPilots(data)).catch(e => console.error('Errore caricamento piloti:', e));\n  }, []);\n\n  // ========== Carica dettagli circuito selezionato ==========\n  useEffect(() => {\n    if (!selectedCircuit) return;\n    fetch(`${API_BASE}/api/circuits/${selectedCircuit}`).then(r => r.json()).then(data => setCircuitData(data)).catch(e => console.error('Errore caricamento circuito:', e));\n  }, [selectedCircuit]);\n\n  // ========== WebSocket per rilevare device attivi ==========\n  useEffect(() => {\n    const ws = new WebSocket(WS_URL);\n    wsRef.current = ws;\n    ws.onopen = () => {\n      console.log('[RaceSetup] WebSocket connesso - in ascolto per device attivi');\n    };\n    ws.onmessage = event => {\n      try {\n        const data = JSON.parse(event.data);\n        // Formato: { mac, lat, lon, speedKmh, ... }\n        if (data.mac && data.lat && data.lon) {\n          const mac = String(data.mac);\n          const lat = Number(data.lat);\n          const lon = Number(data.lon);\n          const speed = Number(data.speedKmh || 0);\n          setActiveDevices(prev => ({\n            ...prev,\n            [mac]: {\n              lastSeen: Date.now(),\n              lat,\n              lon,\n              speed,\n              data\n            }\n          }));\n\n          // Resetta timeout per questo device\n          if (deviceTimeoutRef.current[mac]) {\n            clearTimeout(deviceTimeoutRef.current[mac]);\n          }\n\n          // Rimuovi device se inattivo per 6s (leggero buffer)\n          deviceTimeoutRef.current[mac] = setTimeout(() => {\n            setActiveDevices(prev => {\n              const updated = {\n                ...prev\n              };\n              delete updated[mac];\n              return updated;\n            });\n          }, 6000);\n        }\n      } catch (err) {\n        console.error('Errore parsing GPS:', err);\n      }\n    };\n    ws.onerror = err => console.error('[RaceSetup] WebSocket errore:', err);\n    ws.onclose = () => console.log('[RaceSetup] WebSocket chiuso');\n    return () => {\n      Object.values(deviceTimeoutRef.current).forEach(clearTimeout);\n      ws.close();\n    };\n  }, []);\n\n  // ========== Assegna pilota a device ==========\n  const assignPilotToDevice = (mac, pilotIdValue) => {\n    // Normalizzo a numero se possibile\n    const parsed = pilotIdValue === '' ? '' : Number(pilotIdValue);\n    setDeviceAssignments(prev => ({\n      ...prev,\n      [mac]: parsed === '' || Number.isNaN(parsed) ? '' : parsed\n    }));\n  };\n\n  // ========== Avvia gara ==========\n  const handleStart = () => {\n    if (!selectedCircuit) {\n      alert('ATTENZIONE: seleziona un circuito!');\n      return;\n    }\n    const assignedDevices = Object.keys(deviceAssignments).filter(mac => deviceAssignments[mac] !== '' && deviceAssignments[mac] != null);\n    if (assignedDevices.length === 0) {\n      alert('ATTENZIONE: assegna almeno un pilota a un device attivo!');\n      return;\n    }\n\n    // Prepara configurazione gara\n    const selectedPilotIds = Object.values(deviceAssignments).filter(Boolean);\n    const selectedPilots = pilots.filter(p => selectedPilotIds.includes(p.id));\n    const raceConfig = {\n      circuit: selectedCircuit,\n      circuitData,\n      totalLaps,\n      assignments: deviceAssignments,\n      pilots: selectedPilots,\n      activeDevices: assignedDevices\n    };\n    onStartRace(raceConfig);\n  };\n  const activeMacs = Object.keys(activeDevices);\n  const assignedCount = Object.values(deviceAssignments).filter(Boolean).length;\n  const canStart = Boolean(selectedCircuit) && assignedCount > 0;\n\n  // Stile helper per card selezionate (riuso palette App.css)\n  const selectedStyle = {\n    borderColor: 'rgba(192, 255, 3, 0.55)',\n    boxShadow: '0 0 24px rgba(192,255,3,0.25)'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main small-top\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      style: {\n        marginBottom: 8\n      },\n      children: \"Configurazione Gara\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"subtitle\",\n      style: {\n        marginTop: 0,\n        marginBottom: 24\n      },\n      children: \"Seleziona il circuito, assegna i piloti ai device e imposta i giri. Tutto in stile RACESENSE.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 28\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"section-title\",\n        children: \"Circuito\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"actions\",\n        style: {\n          marginBottom: 16\n        },\n        children: circuits.map(circuit => {\n          const isSelected = selectedCircuit === circuit.id;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"action-card\",\n            role: \"button\",\n            tabIndex: 0,\n            onClick: () => setSelectedCircuit(circuit.id),\n            style: isSelected ? selectedStyle : undefined,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"action-icon\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                viewBox: \"0 0 24 24\",\n                className: \"icon\",\n                \"aria-hidden\": \"true\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M4 12a8 8 0 1 1 16 0v3a3 3 0 0 1-3 3h-2a1 1 0 1 1 0-2h2a1 1 0 0 0 1-1v-3a6 6 0 1 0-12 0v3a1 1 0 0 0 1 1h2a1 1 0 1 1 0 2H7a3 3 0 0 1-3-3v-3z\",\n                  fill: \"currentColor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: \"12\",\n                  cy: \"12\",\n                  r: \"2.25\",\n                  fill: \"currentColor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"action-title\",\n              children: circuit.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"action-desc\",\n              children: [\"Lunghezza ~ \", (circuit.lengthMeters || 0).toFixed(0), \" m \\u2022 Punti \", circuit.points || 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this)]\n          }, circuit.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), circuitData && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pilot-form\",\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(3, minmax(0, 1fr))',\n          gap: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"muted\",\n            children: \"Lunghezza\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [(_circuitData$stats$le = (_circuitData$stats = circuitData.stats) === null || _circuitData$stats === void 0 ? void 0 : (_circuitData$stats$le2 = _circuitData$stats.lengthMeters) === null || _circuitData$stats$le2 === void 0 ? void 0 : _circuitData$stats$le2.toFixed(0)) !== null && _circuitData$stats$le !== void 0 ? _circuitData$stats$le : '—', \" m\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 20\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"muted\",\n            children: \"Settori\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: (_circuitData$sectors$ = (_circuitData$sectors = circuitData.sectors) === null || _circuitData$sectors === void 0 ? void 0 : _circuitData$sectors.length) !== null && _circuitData$sectors$ !== void 0 ? _circuitData$sectors$ : 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 20\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"muted\",\n            children: \"Larghezza\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [(_circuitData$params$w = (_circuitData$params = circuitData.params) === null || _circuitData$params === void 0 ? void 0 : _circuitData$params.widthMeters) !== null && _circuitData$params$w !== void 0 ? _circuitData$params$w : 6, \" m\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 20\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 28\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n          marginBottom: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-title\",\n          style: {\n            margin: 0\n          },\n          children: \"Device attivi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly\",\n          style: {\n            background: 'rgba(192,255,3,0.15)',\n            borderColor: 'rgba(192,255,3,0.55)'\n          },\n          children: activeMacs.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"muted\",\n          children: \"in tempo reale via WebSocket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), activeMacs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dz\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dz-inner\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dz-label\",\n            children: \"Nessun device GPS attivo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dz-hint\",\n            children: \"Avvia il simulatore o connetti dispositivi GPS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pilots-grid\",\n        children: activeMacs.map(mac => {\n          const device = activeDevices[mac];\n          const assignedPilotId = deviceAssignments[mac];\n          const assignedPilot = pilots.find(p => p.id === assignedPilotId);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pilot-card\",\n            style: assignedPilotId ? selectedStyle : undefined,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pilot-photos col\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"photo tall\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"photo-placeholder\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontWeight: 700,\n                      color: 'var(--brand)'\n                    },\n                    children: \"GPS\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"muted\",\n                    style: {\n                      marginTop: 6\n                    },\n                    children: mac\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"photo small\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"photo-placeholder\",\n                  children: device ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"muted\",\n                    children: [device.lat.toFixed(6), \", \", device.lon.toFixed(6), \" \\xB7 \", device.speed.toFixed(1), \" km/h\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"muted\",\n                    children: \"In attesa dati\\u2026\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pilot-info wide\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pilot-name big\",\n                children: \"Assegnazione pilota\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pilot-team big muted\",\n                style: {\n                  marginBottom: 12\n                },\n                children: \"Seleziona il pilota da associare al device\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-row\",\n                style: {\n                  gridTemplateColumns: '1fr'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-col\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"muted\",\n                    children: \"Pilota\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"input\",\n                    value: assignedPilotId !== null && assignedPilotId !== void 0 ? assignedPilotId : '',\n                    onChange: e => assignPilotToDevice(mac, e.target.value),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"-- Seleziona --\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 27\n                    }, this), pilots.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: p.id,\n                      children: [p.name, \" \", p.surname, \" (\", p.team, \")\"]\n                    }, p.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 279,\n                      columnNumber: 29\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this), assignedPilot && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"pilot-chips\",\n                style: {\n                  marginTop: 10\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip readonly\",\n                  children: [\"#\", assignedPilot.id]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip readonly\",\n                  style: {\n                    background: 'rgba(192,255,3,0.15)'\n                  },\n                  children: assignedPilot.team\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"chip readonly\",\n                  style: {\n                    borderColor: 'rgba(192,255,3,0.55)'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      display: 'inline-block',\n                      width: 10,\n                      height: 10,\n                      borderRadius: '50%',\n                      background: assignedPilot.color || '#fff',\n                      marginRight: 6\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 27\n                  }, this), \"colore\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pilot-actions\",\n              children: assignedPilot ? /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-danger\",\n                onClick: () => assignPilotToDevice(mac, ''),\n                title: \"Rimuovi assegnazione\",\n                children: \"Rimuovi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"muted\",\n                children: \"non assegnato\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this)]\n          }, mac, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 28\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"section-title\",\n        children: \"Numero giri\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          gap: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-ghost\",\n          onClick: () => setTotalLaps(Math.max(1, totalLaps - 1)),\n          children: \"\\u2212\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pilot-form\",\n          style: {\n            padding: 12,\n            minWidth: 160\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"muted\",\n              style: {\n                marginBottom: 6\n              },\n              children: \"Giri\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 900,\n                fontSize: '1.8rem',\n                color: 'var(--brand)'\n              },\n              children: totalLaps\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-ghost\",\n          onClick: () => setTotalLaps(totalLaps + 1),\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cta-wrapper\",\n      style: {\n        marginTop: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"big-cta\",\n        disabled: !canStart,\n        onClick: handleStart,\n        \"aria-label\": \"Avvia gara\",\n        children: \"START RACE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"cta-hint\",\n        children: canStart ? `${assignedCount} ${assignedCount === 1 ? 'pilota' : 'piloti'} × ${totalLaps} giri` + (selectedCircuit ? ` • circuito #${selectedCircuit}` : '') : 'Seleziona circuito e assegna almeno un pilota a un device'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n}\n_s(RaceSetup, \"bc1jP4zYp5bfG85OoO5LIR+JWnk=\");\n_c = RaceSetup;\nvar _c;\n$RefreshReg$(_c, \"RaceSetup\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","window","location","hostname","WS_URL","REACT_APP_WS_URL","RaceSetup","onStartRace","_s","_circuitData$stats$le","_circuitData$stats","_circuitData$stats$le2","_circuitData$sectors$","_circuitData$sectors","_circuitData$params$w","_circuitData$params","circuits","setCircuits","pilots","setPilots","selectedCircuit","setSelectedCircuit","circuitData","setCircuitData","totalLaps","setTotalLaps","activeDevices","setActiveDevices","deviceAssignments","setDeviceAssignments","wsRef","deviceTimeoutRef","fetch","then","r","json","data","catch","e","console","error","ws","WebSocket","current","onopen","log","onmessage","event","JSON","parse","mac","lat","lon","String","Number","speed","speedKmh","prev","lastSeen","Date","now","clearTimeout","setTimeout","updated","err","onerror","onclose","Object","values","forEach","close","assignPilotToDevice","pilotIdValue","parsed","isNaN","handleStart","alert","assignedDevices","keys","filter","length","selectedPilotIds","Boolean","selectedPilots","p","includes","id","raceConfig","circuit","assignments","activeMacs","assignedCount","canStart","selectedStyle","borderColor","boxShadow","className","children","style","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","map","isSelected","role","tabIndex","onClick","undefined","viewBox","d","fill","cx","cy","name","lengthMeters","toFixed","points","display","gridTemplateColumns","gap","stats","sectors","params","widthMeters","alignItems","margin","background","device","assignedPilotId","assignedPilot","find","fontWeight","color","value","onChange","target","surname","team","width","height","borderRadius","marginRight","title","justifyContent","Math","max","padding","minWidth","textAlign","fontSize","disabled","_c","$RefreshReg$"],"sources":["/home/ubuntu/racesense/racesense-frontend/src/pages/RaceSetup.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport '../App.css';\n\nconst API_BASE = process.env.REACT_APP_API_BASE || `http://${window.location.hostname}:5000`;\nconst WS_URL = process.env.REACT_APP_WS_URL || `ws://${window.location.hostname}:5001`;\n\nexport default function RaceSetup({ onStartRace }) {\n  const [circuits, setCircuits] = useState([]);\n  const [pilots, setPilots] = useState([]);\n\n  const [selectedCircuit, setSelectedCircuit] = useState(null);\n  const [circuitData, setCircuitData] = useState(null);\n\n  const [totalLaps, setTotalLaps] = useState(10);\n\n  // Device attivi rilevati in tempo reale\n  const [activeDevices, setActiveDevices] = useState({}); // { MAC: { lastSeen, lat, lon, speed, data } }\n  const [deviceAssignments, setDeviceAssignments] = useState({}); // { MAC: pilotId }\n\n  const wsRef = useRef(null);\n  const deviceTimeoutRef = useRef({});\n\n  // ========== Carica circuiti e piloti ==========\n  useEffect(() => {\n    fetch(`${API_BASE}/api/circuits`)\n      .then(r => r.json())\n      .then(data => setCircuits(data))\n      .catch(e => console.error('Errore caricamento circuiti:', e));\n\n    fetch(`${API_BASE}/api/pilots`)\n      .then(r => r.json())\n      .then(data => setPilots(data))\n      .catch(e => console.error('Errore caricamento piloti:', e));\n  }, []);\n\n  // ========== Carica dettagli circuito selezionato ==========\n  useEffect(() => {\n    if (!selectedCircuit) return;\n\n    fetch(`${API_BASE}/api/circuits/${selectedCircuit}`)\n      .then(r => r.json())\n      .then(data => setCircuitData(data))\n      .catch(e => console.error('Errore caricamento circuito:', e));\n  }, [selectedCircuit]);\n\n  // ========== WebSocket per rilevare device attivi ==========\n  useEffect(() => {\n    const ws = new WebSocket(WS_URL);\n    wsRef.current = ws;\n\n    ws.onopen = () => {\n      console.log('[RaceSetup] WebSocket connesso - in ascolto per device attivi');\n    };\n\n    ws.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n        // Formato: { mac, lat, lon, speedKmh, ... }\n        if (data.mac && data.lat && data.lon) {\n          const mac = String(data.mac);\n          const lat = Number(data.lat);\n          const lon = Number(data.lon);\n          const speed = Number(data.speedKmh || 0);\n\n          setActiveDevices(prev => ({\n            ...prev,\n            [mac]: {\n              lastSeen: Date.now(),\n              lat,\n              lon,\n              speed,\n              data\n            }\n          }));\n\n          // Resetta timeout per questo device\n          if (deviceTimeoutRef.current[mac]) {\n            clearTimeout(deviceTimeoutRef.current[mac]);\n          }\n\n          // Rimuovi device se inattivo per 6s (leggero buffer)\n          deviceTimeoutRef.current[mac] = setTimeout(() => {\n            setActiveDevices(prev => {\n              const updated = { ...prev };\n              delete updated[mac];\n              return updated;\n            });\n          }, 6000);\n        }\n      } catch (err) {\n        console.error('Errore parsing GPS:', err);\n      }\n    };\n\n    ws.onerror = (err) => console.error('[RaceSetup] WebSocket errore:', err);\n    ws.onclose = () => console.log('[RaceSetup] WebSocket chiuso');\n\n    return () => {\n      Object.values(deviceTimeoutRef.current).forEach(clearTimeout);\n      ws.close();\n    };\n  }, []);\n\n  // ========== Assegna pilota a device ==========\n  const assignPilotToDevice = (mac, pilotIdValue) => {\n    // Normalizzo a numero se possibile\n    const parsed = pilotIdValue === '' ? '' : Number(pilotIdValue);\n    setDeviceAssignments(prev => ({\n      ...prev,\n      [mac]: parsed === '' || Number.isNaN(parsed) ? '' : parsed\n    }));\n  };\n\n  // ========== Avvia gara ==========\n  const handleStart = () => {\n    if (!selectedCircuit) {\n      alert('ATTENZIONE: seleziona un circuito!');\n      return;\n    }\n\n    const assignedDevices = Object.keys(deviceAssignments).filter(mac => deviceAssignments[mac] !== '' && deviceAssignments[mac] != null);\n\n    if (assignedDevices.length === 0) {\n      alert('ATTENZIONE: assegna almeno un pilota a un device attivo!');\n      return;\n    }\n\n    // Prepara configurazione gara\n    const selectedPilotIds = Object.values(deviceAssignments).filter(Boolean);\n    const selectedPilots = pilots.filter(p => selectedPilotIds.includes(p.id));\n\n    const raceConfig = {\n      circuit: selectedCircuit,\n      circuitData,\n      totalLaps,\n      assignments: deviceAssignments,\n      pilots: selectedPilots,\n      activeDevices: assignedDevices\n    };\n\n    onStartRace(raceConfig);\n  };\n\n  const activeMacs = Object.keys(activeDevices);\n  const assignedCount = Object.values(deviceAssignments).filter(Boolean).length;\n  const canStart = Boolean(selectedCircuit) && assignedCount > 0;\n\n  // Stile helper per card selezionate (riuso palette App.css)\n  const selectedStyle = {\n    borderColor: 'rgba(192, 255, 3, 0.55)',\n    boxShadow: '0 0 24px rgba(192,255,3,0.25)'\n  };\n\n  return (\n    <div className=\"main small-top\">\n      {/* Titolo pagina */}\n      <h2 className=\"section-title\" style={{ marginBottom: 8 }}>\n        Configurazione Gara\n      </h2>\n      <p className=\"subtitle\" style={{ marginTop: 0, marginBottom: 24 }}>\n        Seleziona il circuito, assegna i piloti ai device e imposta i giri. Tutto in stile RACESENSE.\n      </p>\n\n      {/* Sezione Circuito */}\n      <section style={{ marginBottom: 28 }}>\n        <h3 className=\"section-title\">Circuito</h3>\n\n        <div className=\"actions\" style={{ marginBottom: 16 }}>\n          {circuits.map(circuit => {\n            const isSelected = selectedCircuit === circuit.id;\n            return (\n              <div\n                key={circuit.id}\n                className=\"action-card\"\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => setSelectedCircuit(circuit.id)}\n                style={isSelected ? selectedStyle : undefined}\n              >\n                <div className=\"action-icon\">\n                  {/* Piccola icona pista (riuso stile) */}\n                  <svg viewBox=\"0 0 24 24\" className=\"icon\" aria-hidden=\"true\">\n                    <path d=\"M4 12a8 8 0 1 1 16 0v3a3 3 0 0 1-3 3h-2a1 1 0 1 1 0-2h2a1 1 0 0 0 1-1v-3a6 6 0 1 0-12 0v3a1 1 0 0 0 1 1h2a1 1 0 1 1 0 2H7a3 3 0 0 1-3-3v-3z\" fill=\"currentColor\" />\n                    <circle cx=\"12\" cy=\"12\" r=\"2.25\" fill=\"currentColor\" />\n                  </svg>\n                </div>\n                <h4 className=\"action-title\">{circuit.name}</h4>\n                <p className=\"action-desc\">\n                  Lunghezza ~ {(circuit.lengthMeters || 0).toFixed(0)} m • Punti {circuit.points || 0}\n                </p>\n              </div>\n            );\n          })}\n        </div>\n\n        {circuitData && (\n          <div\n            className=\"pilot-form\"\n            style={{ display: 'grid', gridTemplateColumns: 'repeat(3, minmax(0, 1fr))', gap: 12 }}\n          >\n            <div>\n              <div className=\"muted\">Lunghezza</div>\n              <div><strong>{circuitData.stats?.lengthMeters?.toFixed(0) ?? '—'} m</strong></div>\n            </div>\n            <div>\n              <div className=\"muted\">Settori</div>\n              <div><strong>{circuitData.sectors?.length ?? 0}</strong></div>\n            </div>\n            <div>\n              <div className=\"muted\">Larghezza</div>\n              <div><strong>{circuitData.params?.widthMeters ?? 6} m</strong></div>\n            </div>\n          </div>\n        )}\n      </section>\n\n      {/* Sezione Device e Assegnazioni */}\n      <section style={{ marginBottom: 28 }}>\n        <div style={{ display: 'flex', alignItems: 'center', gap: 10, marginBottom: 12 }}>\n          <h3 className=\"section-title\" style={{ margin: 0 }}>Device attivi</h3>\n          <span className=\"chip readonly\" style={{ background: 'rgba(192,255,3,0.15)', borderColor: 'rgba(192,255,3,0.55)' }}>\n            {activeMacs.length}\n          </span>\n          <span className=\"muted\">in tempo reale via WebSocket</span>\n        </div>\n\n        {activeMacs.length === 0 ? (\n          <div className=\"dz\">\n            <div className=\"dz-inner\">\n              <span className=\"dz-label\">Nessun device GPS attivo</span>\n              <span className=\"dz-hint\">Avvia il simulatore o connetti dispositivi GPS</span>\n            </div>\n          </div>\n        ) : (\n          <div className=\"pilots-grid\">\n            {activeMacs.map(mac => {\n              const device = activeDevices[mac];\n              const assignedPilotId = deviceAssignments[mac];\n              const assignedPilot = pilots.find(p => p.id === assignedPilotId);\n\n              return (\n                <div key={mac} className=\"pilot-card\" style={assignedPilotId ? selectedStyle : undefined}>\n                  {/* Colonna “foto/colore” */}\n                  <div className=\"pilot-photos col\">\n                    <div className=\"photo tall\">\n                      <div className=\"photo-placeholder\">\n                        <div style={{ fontWeight: 700, color: 'var(--brand)' }}>GPS</div>\n                        <div className=\"muted\" style={{ marginTop: 6 }}>{mac}</div>\n                      </div>\n                    </div>\n                    <div className=\"photo small\">\n                      <div className=\"photo-placeholder\">\n                        {device ? (\n                          <span className=\"muted\">\n                            {device.lat.toFixed(6)}, {device.lon.toFixed(6)} · {device.speed.toFixed(1)} km/h\n                          </span>\n                        ) : <span className=\"muted\">In attesa dati…</span>}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Colonna info */}\n                  <div className=\"pilot-info wide\">\n                    <div className=\"pilot-name big\">Assegnazione pilota</div>\n                    <div className=\"pilot-team big muted\" style={{ marginBottom: 12 }}>\n                      Seleziona il pilota da associare al device\n                    </div>\n\n                    <div className=\"form-row\" style={{ gridTemplateColumns: '1fr' }}>\n                      <div className=\"form-col\">\n                        <label className=\"muted\">Pilota</label>\n                        <select\n                          className=\"input\"\n                          value={assignedPilotId ?? ''}\n                          onChange={(e) => assignPilotToDevice(mac, e.target.value)}\n                        >\n                          <option value=\"\">-- Seleziona --</option>\n                          {pilots.map(p => (\n                            <option key={p.id} value={p.id}>\n                              {p.name} {p.surname} ({p.team})\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n\n                    {assignedPilot && (\n                      <div className=\"pilot-chips\" style={{ marginTop: 10 }}>\n                        <span className=\"chip readonly\">\n                          #{assignedPilot.id}\n                        </span>\n                        <span className=\"chip readonly\" style={{ background: 'rgba(192,255,3,0.15)' }}>\n                          {assignedPilot.team}\n                        </span>\n                        <span className=\"chip readonly\" style={{ borderColor: 'rgba(192,255,3,0.55)' }}>\n                          <span style={{\n                            display: 'inline-block',\n                            width: 10, height: 10,\n                            borderRadius: '50%',\n                            background: assignedPilot.color || '#fff',\n                            marginRight: 6\n                          }} />\n                          colore\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Colonna azioni */}\n                  <div className=\"pilot-actions\">\n                    {assignedPilot ? (\n                      <button\n                        className=\"btn-danger\"\n                        onClick={() => assignPilotToDevice(mac, '')}\n                        title=\"Rimuovi assegnazione\"\n                      >\n                        Rimuovi\n                      </button>\n                    ) : (\n                      <span className=\"muted\">non assegnato</span>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </section>\n\n      {/* Sezione Numero giri */}\n      <section style={{ marginBottom: 28 }}>\n        <h3 className=\"section-title\">Numero giri</h3>\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', gap: 12 }}>\n          <button className=\"btn-ghost\" onClick={() => setTotalLaps(Math.max(1, totalLaps - 1))}>−</button>\n          <div className=\"pilot-form\" style={{ padding: 12, minWidth: 160 }}>\n            <div style={{ textAlign: 'center' }}>\n              <div className=\"muted\" style={{ marginBottom: 6 }}>Giri</div>\n              <div style={{ fontWeight: 900, fontSize: '1.8rem', color: 'var(--brand)' }}>{totalLaps}</div>\n            </div>\n          </div>\n          <button className=\"btn-ghost\" onClick={() => setTotalLaps(totalLaps + 1)}>+</button>\n        </div>\n      </section>\n\n      {/* CTA Avvio */}\n      <div className=\"cta-wrapper\" style={{ marginTop: 10 }}>\n        <button\n          className=\"big-cta\"\n          disabled={!canStart}\n          onClick={handleStart}\n          aria-label=\"Avvia gara\"\n        >\n          START RACE\n        </button>\n        <p className=\"cta-hint\">\n          {canStart\n            ? `${assignedCount} ${assignedCount === 1 ? 'pilota' : 'piloti'} × ${totalLaps} giri` +\n            (selectedCircuit ? ` • circuito #${selectedCircuit}` : '')\n            : 'Seleziona circuito e assegna almeno un pilota a un device'}\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}