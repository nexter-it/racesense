{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/racesense/racesense-frontend/src/pages/PilotLive.jsx\",\n  _s = $RefreshSig$();\n// src/pages/PilotLive.jsx\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport '../App.css';\nimport { colorFromName } from '../utils/colors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE || `http://${window.location.hostname}:5000`;\nconst WS_URL = process.env.REACT_APP_WS_URL || `ws://${window.location.hostname}:5001`;\nconst formatLap = s => {\n  if (!s && s !== 0) return '—';\n  const m = Math.floor(s / 60);\n  const sec = (s % 60).toFixed(3);\n  return `${m}:${sec.padStart(6, '0')}`;\n};\nexport default function PilotLive() {\n  _s();\n  var _circuit$sectors2, _circuit$stats, _circuit$params2, _circuit$sectors3, _driver$position, _driver$lapCount, _driver$speedKmh, _driver$penalty, _driver$lastSectorTim, _driver$lastSectorTim2, _driver$sectorTimes, _driver$lastSectorTim3, _driver$lastSectorTim4, _driver$sectorTimes2, _driver$lastSectorTim5, _driver$lastSectorTim6, _driver$sectorTimes3, _driver$gforce$lat$to, _driver$gforce, _driver$gforce$lat, _driver$gforce$lat$to2, _driver$gforce$long$t, _driver$gforce2, _driver$gforce2$long, _driver$gforce2$long$, _driver$gforce$vert$t, _driver$gforce3, _driver$gforce3$vert, _driver$gforce3$vert$, _driver$gforce$total$, _driver$gforce4, _driver$gforce4$total, _driver$gforce4$total2, _driver$lapTimes;\n  const {\n    mac\n  } = useParams();\n  const navigate = useNavigate();\n  const [circuit, setCircuit] = useState(null);\n  const [raceStatus, setRaceStatus] = useState('IN CORSO');\n  const [totalLaps, setTotalLaps] = useState(0);\n  const [driver, setDriver] = useState(null);\n  const color = useMemo(() => colorFromName((driver === null || driver === void 0 ? void 0 : driver.fullName) || (driver === null || driver === void 0 ? void 0 : driver.tag) || mac), [driver === null || driver === void 0 ? void 0 : driver.fullName, driver === null || driver === void 0 ? void 0 : driver.tag, mac]);\n\n  // trail\n  const trailsRef = useRef([]);\n  const TRAIL_MAX_AGE_MS = 20000;\n  const TRAIL_MAX_LEN = 110;\n\n  // canvas & interazione\n  const canvasRef = useRef(null);\n  const animFrameRef = useRef(null);\n  const zoomRef = useRef(1);\n  const panRef = useRef({\n    x: 0,\n    y: 0\n  });\n\n  // pinch/pan\n  const pointersRef = useRef(new Map());\n  const pinchStartRef = useRef({\n    dist: 0,\n    zoom: 1,\n    last: {\n      x: 0,\n      y: 0\n    }\n  });\n  useEffect(() => {\n    let cancelled = false;\n    const load = async () => {\n      try {\n        var _j$circuit, _j$circuit$sectors, _j$circuit2;\n        const r = await fetch(`${API_BASE}/api/race/pilot/${mac}`);\n        if (!r.ok) throw new Error('Pilota non trovato o gara non attiva');\n        const j = await r.json();\n        if (cancelled) return;\n        setRaceStatus(j.raceStatus || 'IN CORSO');\n        setTotalLaps(j.totalLaps || 0);\n        setDriver(j.pilot || null);\n        if ((_j$circuit = j.circuit) !== null && _j$circuit !== void 0 && (_j$circuit$sectors = _j$circuit.sectors) !== null && _j$circuit$sectors !== void 0 && _j$circuit$sectors.length) {\n          setCircuit(j.circuit);\n        } else if ((_j$circuit2 = j.circuit) !== null && _j$circuit2 !== void 0 && _j$circuit2.id) {\n          try {\n            const rc = await fetch(`${API_BASE}/api/circuits/${j.circuit.id}`);\n            if (rc.ok) {\n              const full = await rc.json();\n              setCircuit({\n                id: j.circuit.id,\n                name: full.name || j.circuit.id,\n                stats: full.stats || {},\n                params: full.params || {},\n                sectors: full.sectors || [],\n                customSectors: full.customSectors || []\n              });\n            } else {\n              setCircuit(j.circuit);\n            }\n          } catch {\n            setCircuit(j.circuit);\n          }\n        } else {\n          setCircuit(null);\n        }\n      } catch (e) {\n        console.error(e);\n        setDriver(null);\n        setCircuit(null);\n      }\n    };\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [mac]);\n  useEffect(() => {\n    const ws = new WebSocket(WS_URL);\n    ws.onmessage = async event => {\n      try {\n        const data = JSON.parse(event.data);\n        if ((data === null || data === void 0 ? void 0 : data.type) === 'race_init') {\n          var _data$circuit, _data$circuit$sectors;\n          if ((_data$circuit = data.circuit) !== null && _data$circuit !== void 0 && (_data$circuit$sectors = _data$circuit.sectors) !== null && _data$circuit$sectors !== void 0 && _data$circuit$sectors.length) setCircuit(data.circuit);\n          setRaceStatus(data.raceStatus || 'IN CORSO');\n          setTotalLaps(data.totalLaps || 0);\n          return;\n        }\n        if ((data === null || data === void 0 ? void 0 : data.type) === 'race_snapshot') {\n          var _circuit$sectors, _data$circuit2;\n          setRaceStatus(data.raceStatus || 'IN CORSO');\n          setTotalLaps(data.totalLaps || 0);\n          if (!(circuit !== null && circuit !== void 0 && (_circuit$sectors = circuit.sectors) !== null && _circuit$sectors !== void 0 && _circuit$sectors.length) && (_data$circuit2 = data.circuit) !== null && _data$circuit2 !== void 0 && _data$circuit2.id) {\n            try {\n              const rc = await fetch(`${API_BASE}/api/circuits/${data.circuit.id}`);\n              if (rc.ok) {\n                const full = await rc.json();\n                setCircuit({\n                  id: data.circuit.id,\n                  name: full.name || data.circuit.id,\n                  stats: full.stats || {},\n                  params: full.params || {},\n                  sectors: full.sectors || [],\n                  customSectors: full.customSectors || []\n                });\n              } else {\n                setCircuit(data.circuit);\n              }\n            } catch {\n              setCircuit(data.circuit);\n            }\n          }\n          const d = (data.drivers || []).find(x => String(x.mac).toUpperCase() === String(mac).toUpperCase());\n          if (d) {\n            const now = Date.now();\n            const t = trailsRef.current || [];\n            trailsRef.current = [...t, {\n              lat: d.lat,\n              lon: d.lon,\n              ts: now\n            }].slice(-TRAIL_MAX_LEN);\n            setDriver(prev => {\n              var _ref, _d$lapTimes;\n              return {\n                ...(d || {}),\n                lapTimes: (_ref = (_d$lapTimes = d.lapTimes) !== null && _d$lapTimes !== void 0 ? _d$lapTimes : prev === null || prev === void 0 ? void 0 : prev.lapTimes) !== null && _ref !== void 0 ? _ref : []\n              };\n            });\n          }\n        } else if ((data === null || data === void 0 ? void 0 : data.type) === 'race_inactive') {\n          setRaceStatus('FINITA');\n        }\n      } catch {}\n    };\n    ws.onerror = e => console.error('[PilotLive] WS error', e);\n    return () => {\n      try {\n        ws.close();\n      } catch {}\n    };\n  }, [mac, circuit === null || circuit === void 0 ? void 0 : (_circuit$sectors2 = circuit.sectors) === null || _circuit$sectors2 === void 0 ? void 0 : _circuit$sectors2.length]);\n  useEffect(() => {\n    if (!circuit || !Array.isArray(circuit.sectors) || circuit.sectors.length === 0 || !canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d', {\n      alpha: false\n    });\n    const dpr = window.devicePixelRatio || 1;\n    canvas.style.touchAction = 'none'; // important per iOS/Android\n\n    const ensureSize = () => {\n      const w = canvas.parentElement.clientWidth || 600;\n      const h = canvas.parentElement.clientHeight || 520;\n      if (canvas.width !== Math.floor(w * dpr) || canvas.height !== Math.floor(h * dpr)) {\n        canvas.width = Math.floor(w * dpr);\n        canvas.height = Math.floor(h * dpr);\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n      }\n    };\n    const onResize = () => ensureSize();\n    ensureSize();\n    window.addEventListener('resize', onResize);\n\n    // proiezione\n    const lats = circuit.sectors.map(s => s.lat);\n    const lons = circuit.sectors.map(s => s.lon);\n    const minLat = Math.min(...lats),\n      maxLat = Math.max(...lats);\n    const minLon = Math.min(...lons),\n      maxLon = Math.max(...lons);\n    const centerLat = (minLat + maxLat) / 2,\n      centerLon = (minLon + maxLon) / 2;\n    const R = 6371000,\n      centerLatRad = centerLat * Math.PI / 180;\n    const dxList = lons.map(l => (l - centerLon) * Math.PI / 180 * R * Math.cos(centerLatRad));\n    const dyList = lats.map(l => (l - centerLat) * Math.PI / 180 * R);\n    const maxDx = Math.max(...dxList.map(Math.abs));\n    const maxDy = Math.max(...dyList.map(Math.abs));\n    const padding = 40;\n    const project = (lat, lon) => {\n      const w = canvas.width / dpr,\n        h = canvas.height / dpr;\n      const maxRange = Math.max(maxDx, maxDy) * 1.1;\n      const scale = Math.min(w - padding * 2, h - padding * 2) / (maxRange * 2) * zoomRef.current;\n      const dx = (lon - centerLon) * Math.PI / 180 * R * Math.cos(centerLatRad);\n      const dy = (lat - centerLat) * Math.PI / 180 * R;\n      return {\n        x: w / 2 + dx * scale + panRef.current.x,\n        y: h / 2 - dy * scale + panRef.current.y,\n        scale\n      };\n    };\n\n    // wheel desktop\n    const onWheel = e => {\n      e.preventDefault();\n      const dir = e.deltaY > 0 ? 0.9 : 1.1;\n      zoomRef.current = Math.max(0.5, Math.min(6, zoomRef.current * dir));\n    };\n    canvas.addEventListener('wheel', onWheel, {\n      passive: false\n    });\n\n    // pointer touch (pinch/pan)\n    const onPointerDown = ev => {\n      var _canvas$setPointerCap;\n      (_canvas$setPointerCap = canvas.setPointerCapture) === null || _canvas$setPointerCap === void 0 ? void 0 : _canvas$setPointerCap.call(canvas, ev.pointerId);\n      pointersRef.current.set(ev.pointerId, {\n        x: ev.clientX,\n        y: ev.clientY\n      });\n      if (pointersRef.current.size === 1) {\n        pinchStartRef.current.last = {\n          x: ev.clientX,\n          y: ev.clientY\n        };\n      } else if (pointersRef.current.size === 2) {\n        const pts = Array.from(pointersRef.current.values());\n        const dx = pts[0].x - pts[1].x;\n        const dy = pts[0].y - pts[1].y;\n        pinchStartRef.current.dist = Math.hypot(dx, dy);\n        pinchStartRef.current.zoom = zoomRef.current;\n      }\n    };\n    const onPointerMove = ev => {\n      if (!pointersRef.current.has(ev.pointerId)) return;\n      pointersRef.current.set(ev.pointerId, {\n        x: ev.clientX,\n        y: ev.clientY\n      });\n      if (pointersRef.current.size === 1) {\n        const p = pointersRef.current.get(ev.pointerId);\n        panRef.current.x += p.x - pinchStartRef.current.last.x;\n        panRef.current.y += p.y - pinchStartRef.current.last.y;\n        pinchStartRef.current.last = {\n          ...p\n        };\n      } else if (pointersRef.current.size === 2) {\n        const pts = Array.from(pointersRef.current.values());\n        const dx = pts[0].x - pts[1].x;\n        const dy = pts[0].y - pts[1].y;\n        const dist = Math.hypot(dx, dy);\n        if (pinchStartRef.current.dist > 0) {\n          const ratio = dist / pinchStartRef.current.dist;\n          zoomRef.current = Math.max(0.5, Math.min(6, pinchStartRef.current.zoom * ratio));\n        }\n      }\n      ev.preventDefault();\n    };\n    const onPointerUp = ev => {\n      var _canvas$releasePointe;\n      (_canvas$releasePointe = canvas.releasePointerCapture) === null || _canvas$releasePointe === void 0 ? void 0 : _canvas$releasePointe.call(canvas, ev.pointerId);\n      pointersRef.current.delete(ev.pointerId);\n      if (pointersRef.current.size < 2) {\n        pinchStartRef.current.dist = 0;\n      }\n    };\n    canvas.addEventListener('pointerdown', onPointerDown, {\n      passive: false\n    });\n    canvas.addEventListener('pointermove', onPointerMove, {\n      passive: false\n    });\n    canvas.addEventListener('pointerup', onPointerUp);\n    canvas.addEventListener('pointercancel', onPointerUp);\n    canvas.addEventListener('pointerleave', onPointerUp);\n\n    // render\n    const draw = () => {\n      var _circuit$params$width, _circuit$params, _pts$;\n      ensureSize();\n      const w = canvas.width / dpr,\n        h = canvas.height / dpr;\n      ctx.fillStyle = '#0a0a0a';\n      ctx.fillRect(0, 0, w, h);\n      const widthMeters = (_circuit$params$width = circuit === null || circuit === void 0 ? void 0 : (_circuit$params = circuit.params) === null || _circuit$params === void 0 ? void 0 : _circuit$params.widthMeters) !== null && _circuit$params$width !== void 0 ? _circuit$params$width : 6;\n      const pts = circuit.sectors.map(s => project(s.lat, s.lon));\n      const scale = ((_pts$ = pts[0]) === null || _pts$ === void 0 ? void 0 : _pts$.scale) || 1;\n      const trackPx = Math.max(6, widthMeters * scale);\n\n      // pista\n      // === BORDO ESTERNO COLORATO PER SETTORI ===\n      const sectors = circuit.customSectors || [];\n      if (Array.isArray(sectors) && sectors.length > 0) {\n        sectors.forEach((sector, idx) => {\n          if (sector.startIdx == null || sector.endIdx == null) return;\n          const start = Math.max(0, Math.min(sector.startIdx, circuit.sectors.length - 1));\n          const end = Math.max(0, Math.min(sector.endIdx, circuit.sectors.length - 1));\n          if (end <= start) return;\n          const color = sector.color || ['#ff0000', '#00ff00', '#0000ff'][idx % 3];\n          ctx.save();\n          ctx.lineCap = 'round';\n          ctx.lineJoin = 'round';\n          ctx.strokeStyle = color;\n          ctx.lineWidth = trackPx + 3;\n          ctx.globalAlpha = 0.35;\n          ctx.beginPath();\n          for (let i = start; i <= end; i++) {\n            const p = project(circuit.sectors[i].lat, circuit.sectors[i].lon);\n            if (i === start) ctx.moveTo(p.x, p.y);else ctx.lineTo(p.x, p.y);\n          }\n          ctx.stroke();\n          ctx.restore();\n        });\n      } else {\n        // fallback: bordo uniforme tenue\n        ctx.strokeStyle = 'rgba(255,255,255,0.10)';\n        ctx.lineWidth = trackPx + 3;\n        ctx.lineCap = 'round';\n        ctx.lineJoin = 'round';\n        ctx.beginPath();\n        pts.forEach((p, i) => i ? ctx.lineTo(p.x, p.y) : ctx.moveTo(p.x, p.y));\n        ctx.closePath();\n        ctx.stroke();\n      }\n\n      // asfalto\n      ctx.strokeStyle = 'rgba(80,84,90,0.95)';\n      ctx.lineWidth = trackPx;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n      ctx.beginPath();\n      pts.forEach((p, i) => i ? ctx.lineTo(p.x, p.y) : ctx.moveTo(p.x, p.y));\n      ctx.closePath();\n      ctx.stroke();\n\n      // start\n      if (pts.length > 1) {\n        const s0 = pts[0],\n          s1 = pts[1];\n        const ang = Math.atan2(s1.y - s0.y, s1.x - s0.x);\n        ctx.save();\n        ctx.translate(s0.x, s0.y);\n        ctx.rotate(ang);\n        ctx.strokeStyle = '#ffffff';\n        ctx.lineWidth = Math.max(2, trackPx * 0.12);\n        ctx.beginPath();\n        ctx.moveTo(0, -trackPx * 0.5);\n        ctx.lineTo(0, trackPx * 0.5);\n        ctx.stroke();\n        ctx.restore();\n      }\n\n      // trail\n      const now = Date.now();\n      trailsRef.current = (trailsRef.current || []).filter(p => now - p.ts <= TRAIL_MAX_AGE_MS).slice(-TRAIL_MAX_LEN);\n      const trail = trailsRef.current || [];\n      if (trail.length > 1) {\n        for (let t = 1; t < trail.length; t++) {\n          const prev = project(trail[t - 1].lat, trail[t - 1].lon);\n          const cur = project(trail[t].lat, trail[t].lon);\n          const ageFrac = Math.min(1, (now - trail[t].ts) / TRAIL_MAX_AGE_MS);\n          const alpha = 0.8 * (1 - ageFrac);\n          let rgba = color;\n          if (color.startsWith('#')) {\n            const hex = color.slice(1),\n              full = hex.length === 3 ? hex.split('').map(c => c + c).join('') : hex;\n            const v = parseInt(full, 16),\n              r = v >> 16 & 255,\n              g = v >> 8 & 255,\n              b = v & 255;\n            rgba = `rgba(${r},${g},${b},${alpha})`;\n          }\n          ctx.strokeStyle = rgba;\n          ctx.lineWidth = Math.max(2, trackPx * 0.12);\n          ctx.beginPath();\n          ctx.moveTo(prev.x, prev.y);\n          ctx.lineTo(cur.x, cur.y);\n          ctx.stroke();\n        }\n      }\n\n      // dot\n      if (driver) {\n        const p = project(driver.lat, driver.lon);\n        const r = Math.max(6, trackPx * 0.2);\n        let fill = color;\n        if (fill.startsWith('#')) {\n          const hex = fill.slice(1),\n            full = hex.length === 3 ? hex.split('').map(c => c + c).join('') : hex;\n          const v = parseInt(full, 16),\n            rr = v >> 16 & 255,\n            gg = v >> 8 & 255,\n            bb = v & 255;\n          fill = `rgba(${rr},${gg},${bb},1)`;\n        }\n        ctx.shadowColor = 'rgba(0,0,0,0.5)';\n        ctx.shadowBlur = 4;\n        ctx.fillStyle = fill;\n        ctx.beginPath();\n        ctx.arc(p.x, p.y, r, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.shadowBlur = 0;\n        ctx.strokeStyle = '#fff';\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        ctx.fillStyle = '#fff';\n        ctx.font = 'bold 11px Roboto, sans-serif';\n        ctx.textAlign = 'center';\n        ctx.fillText(driver.tag || 'PIL', p.x, p.y - (r + 10));\n      }\n      animFrameRef.current = requestAnimationFrame(draw);\n    };\n    draw();\n    return () => {\n      window.removeEventListener('resize', onResize);\n      canvas.removeEventListener('wheel', onWheel);\n      canvas.removeEventListener('pointerdown', onPointerDown);\n      canvas.removeEventListener('pointermove', onPointerMove);\n      canvas.removeEventListener('pointerup', onPointerUp);\n      canvas.removeEventListener('pointercancel', onPointerUp);\n      canvas.removeEventListener('pointerleave', onPointerUp);\n      if (animFrameRef.current) cancelAnimationFrame(animFrameRef.current);\n    };\n  }, [circuit, driver, color]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main small-top\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rs-live-topbar rs-live-topbar--glass\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rs-chip-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          children: \"PILOTA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          style: {\n            fontWeight: 800\n          },\n          children: (driver === null || driver === void 0 ? void 0 : driver.tag) || mac\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          children: (driver === null || driver === void 0 ? void 0 : driver.fullName) || '—'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          children: [totalLaps, \" giri\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          style: {\n            background: 'rgba(21,193,48,.22)',\n            color: '#dfffe9',\n            fontWeight: 900\n          },\n          children: raceStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          children: (circuit === null || circuit === void 0 ? void 0 : circuit.name) || (circuit === null || circuit === void 0 ? void 0 : circuit.id) || 'Circuito'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this), (circuit === null || circuit === void 0 ? void 0 : (_circuit$stats = circuit.stats) === null || _circuit$stats === void 0 ? void 0 : _circuit$stats.lengthMeters) && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          children: [circuit.stats.lengthMeters.toFixed(0), \" m\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 54\n        }, this), (circuit === null || circuit === void 0 ? void 0 : (_circuit$params2 = circuit.params) === null || _circuit$params2 === void 0 ? void 0 : _circuit$params2.widthMeters) && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chip readonly pill\",\n          children: [circuit.params.widthMeters, \" m larghezza\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 54\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-ghost\",\n          onClick: () => navigate('/race'),\n          style: {\n            whiteSpace: 'nowrap'\n          },\n          children: \"\\u2B05 Torna alla gara\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rs-live-grid\",\n      style: {\n        gridTemplateColumns: '1fr 420px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-card\",\n        children: [!(circuit !== null && circuit !== void 0 && (_circuit$sectors3 = circuit.sectors) !== null && _circuit$sectors3 !== void 0 && _circuit$sectors3.length) && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            inset: 0,\n            display: 'grid',\n            placeitems: 'center',\n            color: '#fff'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"muted\",\n            children: \"Caricamento tracciato\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"track-canvas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"leaderboard-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lb-header\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lb-title\",\n            children: \"DETTAGLI PILOTA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lb-list\",\n          style: {\n            maxHeight: 'unset'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lb-row\",\n            style: {\n              gridTemplateColumns: '1fr 1fr 1fr'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Posizione\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: (_driver$position = driver === null || driver === void 0 ? void 0 : driver.position) !== null && _driver$position !== void 0 ? _driver$position : '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 72\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Lap\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: [(_driver$lapCount = driver === null || driver === void 0 ? void 0 : driver.lapCount) !== null && _driver$lapCount !== void 0 ? _driver$lapCount : 0, \"/\", totalLaps]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 66\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Velocit\\xE0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: [((_driver$speedKmh = driver === null || driver === void 0 ? void 0 : driver.speedKmh) !== null && _driver$speedKmh !== void 0 ? _driver$speedKmh : 0).toFixed(1), \" km/h\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 71\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lb-row\",\n            style: {\n              gridTemplateColumns: '1fr 1fr 1fr'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Ultimo giro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: formatLap(driver === null || driver === void 0 ? void 0 : driver.lastLapTime)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 74\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Miglior giro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: formatLap(driver === null || driver === void 0 ? void 0 : driver.bestLapTime)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 75\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Penalit\\xE0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: (driver === null || driver === void 0 ? void 0 : (_driver$penalty = driver.penalty) === null || _driver$penalty === void 0 ? void 0 : _driver$penalty.summary) || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 71\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lb-row\",\n            style: {\n              gridTemplateColumns: '1fr 1fr 1fr'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Settore 1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: formatLap((_driver$lastSectorTim = driver === null || driver === void 0 ? void 0 : (_driver$lastSectorTim2 = driver.lastSectorTimes) === null || _driver$lastSectorTim2 === void 0 ? void 0 : _driver$lastSectorTim2.S1) !== null && _driver$lastSectorTim !== void 0 ? _driver$lastSectorTim : driver === null || driver === void 0 ? void 0 : (_driver$sectorTimes = driver.sectorTimes) === null || _driver$sectorTimes === void 0 ? void 0 : _driver$sectorTimes.S1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Settore 2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: formatLap((_driver$lastSectorTim3 = driver === null || driver === void 0 ? void 0 : (_driver$lastSectorTim4 = driver.lastSectorTimes) === null || _driver$lastSectorTim4 === void 0 ? void 0 : _driver$lastSectorTim4.S2) !== null && _driver$lastSectorTim3 !== void 0 ? _driver$lastSectorTim3 : driver === null || driver === void 0 ? void 0 : (_driver$sectorTimes2 = driver.sectorTimes) === null || _driver$sectorTimes2 === void 0 ? void 0 : _driver$sectorTimes2.S2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Settore 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: formatLap((_driver$lastSectorTim5 = driver === null || driver === void 0 ? void 0 : (_driver$lastSectorTim6 = driver.lastSectorTimes) === null || _driver$lastSectorTim6 === void 0 ? void 0 : _driver$lastSectorTim6.S3) !== null && _driver$lastSectorTim5 !== void 0 ? _driver$lastSectorTim5 : driver === null || driver === void 0 ? void 0 : (_driver$sectorTimes3 = driver.sectorTimes) === null || _driver$sectorTimes3 === void 0 ? void 0 : _driver$sectorTimes3.S3)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lb-row\",\n            style: {\n              gridTemplateColumns: '1fr 1fr 1fr 1fr'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"G-Lat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: (_driver$gforce$lat$to = driver === null || driver === void 0 ? void 0 : (_driver$gforce = driver.gforce) === null || _driver$gforce === void 0 ? void 0 : (_driver$gforce$lat = _driver$gforce.lat) === null || _driver$gforce$lat === void 0 ? void 0 : (_driver$gforce$lat$to2 = _driver$gforce$lat.toFixed) === null || _driver$gforce$lat$to2 === void 0 ? void 0 : _driver$gforce$lat$to2.call(_driver$gforce$lat, 2)) !== null && _driver$gforce$lat$to !== void 0 ? _driver$gforce$lat$to : '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 68\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"G-Long\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: (_driver$gforce$long$t = driver === null || driver === void 0 ? void 0 : (_driver$gforce2 = driver.gforce) === null || _driver$gforce2 === void 0 ? void 0 : (_driver$gforce2$long = _driver$gforce2.long) === null || _driver$gforce2$long === void 0 ? void 0 : (_driver$gforce2$long$ = _driver$gforce2$long.toFixed) === null || _driver$gforce2$long$ === void 0 ? void 0 : _driver$gforce2$long$.call(_driver$gforce2$long, 2)) !== null && _driver$gforce$long$t !== void 0 ? _driver$gforce$long$t : '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 69\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"G-Vert\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: (_driver$gforce$vert$t = driver === null || driver === void 0 ? void 0 : (_driver$gforce3 = driver.gforce) === null || _driver$gforce3 === void 0 ? void 0 : (_driver$gforce3$vert = _driver$gforce3.vert) === null || _driver$gforce3$vert === void 0 ? void 0 : (_driver$gforce3$vert$ = _driver$gforce3$vert.toFixed) === null || _driver$gforce3$vert$ === void 0 ? void 0 : _driver$gforce3$vert$.call(_driver$gforce3$vert, 2)) !== null && _driver$gforce$vert$t !== void 0 ? _driver$gforce$vert$t : '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 69\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"G-Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 900,\n                  color: 'white'\n                },\n                children: (_driver$gforce$total$ = driver === null || driver === void 0 ? void 0 : (_driver$gforce4 = driver.gforce) === null || _driver$gforce4 === void 0 ? void 0 : (_driver$gforce4$total = _driver$gforce4.total) === null || _driver$gforce4$total === void 0 ? void 0 : (_driver$gforce4$total2 = _driver$gforce4$total.toFixed) === null || _driver$gforce4$total2 === void 0 ? void 0 : _driver$gforce4$total2.call(_driver$gforce4$total, 2)) !== null && _driver$gforce$total$ !== void 0 ? _driver$gforce$total$ : '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 70\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pilot-form\",\n            style: {\n              marginTop: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-title\",\n              style: {\n                margin: 0,\n                fontSize: '1.2rem'\n              },\n              children: \"Tempi di tutti i giri\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"lb-list\",\n              style: {\n                maxHeight: '40vh'\n              },\n              children: driver !== null && driver !== void 0 && (_driver$lapTimes = driver.lapTimes) !== null && _driver$lapTimes !== void 0 && _driver$lapTimes.length ? driver.lapTimes.map((t, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"lb-row\",\n                style: {\n                  gridTemplateColumns: '80px 1fr 1fr'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"lb-pos\",\n                  children: i + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 428,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"lb-name\",\n                  children: \"Tempo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"lb-gap\",\n                  style: {\n                    textAlign: 'right',\n                    color: '#e9ffe0',\n                    fontWeight: 900\n                  },\n                  children: formatLap(t)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 41\n                }, this)]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 37\n              }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"muted\",\n                children: \"Nessun giro completato ancora\\u2026\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 354,\n    columnNumber: 9\n  }, this);\n}\n_s(PilotLive, \"Bxh7GWC2NBjUgpd5Qonw84swy7o=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = PilotLive;\nvar _c;\n$RefreshReg$(_c, \"PilotLive\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useParams","useNavigate","colorFromName","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","window","location","hostname","WS_URL","REACT_APP_WS_URL","formatLap","s","m","Math","floor","sec","toFixed","padStart","PilotLive","_s","_circuit$sectors2","_circuit$stats","_circuit$params2","_circuit$sectors3","_driver$position","_driver$lapCount","_driver$speedKmh","_driver$penalty","_driver$lastSectorTim","_driver$lastSectorTim2","_driver$sectorTimes","_driver$lastSectorTim3","_driver$lastSectorTim4","_driver$sectorTimes2","_driver$lastSectorTim5","_driver$lastSectorTim6","_driver$sectorTimes3","_driver$gforce$lat$to","_driver$gforce","_driver$gforce$lat","_driver$gforce$lat$to2","_driver$gforce$long$t","_driver$gforce2","_driver$gforce2$long","_driver$gforce2$long$","_driver$gforce$vert$t","_driver$gforce3","_driver$gforce3$vert","_driver$gforce3$vert$","_driver$gforce$total$","_driver$gforce4","_driver$gforce4$total","_driver$gforce4$total2","_driver$lapTimes","mac","navigate","circuit","setCircuit","raceStatus","setRaceStatus","totalLaps","setTotalLaps","driver","setDriver","color","fullName","tag","trailsRef","TRAIL_MAX_AGE_MS","TRAIL_MAX_LEN","canvasRef","animFrameRef","zoomRef","panRef","x","y","pointersRef","Map","pinchStartRef","dist","zoom","last","cancelled","load","_j$circuit","_j$circuit$sectors","_j$circuit2","r","fetch","ok","Error","j","json","pilot","sectors","length","id","rc","full","name","stats","params","customSectors","e","console","error","ws","WebSocket","onmessage","event","data","JSON","parse","type","_data$circuit","_data$circuit$sectors","_circuit$sectors","_data$circuit2","d","drivers","find","String","toUpperCase","now","Date","t","current","lat","lon","ts","slice","prev","_ref","_d$lapTimes","lapTimes","onerror","close","Array","isArray","canvas","ctx","getContext","alpha","dpr","devicePixelRatio","style","touchAction","ensureSize","w","parentElement","clientWidth","h","clientHeight","width","height","setTransform","onResize","addEventListener","lats","map","lons","minLat","min","maxLat","max","minLon","maxLon","centerLat","centerLon","R","centerLatRad","PI","dxList","l","cos","dyList","maxDx","abs","maxDy","padding","project","maxRange","scale","dx","dy","onWheel","preventDefault","dir","deltaY","passive","onPointerDown","ev","_canvas$setPointerCap","setPointerCapture","call","pointerId","set","clientX","clientY","size","pts","from","values","hypot","onPointerMove","has","p","get","ratio","onPointerUp","_canvas$releasePointe","releasePointerCapture","delete","draw","_circuit$params$width","_circuit$params","_pts$","fillStyle","fillRect","widthMeters","trackPx","forEach","sector","idx","startIdx","endIdx","start","end","save","lineCap","lineJoin","strokeStyle","lineWidth","globalAlpha","beginPath","i","moveTo","lineTo","stroke","restore","closePath","s0","s1","ang","atan2","translate","rotate","filter","trail","cur","ageFrac","rgba","startsWith","hex","split","c","join","v","parseInt","g","b","fill","rr","gg","bb","shadowColor","shadowBlur","arc","font","textAlign","fillText","requestAnimationFrame","removeEventListener","cancelAnimationFrame","className","children","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","background","lengthMeters","onClick","whiteSpace","gridTemplateColumns","position","inset","display","placeitems","ref","maxHeight","lapCount","speedKmh","lastLapTime","bestLapTime","penalty","summary","lastSectorTimes","S1","sectorTimes","S2","S3","gforce","long","vert","total","marginTop","margin","fontSize","_c","$RefreshReg$"],"sources":["/home/ubuntu/racesense/racesense-frontend/src/pages/PilotLive.jsx"],"sourcesContent":["// src/pages/PilotLive.jsx\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport '../App.css';\nimport { colorFromName } from '../utils/colors';\n\nconst API_BASE = process.env.REACT_APP_API_BASE || `http://${window.location.hostname}:5000`;\nconst WS_URL = process.env.REACT_APP_WS_URL || `ws://${window.location.hostname}:5001`;\n\nconst formatLap = (s) => {\n    if (!s && s !== 0) return '—';\n    const m = Math.floor(s / 60);\n    const sec = (s % 60).toFixed(3);\n    return `${m}:${sec.padStart(6, '0')}`;\n};\n\nexport default function PilotLive() {\n    const { mac } = useParams();\n    const navigate = useNavigate();\n    const [circuit, setCircuit] = useState(null);\n    const [raceStatus, setRaceStatus] = useState('IN CORSO');\n    const [totalLaps, setTotalLaps] = useState(0);\n    const [driver, setDriver] = useState(null);\n\n    const color = useMemo(() => colorFromName(driver?.fullName || driver?.tag || mac), [driver?.fullName, driver?.tag, mac]);\n\n    // trail\n    const trailsRef = useRef([]);\n    const TRAIL_MAX_AGE_MS = 20000;\n    const TRAIL_MAX_LEN = 110;\n\n    // canvas & interazione\n    const canvasRef = useRef(null);\n    const animFrameRef = useRef(null);\n    const zoomRef = useRef(1);\n    const panRef = useRef({ x: 0, y: 0 });\n\n    // pinch/pan\n    const pointersRef = useRef(new Map());\n    const pinchStartRef = useRef({ dist: 0, zoom: 1, last: { x: 0, y: 0 } });\n\n    useEffect(() => {\n        let cancelled = false;\n        const load = async () => {\n            try {\n                const r = await fetch(`${API_BASE}/api/race/pilot/${mac}`);\n                if (!r.ok) throw new Error('Pilota non trovato o gara non attiva');\n                const j = await r.json();\n                if (cancelled) return;\n\n                setRaceStatus(j.raceStatus || 'IN CORSO');\n                setTotalLaps(j.totalLaps || 0);\n                setDriver(j.pilot || null);\n\n                if (j.circuit?.sectors?.length) {\n                    setCircuit(j.circuit);\n                } else if (j.circuit?.id) {\n                    try {\n                        const rc = await fetch(`${API_BASE}/api/circuits/${j.circuit.id}`);\n                        if (rc.ok) {\n                            const full = await rc.json();\n                            setCircuit({ id: j.circuit.id, name: full.name || j.circuit.id, stats: full.stats || {}, params: full.params || {}, sectors: full.sectors || [], customSectors: full.customSectors || [] });\n                        } else {\n                            setCircuit(j.circuit);\n                        }\n                    } catch {\n                        setCircuit(j.circuit);\n                    }\n                } else {\n                    setCircuit(null);\n                }\n            } catch (e) {\n                console.error(e);\n                setDriver(null);\n                setCircuit(null);\n            }\n        };\n        load();\n        return () => { cancelled = true; };\n    }, [mac]);\n\n    useEffect(() => {\n        const ws = new WebSocket(WS_URL);\n        ws.onmessage = async (event) => {\n            try {\n                const data = JSON.parse(event.data);\n\n                if (data?.type === 'race_init') {\n                    if (data.circuit?.sectors?.length) setCircuit(data.circuit);\n                    setRaceStatus(data.raceStatus || 'IN CORSO');\n                    setTotalLaps(data.totalLaps || 0);\n                    return;\n                }\n\n                if (data?.type === 'race_snapshot') {\n                    setRaceStatus(data.raceStatus || 'IN CORSO');\n                    setTotalLaps(data.totalLaps || 0);\n\n                    if (!circuit?.sectors?.length && data.circuit?.id) {\n                        try {\n                            const rc = await fetch(`${API_BASE}/api/circuits/${data.circuit.id}`);\n                            if (rc.ok) {\n                                const full = await rc.json();\n                                setCircuit({ id: data.circuit.id, name: full.name || data.circuit.id, stats: full.stats || {}, params: full.params || {}, sectors: full.sectors || [], customSectors: full.customSectors || [] });\n                            } else {\n                                setCircuit(data.circuit);\n                            }\n                        } catch {\n                            setCircuit(data.circuit);\n                        }\n                    }\n\n                    const d = (data.drivers || []).find(x => String(x.mac).toUpperCase() === String(mac).toUpperCase());\n                    if (d) {\n                        const now = Date.now();\n                        const t = trailsRef.current || [];\n                        trailsRef.current = [...t, { lat: d.lat, lon: d.lon, ts: now }].slice(-TRAIL_MAX_LEN);\n                        setDriver(prev => ({ ...(d || {}), lapTimes: d.lapTimes ?? prev?.lapTimes ?? [] }));\n                    }\n                } else if (data?.type === 'race_inactive') {\n                    setRaceStatus('FINITA');\n                }\n            } catch { }\n        };\n        ws.onerror = (e) => console.error('[PilotLive] WS error', e);\n        return () => { try { ws.close(); } catch { } };\n    }, [mac, circuit?.sectors?.length]);\n\n    useEffect(() => {\n        if (!circuit || !Array.isArray(circuit.sectors) || circuit.sectors.length === 0 || !canvasRef.current) return;\n\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d', { alpha: false });\n        const dpr = window.devicePixelRatio || 1;\n\n        canvas.style.touchAction = 'none'; // important per iOS/Android\n\n        const ensureSize = () => {\n            const w = canvas.parentElement.clientWidth || 600;\n            const h = canvas.parentElement.clientHeight || 520;\n            if (canvas.width !== Math.floor(w * dpr) || canvas.height !== Math.floor(h * dpr)) {\n                canvas.width = Math.floor(w * dpr); canvas.height = Math.floor(h * dpr);\n                ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n            }\n        };\n        const onResize = () => ensureSize();\n        ensureSize();\n        window.addEventListener('resize', onResize);\n\n        // proiezione\n        const lats = circuit.sectors.map(s => s.lat);\n        const lons = circuit.sectors.map(s => s.lon);\n        const minLat = Math.min(...lats), maxLat = Math.max(...lats);\n        const minLon = Math.min(...lons), maxLon = Math.max(...lons);\n        const centerLat = (minLat + maxLat) / 2, centerLon = (minLon + maxLon) / 2;\n        const R = 6371000, centerLatRad = centerLat * Math.PI / 180;\n        const dxList = lons.map(l => (l - centerLon) * Math.PI / 180 * R * Math.cos(centerLatRad));\n        const dyList = lats.map(l => (l - centerLat) * Math.PI / 180 * R);\n        const maxDx = Math.max(...dxList.map(Math.abs));\n        const maxDy = Math.max(...dyList.map(Math.abs));\n        const padding = 40;\n\n        const project = (lat, lon) => {\n            const w = canvas.width / dpr, h = canvas.height / dpr;\n            const maxRange = Math.max(maxDx, maxDy) * 1.1;\n            const scale = Math.min(w - padding * 2, h - padding * 2) / (maxRange * 2) * zoomRef.current;\n            const dx = (lon - centerLon) * Math.PI / 180 * R * Math.cos(centerLatRad);\n            const dy = (lat - centerLat) * Math.PI / 180 * R;\n            return { x: w / 2 + dx * scale + panRef.current.x, y: h / 2 - dy * scale + panRef.current.y, scale };\n        };\n\n        // wheel desktop\n        const onWheel = (e) => {\n            e.preventDefault();\n            const dir = e.deltaY > 0 ? 0.9 : 1.1;\n            zoomRef.current = Math.max(0.5, Math.min(6, zoomRef.current * dir));\n        };\n        canvas.addEventListener('wheel', onWheel, { passive: false });\n\n        // pointer touch (pinch/pan)\n        const onPointerDown = (ev) => {\n            canvas.setPointerCapture?.(ev.pointerId);\n            pointersRef.current.set(ev.pointerId, { x: ev.clientX, y: ev.clientY });\n            if (pointersRef.current.size === 1) {\n                pinchStartRef.current.last = { x: ev.clientX, y: ev.clientY };\n            } else if (pointersRef.current.size === 2) {\n                const pts = Array.from(pointersRef.current.values());\n                const dx = pts[0].x - pts[1].x;\n                const dy = pts[0].y - pts[1].y;\n                pinchStartRef.current.dist = Math.hypot(dx, dy);\n                pinchStartRef.current.zoom = zoomRef.current;\n            }\n        };\n        const onPointerMove = (ev) => {\n            if (!pointersRef.current.has(ev.pointerId)) return;\n            pointersRef.current.set(ev.pointerId, { x: ev.clientX, y: ev.clientY });\n\n            if (pointersRef.current.size === 1) {\n                const p = pointersRef.current.get(ev.pointerId);\n                panRef.current.x += p.x - pinchStartRef.current.last.x;\n                panRef.current.y += p.y - pinchStartRef.current.last.y;\n                pinchStartRef.current.last = { ...p };\n            } else if (pointersRef.current.size === 2) {\n                const pts = Array.from(pointersRef.current.values());\n                const dx = pts[0].x - pts[1].x;\n                const dy = pts[0].y - pts[1].y;\n                const dist = Math.hypot(dx, dy);\n                if (pinchStartRef.current.dist > 0) {\n                    const ratio = dist / pinchStartRef.current.dist;\n                    zoomRef.current = Math.max(0.5, Math.min(6, pinchStartRef.current.zoom * ratio));\n                }\n            }\n            ev.preventDefault();\n        };\n        const onPointerUp = (ev) => {\n            canvas.releasePointerCapture?.(ev.pointerId);\n            pointersRef.current.delete(ev.pointerId);\n            if (pointersRef.current.size < 2) {\n                pinchStartRef.current.dist = 0;\n            }\n        };\n        canvas.addEventListener('pointerdown', onPointerDown, { passive: false });\n        canvas.addEventListener('pointermove', onPointerMove, { passive: false });\n        canvas.addEventListener('pointerup', onPointerUp);\n        canvas.addEventListener('pointercancel', onPointerUp);\n        canvas.addEventListener('pointerleave', onPointerUp);\n\n        // render\n        const draw = () => {\n            ensureSize();\n            const w = canvas.width / dpr, h = canvas.height / dpr;\n\n            ctx.fillStyle = '#0a0a0a';\n            ctx.fillRect(0, 0, w, h);\n\n            const widthMeters = circuit?.params?.widthMeters ?? 6;\n            const pts = circuit.sectors.map(s => project(s.lat, s.lon));\n            const scale = pts[0]?.scale || 1;\n            const trackPx = Math.max(6, widthMeters * scale);\n\n            // pista\n            // === BORDO ESTERNO COLORATO PER SETTORI ===\n            const sectors = circuit.customSectors || [];\n            if (Array.isArray(sectors) && sectors.length > 0) {\n                sectors.forEach((sector, idx) => {\n                    if (sector.startIdx == null || sector.endIdx == null) return;\n                    const start = Math.max(0, Math.min(sector.startIdx, circuit.sectors.length - 1));\n                    const end = Math.max(0, Math.min(sector.endIdx, circuit.sectors.length - 1));\n                    if (end <= start) return;\n\n                    const color = sector.color || ['#ff0000', '#00ff00', '#0000ff'][idx % 3];\n                    ctx.save();\n                    ctx.lineCap = 'round';\n                    ctx.lineJoin = 'round';\n                    ctx.strokeStyle = color;\n                    ctx.lineWidth = trackPx + 3;\n                    ctx.globalAlpha = 0.35;\n\n                    ctx.beginPath();\n                    for (let i = start; i <= end; i++) {\n                        const p = project(circuit.sectors[i].lat, circuit.sectors[i].lon);\n                        if (i === start) ctx.moveTo(p.x, p.y);\n                        else ctx.lineTo(p.x, p.y);\n                    }\n                    ctx.stroke();\n                    ctx.restore();\n                });\n            } else {\n                // fallback: bordo uniforme tenue\n                ctx.strokeStyle = 'rgba(255,255,255,0.10)';\n                ctx.lineWidth = trackPx + 3;\n                ctx.lineCap = 'round';\n                ctx.lineJoin = 'round';\n                ctx.beginPath();\n                pts.forEach((p, i) => i ? ctx.lineTo(p.x, p.y) : ctx.moveTo(p.x, p.y));\n                ctx.closePath();\n                ctx.stroke();\n            }\n\n            // asfalto\n            ctx.strokeStyle = 'rgba(80,84,90,0.95)';\n            ctx.lineWidth = trackPx;\n            ctx.lineCap = 'round';\n            ctx.lineJoin = 'round';\n            ctx.beginPath();\n            pts.forEach((p, i) => i ? ctx.lineTo(p.x, p.y) : ctx.moveTo(p.x, p.y));\n            ctx.closePath();\n            ctx.stroke();\n\n            // start\n            if (pts.length > 1) {\n                const s0 = pts[0], s1 = pts[1]; const ang = Math.atan2(s1.y - s0.y, s1.x - s0.x);\n                ctx.save(); ctx.translate(s0.x, s0.y); ctx.rotate(ang);\n                ctx.strokeStyle = '#ffffff'; ctx.lineWidth = Math.max(2, trackPx * 0.12);\n                ctx.beginPath(); ctx.moveTo(0, -trackPx * 0.5); ctx.lineTo(0, trackPx * 0.5); ctx.stroke(); ctx.restore();\n            }\n\n            // trail\n            const now = Date.now();\n            trailsRef.current = (trailsRef.current || []).filter(p => now - p.ts <= TRAIL_MAX_AGE_MS).slice(-TRAIL_MAX_LEN);\n            const trail = trailsRef.current || [];\n            if (trail.length > 1) {\n                for (let t = 1; t < trail.length; t++) {\n                    const prev = project(trail[t - 1].lat, trail[t - 1].lon);\n                    const cur = project(trail[t].lat, trail[t].lon);\n                    const ageFrac = Math.min(1, (now - trail[t].ts) / TRAIL_MAX_AGE_MS);\n                    const alpha = 0.8 * (1 - ageFrac);\n                    let rgba = color;\n                    if (color.startsWith('#')) {\n                        const hex = color.slice(1), full = hex.length === 3 ? hex.split('').map(c => c + c).join('') : hex;\n                        const v = parseInt(full, 16), r = (v >> 16) & 255, g = (v >> 8) & 255, b = v & 255;\n                        rgba = `rgba(${r},${g},${b},${alpha})`;\n                    }\n                    ctx.strokeStyle = rgba; ctx.lineWidth = Math.max(2, trackPx * 0.12);\n                    ctx.beginPath(); ctx.moveTo(prev.x, prev.y); ctx.lineTo(cur.x, cur.y); ctx.stroke();\n                }\n            }\n\n            // dot\n            if (driver) {\n                const p = project(driver.lat, driver.lon);\n                const r = Math.max(6, trackPx * 0.2);\n                let fill = color;\n                if (fill.startsWith('#')) {\n                    const hex = fill.slice(1), full = hex.length === 3 ? hex.split('').map(c => c + c).join('') : hex;\n                    const v = parseInt(full, 16), rr = (v >> 16) & 255, gg = (v >> 8) & 255, bb = v & 255;\n                    fill = `rgba(${rr},${gg},${bb},1)`;\n                }\n                ctx.shadowColor = 'rgba(0,0,0,0.5)'; ctx.shadowBlur = 4;\n                ctx.fillStyle = fill; ctx.beginPath(); ctx.arc(p.x, p.y, r, 0, Math.PI * 2); ctx.fill();\n                ctx.shadowBlur = 0; ctx.strokeStyle = '#fff'; ctx.lineWidth = 2; ctx.stroke();\n\n                ctx.fillStyle = '#fff'; ctx.font = 'bold 11px Roboto, sans-serif'; ctx.textAlign = 'center';\n                ctx.fillText(driver.tag || 'PIL', p.x, p.y - (r + 10));\n            }\n\n            animFrameRef.current = requestAnimationFrame(draw);\n        };\n        draw();\n\n        return () => {\n            window.removeEventListener('resize', onResize);\n            canvas.removeEventListener('wheel', onWheel);\n            canvas.removeEventListener('pointerdown', onPointerDown);\n            canvas.removeEventListener('pointermove', onPointerMove);\n            canvas.removeEventListener('pointerup', onPointerUp);\n            canvas.removeEventListener('pointercancel', onPointerUp);\n            canvas.removeEventListener('pointerleave', onPointerUp);\n            if (animFrameRef.current) cancelAnimationFrame(animFrameRef.current);\n        };\n    }, [circuit, driver, color]);\n\n    return (\n        <div className=\"main small-top\">\n            {/* TOP BAR — senza bordi + riga scrollabile */}\n            <div className=\"rs-live-topbar rs-live-topbar--glass\">\n                <div className=\"rs-chip-row\">\n                    <span className=\"chip readonly pill\">PILOTA</span>\n                    <span className=\"chip readonly pill\" style={{ fontWeight: 800 }}>{driver?.tag || mac}</span>\n                    <span className=\"chip readonly pill\">{driver?.fullName || '—'}</span>\n                    <span className=\"chip readonly pill\">{totalLaps} giri</span>\n                    <span className=\"chip readonly pill\" style={{ background: 'rgba(21,193,48,.22)', color: '#dfffe9', fontWeight: 900 }}>{raceStatus}</span>\n                    <span className=\"chip readonly pill\">{circuit?.name || circuit?.id || 'Circuito'}</span>\n                    {circuit?.stats?.lengthMeters && <span className=\"chip readonly pill\">{circuit.stats.lengthMeters.toFixed(0)} m</span>}\n                    {circuit?.params?.widthMeters && <span className=\"chip readonly pill\">{circuit.params.widthMeters} m larghezza</span>}\n                    <button className=\"btn-ghost\" onClick={() => navigate('/race')} style={{ whiteSpace: 'nowrap' }}>⬅ Torna alla gara</button>\n                </div>\n            </div>\n\n            <div className=\"rs-live-grid\" style={{ gridTemplateColumns: '1fr 420px' }}>\n                <div className=\"track-card\">\n                    {!circuit?.sectors?.length && (\n                        <div style={{ position: 'absolute', inset: 0, display: 'grid', placeitems: 'center', color: '#fff' }}>\n                            <div className=\"muted\">Caricamento tracciato…</div>\n                        </div>\n                    )}\n                    <canvas ref={canvasRef} className=\"track-canvas\" />\n                </div>\n\n                <div className=\"leaderboard-card\">\n                    <div className=\"lb-header\"><div className=\"lb-title\">DETTAGLI PILOTA</div></div>\n                    <div className=\"lb-list\" style={{ maxHeight: 'unset' }}>\n                        <div className=\"lb-row\" style={{ gridTemplateColumns: '1fr 1fr 1fr' }}>\n                            <div><div className=\"muted\">Posizione</div><div style={{ fontWeight: 900, color: 'white' }}>{driver?.position ?? '—'}</div></div>\n                            <div><div className=\"muted\">Lap</div><div style={{ fontWeight: 900, color: 'white' }}>{driver?.lapCount ?? 0}/{totalLaps}</div></div>\n                            <div><div className=\"muted\">Velocità</div><div style={{ fontWeight: 900, color: 'white' }}>{(driver?.speedKmh ?? 0).toFixed(1)} km/h</div></div>\n                        </div>\n\n                        <div className=\"lb-row\" style={{ gridTemplateColumns: '1fr 1fr 1fr' }}>\n                            <div><div className=\"muted\">Ultimo giro</div><div style={{ fontWeight: 900, color: 'white' }}>{formatLap(driver?.lastLapTime)}</div></div>\n                            <div><div className=\"muted\">Miglior giro</div><div style={{ fontWeight: 900, color: 'white' }}>{formatLap(driver?.bestLapTime)}</div></div>\n                            <div><div className=\"muted\">Penalità</div><div style={{ fontWeight: 900, color: 'white' }}>{driver?.penalty?.summary || '—'}</div></div>\n                        </div>\n\n                        <div className=\"lb-row\" style={{ gridTemplateColumns: '1fr 1fr 1fr' }}>\n                            <div>\n                                <div className=\"muted\">Settore 1</div>\n                                <div style={{ fontWeight: 900, color: 'white' }}>\n                                    {formatLap(driver?.lastSectorTimes?.S1 ?? driver?.sectorTimes?.S1)}\n                                </div>\n                            </div>\n                            <div>\n                                <div className=\"muted\">Settore 2</div>\n                                <div style={{ fontWeight: 900, color: 'white' }}>\n                                    {formatLap(driver?.lastSectorTimes?.S2 ?? driver?.sectorTimes?.S2)}\n                                </div>\n                            </div>\n                            <div>\n                                <div className=\"muted\">Settore 3</div>\n                                <div style={{ fontWeight: 900, color: 'white' }}>\n                                    {formatLap(driver?.lastSectorTimes?.S3 ?? driver?.sectorTimes?.S3)}\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"lb-row\" style={{ gridTemplateColumns: '1fr 1fr 1fr 1fr' }}>\n                            <div><div className=\"muted\">G-Lat</div><div style={{ fontWeight: 900, color: 'white' }}>{driver?.gforce?.lat?.toFixed?.(2) ?? '—'}</div></div>\n                            <div><div className=\"muted\">G-Long</div><div style={{ fontWeight: 900, color: 'white' }}>{driver?.gforce?.long?.toFixed?.(2) ?? '—'}</div></div>\n                            <div><div className=\"muted\">G-Vert</div><div style={{ fontWeight: 900, color: 'white' }}>{driver?.gforce?.vert?.toFixed?.(2) ?? '—'}</div></div>\n                            <div><div className=\"muted\">G-Total</div><div style={{ fontWeight: 900, color: 'white' }}>{driver?.gforce?.total?.toFixed?.(2) ?? '—'}</div></div>\n                        </div>\n\n                        <div className=\"pilot-form\" style={{ marginTop: 12 }}>\n                            <div className=\"section-title\" style={{ margin: 0, fontSize: '1.2rem' }}>Tempi di tutti i giri</div>\n                            <div className=\"lb-list\" style={{ maxHeight: '40vh' }}>\n                                {driver?.lapTimes?.length ? driver.lapTimes.map((t, i) => (\n                                    <div key={i} className=\"lb-row\" style={{ gridTemplateColumns: '80px 1fr 1fr' }}>\n                                        <div className=\"lb-pos\">{i + 1}</div>\n                                        <div className=\"lb-name\">Tempo</div>\n                                        <div className=\"lb-gap\" style={{ textAlign: 'right', color: '#e9ffe0', fontWeight: 900 }}>{formatLap(t)}</div>\n                                    </div>\n                                )) : (\n                                    <div className=\"muted\">Nessun giro completato ancora…</div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}